<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
 * Copyright (c) 2009-2014 NVIDIA CORPORATION.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
-->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<title>DriveWorks SDK Reference: TextUI Recording Tool</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="Nvidia.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="reverb-search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="nv.css" rel="stylesheet" type="text/css" />
<link href="nvdwx.css" rel="stylesheet" type="text/css"/>
<style>
 body {
 background-position: 350px 150px;
 background-image: url(watermark.png);
 background-repeat: no-repeat;
 background-attachment: fixed;
 }
 </style>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table width="99%" border="0" cellspacing="1" cellpadding="1">
  <tbody>
    <tr valign="middle">
      <td rowspan="2" height="44" width="19%">
        <div>
            <a id="nv-logo" href="https://www.nvidia.com/"></a>
        </div>
      <td width="81%" height="44">
        <div style="text-align:right; font-weight: bold; font-size:20px"> <br/>DriveWorks SDK Reference </div>
        <div style="text-align:right">
        5.10.87 Release <br/> For Test and Development only <br/> <br/> </div>
    </td>
  </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dwx_recorder_textui_tool.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">TextUI Recording Tool </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section note"><dt>Note</dt><dd>This tool is available in both <b>NVIDIA DriveWorks</b> and <b>NVIDIA DRIVE Software</b> releases.</dd></dl>
<p>This tool is available on the x86 Host System and NVIDIA DRIVE<sup>&trade;</sup> OS Linux.</p>
<p >This is a front-end for the <a class="el" href="dwx_recorder_tool.html">Basic Recording Tool</a>, and provides the following additional features:</p>
<ol type="1">
<li><a class="el" href="dwx_recorder_textui_tool.html#tui_auto_storage_selection">Automatic Storage Selection</a></li>
<li><a class="el" href="dwx_recorder_textui_tool.html#tui_manual_storage_selection">Manual Storage Selection</a></li>
<li><a class="el" href="dwx_recorder_textui_tool.html#tui_sensor_statistics">Sensor Throughput Statistics</a></li>
<li><a class="el" href="dwx_recorder_textui_tool.html#tui_multissd_recording">Multi-SSD Recording</a></li>
<li><a class="el" href="dwx_recorder_textui_tool.html#tui_distributed_recording">Distributed Recording</a></li>
<li><a class="el" href="dwx_recorder_textui_tool.html#black_box_recorder">Black Box Recorder (BBR)</a></li>
</ol>
<h1><a class="anchor" id="tui_starting"></a>
Starting the Recording Application</h1>
<p >Run this tool by executing: </p><pre class="fragment">cd /usr/local/driveworks/tools/capture
./recorder-tui &lt;rig file&gt; OR &lt;rig_directory&gt; [--bbr]

`bbr` starts the recorder in black box recording (bbr) mode.
</pre><p> After initialization, the tool supports the following commands:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Action    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>s &lt;Enter&gt;</code>   </td><td class="markdownTableBodyNone">toggle recording    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>q &lt;Enter&gt;</code>   </td><td class="markdownTableBodyNone">quit    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>start &lt;Enter&gt;</code>   </td><td class="markdownTableBodyNone">start recording    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>stop &lt;Enter&gt;</code>   </td><td class="markdownTableBodyNone">stop recording    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>bbr &lt;Enter&gt;</code>   </td><td class="markdownTableBodyNone">bbr recording mode    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>continuous &lt;Enter&gt;</code>   </td><td class="markdownTableBodyNone">continuous recording mode    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>h264 &lt;Enter&gt;</code>   </td><td class="markdownTableBodyNone">record camera in h264    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>lraw &lt;Enter&gt;</code>   </td><td class="markdownTableBodyNone">record camera in lraw   </td></tr>
</table>
<p ><code>bbr</code>, <code>continuous</code>, <code>h264</code> and <code>lraw</code> switch is supported only when the recorder is in stopped state.</p>
<h1><a class="anchor" id="tui_user_interface"></a>
User Interface</h1>
<p >The textual interface of the tool is illustrated in the screenshot below:</p>
<ol type="1">
<li><a class="el" href="dwx_recorder_textui_tool.html#tui_sensor_statistics">Sensor Throughput Statistics</a></li>
<li>Last error/output message</li>
</ol>
<div class="image">
<img src="tool_tui_recorder.png" alt=""/>
<div class="caption">
Recording Tool - TextUI Interface</div></div>
    <h1><a class="anchor" id="tui_auto_storage_selection"></a>
Automatic Storage Selection</h1>
<p >This tool can discover SSD/eSATA disks that are mounted on the target and meet the following criteria:</p>
<ol type="1">
<li><code>ext4</code> filesystem format</li>
<li><code>&gt; 5GB</code> free space available</li>
<li>visible in <code>/proc/mounts</code></li>
<li>Mountpoint does not contain any spaces or non-standard characters</li>
</ol>
<p >This tool automatically selects the first available disk for recording. Once a disk becomes full (free space &lt; 5GB), output files will be put into the next available disk automatically.</p>
<h1><a class="anchor" id="tui_manual_storage_selection"></a>
Manual Storage Selection</h1>
<p >If automatic disk selection is not convenient, one can manually specify the recording directory in the rig configuration file using the "recorder_storage_paths": </p><pre class="fragment">{
    "rig": {
        "recorder_storage_map": {
            "&lt;sensor_name_1&gt;": "1",
            "&lt;sensor_name_2&gt;": "0",
            "&lt;sensor_name_3&gt;": "0",
            &lt;...&gt;
        },

        "recorder_storage_paths": [
            "&lt;your_storage_path_1&gt;",
            "&lt;your_storage_path_2&gt;",
            &lt;...&gt;
        ],
        &lt;...&gt;
    },
    &lt;...&gt;
}
</pre><p> "recorder_storage_map" is used to map the sensor to the index of "recorder_storage_paths" list. Example: "sensor_name_1" is mapped to index "1" which is "your_storage_path_2". If the sensor map is not provided, then the default value of the storage index "0" will be selected.</p>
<dl class="section note"><dt>Note</dt><dd>The manually specified mountpoint must still be on an <code>ext4</code> filesystem and have <code>&gt; 5GB</code> in free space.</dd></dl>
<h1><a class="anchor" id="tui_sensor_statistics"></a>
Sensor Throughput Statistics</h1>
<p >This tool measures sensor statistics (at disk sink).</p><ol type="1">
<li>Data throughput per sensor</li>
<li>Data written per sensor</li>
<li>Data written for current recording on current sink</li>
</ol>
<h1><a class="anchor" id="tui_multissd_recording"></a>
Multi-SSD Recording</h1>
<p >The <a class="el" href="dwx_recorder_textui_tool.html#tui_manual_storage_selection">Manual Storage Selection</a> feature can be used to perform multi-SSD recording on a single Xavier device.</p>
<p >To achieve this, a user must create multiple rig files, each with their specified storage path and subset of sensors, and place them inside a <code>&lt;rig_directory&gt;</code>.</p>
<p >The tool can then be launched as below: </p><pre class="fragment">./recorder-tui &lt;rig_directory&gt;
</pre> <h1><a class="anchor" id="black_box_recorder"></a>
Black Box Recorder (BBR)</h1>
<p >Black Box Recorder (BBR) records sensor data clips around a vehicle disengagement trigger event. BBR automatically deletes the recording folders of current recording session expect the last three. If a lateral or longitudinal disengagement occurs, BBR preserves the 30 seconds before and after the point of disengagement. The disengagement folder will have two or three recording folders depending on the exact time of the disengagement. BBR internally uses recorder-tui, so the recording data format and directory structure will be identical to the normal recording case. </p><pre class="fragment">./recorder-tui &lt;rig_directory&gt; --bbr
</pre> <dl class="section note"><dt>Note</dt><dd>BBR relies on Dataspeed CAN messages to find the disengagement triggers.</dd></dl>
<h1><a class="anchor" id="tui_distributed_recording"></a>
Distributed Recording</h1>
<p >See <a class="el" href="dwx_devguide_rec_distrec.html">Distributed Recording</a></p>
<h1><a class="anchor" id="tui_configuring"></a>
Configuring the Recorder</h1>
<p >See <a class="el" href="dwx_config_ref.html">Configuration Reference</a></p>
<h1><a class="anchor" id="Session"></a>
Recording Tags</h1>
<p >When using recorder-tui to record a session, it can be useful to be able to tag these sessions. With recorder-tui you can pass in <code>--tag &lt;tag-name&gt;</code> to set a tag for the recorded session which will appear in the aux_info file. The valid values for this tag will need to be specified under the <code>tags.txt</code> file which should appear under your configuration directory that you pass to recorder-tui.</p>
<h1><a class="anchor" id="Encryption"></a>
Recording</h1>
<p >When using recorder-tui to record a session, we can enable or disable encryption. It can be passed as a parameter <code>--disable-encryption</code> or <code>--enable-encryption</code>, by default, encryption is disabled. When encryption is enabled, encryption key is required to encrypt the recording. Encryption key can be provided as a parameter <code>--rsa-key &lt;path-to-encryption&gt;</code>, by default "/home/nvidia/.ssh/recorder-aiinfra.pem" path is used.</p>
<h1><a class="anchor" id="Input"></a>
Fields</h1>
<p >The recorder-tui requires input arguments to collect metadata for a given drive. These fields values are collected as command-line inputs before the recorder launches a recording session. These fields are stored in the yaml file 'auxFile', which is written to the recording session directory.</p>
<p >Fields required: <b>Route</b>: Four digit code used to identify the route recorded in the given session.</p>
<p ><b>Lane</b>: (optional) Certain data collection use-cases require a single lane to be selected for drives along a given route. This field can be left blank to indicate that no particular lane is being driven in the current drive session. Lanes are designated 1-8 with 1 being the rightmost lane and indexes increasing right-to-left like so:</p>
<p >| | | | | | |M| | | | | |e| | | | | |d| | | | | |i| | | | | |a| 4 | 3 | 2 | 1 | 0 = No lane selected |n| | | | | | | | | | |</p>
<p >If you are not performing a data collection drive in a specific lane leave this section blank.</p>
<p ><b>Login-ID</b>: Name of the car operator.</p>
<p ><b>Description</b>: (optional) Text entry field for the car operator to include manual notes. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">
        Advance Information | Subject to Change |
        Prepared and Provided under NDA | Generated by NVIDIA |
        PR-08397-V5.0
      </li>
     </ul>
  </div>
</body>
</html>
