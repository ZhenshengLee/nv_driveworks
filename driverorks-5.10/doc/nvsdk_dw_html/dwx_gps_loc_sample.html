<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
 * Copyright (c) 2009-2014 NVIDIA CORPORATION.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
-->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<title>DriveWorks SDK Reference: GPS Location Logger Sample</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="Nvidia.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="reverb-search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="nv.css" rel="stylesheet" type="text/css" />
<link href="nvdwx.css" rel="stylesheet" type="text/css"/>
<style>
 body {
 background-position: 350px 150px;
 background-image: url(watermark.png);
 background-repeat: no-repeat;
 background-attachment: fixed;
 }
 </style>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table width="99%" border="0" cellspacing="1" cellpadding="1">
  <tbody>
    <tr valign="middle">
      <td rowspan="2" height="44" width="19%">
        <div>
            <a id="nv-logo" href="https://www.nvidia.com/"></a>
        </div>
      <td width="81%" height="44">
        <div style="text-align:right; font-weight: bold; font-size:20px"> <br/>DriveWorks SDK Reference </div>
        <div style="text-align:right">
        5.10.87 Release <br/> For Test and Development only <br/> <br/> </div>
    </td>
  </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dwx_gps_loc_sample.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">GPS Location Logger Sample </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#dwx_gps_loc_sample_description">Description</a><ul><li class="level2"><a href="#dwx_gps_loc_sample_description_interface">Interfacing with sensors</a></li>
</ul>
</li>
<li class="level1"><a href="#dwx_gps_loc_sample_running">Running the sample</a><ul><li class="level2"><a href="#dwx_gps_loc_sample_examples">Examples</a></li>
</ul>
</li>
<li class="level1"><a href="#dwx_gps_loc_sample_output">Output</a></li>
<li class="level1"><a href="#dwx_gps_loc_sample_more">Additional Information</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="dwx_gps_loc_sample_description"></a>
Description</h1>
<p >The GPS Location Logger sample works with any serial port (UART) based GPS sensor or with the Xsens GPS device connected over USB. The logger requires the GPS sensor connected over serial port to deliver messages in NMEA format, while the Xsens device can run in proprietary mode.</p>
<h2><a class="anchor" id="dwx_gps_loc_sample_description_interface"></a>
Interfacing with sensors</h2>
<h4>Serial</h4>
<p >Consumer grade off-the-shelf GPS sensors, also known as GPS mice (e.g., Garmin GPS), are usually connected over USB and implement a serial-to-USB connection with the help of FTDI devices. The Xsens GPS device can be connected through a serial-to-USB connection.</p>
<p >On Linux, these sensors can then be reached over the <code>/dev/ttyUSB</code> or <code>/dev/ttyACM</code> devices. Before trying out the sample, ensure the user has access to the serial device. You can do so by trying to read from the device e.g. with <code>cat /dev/ttyACMx</code>, and if permission is denied, add the current user to the <code>dialout</code> group and then log out/in again: </p><pre class="fragment">sudo usermod -a -G dialout $USER
</pre><p> On QNX, prior to accessing the device, launch the <code>dev-serusb</code> driver as follows: </p><pre class="fragment">devc-serusb -b &lt;baudrate&gt; -F -S -d path=/dev/usb/io-usb-otg
</pre><p> The serial devices can the be reached over the <code>/dev/serusb</code> devices.</p>
<h4>Xsens USB</h4>
<p >The Xsens GPS device can also be connected directly over USB, but is only supported on Linux.</p>
<h1><a class="anchor" id="dwx_gps_loc_sample_running"></a>
Running the sample</h1>
<p >The GPS Location Logger sample, sample_gps_logger, accepts the following parameters: </p><pre class="fragment">./sample_gps_logger --driver=[gps.virtual|gps.uart|gps.xsens|gps.novatel|gps.dataspeed|gps.custom|gps.ublox]
                    --params=[comma/separated/key/value/pairs]
</pre><p> Where: </p><pre class="fragment">--driver=[gps.virtual|gps.uart|gps.xsens|gps.novatel|gps.dataspeed|gps.custom|gps.ublox]
    Allows to specify which GPS driver to use.
    Default value: gps.virtual

--params=[comma/separated/key/value/pairs]
    Different parameters are available for each GPS driver.
    Default value: file=path/to/data/samples/sensors/gps/1.gps
</pre> <dl class="section note"><dt>Note</dt><dd>For a full list of key/value pairs that can be passed to &ndash;params see <a class="el" href="dwx_sensor_enum_sample.html">Sensor Enumeration Sample</a> .</dd></dl>
<h2><a class="anchor" id="dwx_gps_loc_sample_examples"></a>
Examples</h2>
<h4>NMEA format</h4>
<p >For serial devices transmitting messages in NMEA format, use the <code>gps.uart</code> driver. For example: </p><pre class="fragment">./sample_gps_logger --driver=gps.uart --params=device=/dev/ttyACM0
</pre><p> Per default, if no <code>baud</code> parameter has been provided the <code>gps.uart</code> driver assumes a baudrate of 9600. In order to change the baudrate provide <code>baud</code> argument as: </p><pre class="fragment">./sample_gps_logger --driver=gps.uart --params=device=/dev/ttyACM0,baud=115200
</pre><p> On QNX, the baudrate is set when starting <code>devc-serusb</code>. The <code>baud</code> parameter will be ignored.</p>
<h4>Xsens proprietary format</h4>
<p >The sample supports reading GPS packets from a Xsens device through the <code>gps.xsens</code> driver. To run the sample using Xsens over USB device use: </p><pre class="fragment">./sample_gps_logger --driver=gps.xsens --params=device=0,frequency=100
</pre><p> Where <code>device=0</code> parameter sets the index of the Xsens device (usually 0 if only one device is installed) and <code>frequency=100</code> sets the frequency in <code>[Hz]</code> this device should operate with.</p>
<p >To run the sample using Xsens over serial use: </p><pre class="fragment">./sample_gps_logger --driver=gps.xsens --params=device=/dev/ttyUSB0,frequency=100
</pre><p> Please note that even if the Xsens device is a shared device, like Xsens MTi-G-700, capable of delivering GPS and IMU packets, only the GPS packets will be parsed by the <code>gps.xsens</code> driver.</p>
<dl class="section note"><dt>Note</dt><dd>If the device is connected to Xavier UART you need also specify &ndash;stop-bits=1</dd></dl>
<h4>Sensor sharing</h4>
<p >The sample also demonstrates how sensor sharing can be implemented. Two NVIDIA<sup>&reg;</sup> DriveWorks GPS sensors are created from the same hardware device. Both sensor can be then treated independently. Both sensors would deliver exactly the same set of packets. Each sensor is using, however, their own FIFO hence they can be drained at different rates. The output of both sensors is printed to the console: </p><pre class="fragment">GPS[0] - 2712443194 lat: 37.38652333 lon: -122.164585 alt: 46.9 course: 233.9 speed: 0 hdop: 0.8 vdop: 0.8
GPS[1] - 2712443194 lat: 37.38652333 lon: -122.164585 alt: 46.9 course: 233.9 speed: 0 hdop: 0.8 vdop: 0.8
</pre><p> The index <code>[0]</code>, <code>[1]</code> indicates what sensor produced the output. As expected the data packets and their timestamps are equal.</p>
<h1><a class="anchor" id="dwx_gps_loc_sample_output"></a>
Output</h1>
<p >Any valid GPS message that is received results in an output on the console similar to: </p><pre class="fragment">GPS[0] - 2712443194 lat: 37.38652333 lon: -122.164585 alt: 46.9 course: 233.9 speed: 0 hdop: 0.8 vdop: 0.8
</pre><p> Where the first number indicates the timestamp of the received GPS message in microseconds and the rest of the line indicates the geographical location of the sensor.</p>
<p >If no parameters are provided, the sample starts a virtual GPS sensor and interprets the content from the file located at <code>data/samples/sensors/gps/1.gps</code> as GPS input.</p>
<h1><a class="anchor" id="dwx_gps_loc_sample_more"></a>
Additional Information</h1>
<p >For more details see <a class="el" href="gps_mainsection.html">GPS</a> . </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">
        Advance Information | Subject to Change |
        Prepared and Provided under NDA | Generated by NVIDIA |
        PR-08397-V5.0
      </li>
     </ul>
  </div>
</body>
</html>
