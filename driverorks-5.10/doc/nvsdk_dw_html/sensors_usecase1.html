<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
 * Copyright (c) 2009-2014 NVIDIA CORPORATION.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
-->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<title>DriveWorks SDK Reference: Sensors Life Cycle</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="Nvidia.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="reverb-search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="nv.css" rel="stylesheet" type="text/css" />
<link href="nvdwx.css" rel="stylesheet" type="text/css"/>
<style>
 body {
 background-position: 350px 150px;
 background-image: url(watermark.png);
 background-repeat: no-repeat;
 background-attachment: fixed;
 }
 </style>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table width="99%" border="0" cellspacing="1" cellpadding="1">
  <tbody>
    <tr valign="middle">
      <td rowspan="2" height="44" width="19%">
        <div>
            <a id="nv-logo" href="https://www.nvidia.com/"></a>
        </div>
      <td width="81%" height="44">
        <div style="text-align:right; font-weight: bold; font-size:20px"> <br/>DriveWorks SDK Reference </div>
        <div style="text-align:right">
        5.10.87 Release <br/> For Test and Development only <br/> <br/> </div>
    </td>
  </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('sensors_usecase1.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Sensors Life Cycle </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Before you use any sensor in NVIDIA<sup>&reg;</sup> DriveWorks, you must create an instance of the sensor, then use a start-stop mechanism to collect data and finally release the sensor so all resources are freed.</p>
<div class="image">
<img src="sensors_life_cycle.png" alt=""/>
</div>
    <p >The following functions support the life cycle shown above:</p>
<ul>
<li><a class="el" href="group__sensors__common__group.html#ga4004ff15b00f6e90cfe9aa43792be801" title="Creates a new sensor managed by the SAL module with the given parameters.">dwSAL_createSensor()</a> is the function call that prepares the sensor for data delivery. This includes power up, establish connection, open channels, allocates FIFOs, etc... This function is expected to have a significant cost and should only be used during initialization. Sensor type and parameters are determined by using the above protocol and parameter strings.</li>
<li><a class="el" href="group__sensors__common__group.html#ga4451ef616b16704aa57b5eda2810f8c2" title="Starts the sensor previously successfully created with &#39;dwSAL_createSensor()&#39;.">dwSensor_start()</a> is a low latency call that starts the capturing of sensor data.</li>
<li><a class="el" href="group__sensors__common__group.html#ga65b211709a6344856eb458c0ed128f12" title="Stops the sensor.">dwSensor_stop()</a> is a low latency call that will stop capturing data and will drain any data not consumed in preparation for the next start call.</li>
<li><a class="el" href="group__sensors__common__group.html#ga770fa0714d22dd11c8979ae6db5111b9" title="Releases a sensor managed by the SAL module.">dwSAL_releaseSensor()</a> is a function call used to stop the sensor, disconnect it from DriveWorks SAL and release any allocated resources. It is expected to be high latency and should only be called at application termination.</li>
</ul>
<p >Here is an example of initialization of a virtual camera for video replay and its release: </p><div class="fragment"><div class="line"><span class="comment">// Initialize DriveWorks</span></div>
<div class="line"><a class="code hl_function" href="group__core__context__group.html#ga01e8476c6a7d6155335bd4da7775a3da">dwInitialize</a>(&amp;sdk, <a class="code hl_define" href="VersionCurrent_8h.html#a45464d71bb6003b7e36f39f2be67056c">DW_VERSION</a>, &amp;sdkParams);</div>
<div class="line"><span class="comment">// create SAL module of the SDK</span></div>
<div class="line"><a class="code hl_function" href="group__sensors__common__group.html#ga668e387f4d1d7bc19c6430e20f8f4782">dwSAL_initialize</a>(&amp;sal, sdk);</div>
<div class="line"><span class="comment">// create virtual camera interface</span></div>
<div class="line">dwSensor cameraSensor = <a class="code hl_define" href="group__core__types__group.html#ga6caa500e64263b826a1e242a20cc02cc">DW_NULL_HANDLE</a>;</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="group__sensors__common__group.html#structdwSensorParams">dwSensorParams</a> params;</div>
<div class="line">    std::string parameterString = <span class="stringliteral">&quot;file=/tmp/test.h264&quot;</span>;</div>
<div class="line">    params.<a class="code hl_variable" href="group__sensors__common__group.html#ae345701d33349ba6794043c46ea0a52c">protocol</a>             = <span class="stringliteral">&quot;camera.virtual&quot;</span>;</div>
<div class="line">    <a class="code hl_enumeration" href="group__core__status__group.html#ga01e41060986cf4c0d618a8923846619b">dwStatus</a> result = <a class="code hl_function" href="group__sensors__common__group.html#ga4004ff15b00f6e90cfe9aa43792be801">dwSAL_createSensor</a>(&amp;cameraSensor, params, sal);</div>
<div class="line">    <span class="keywordflow">if</span> (result != DW_SUCCESS) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Cannot create camera.virtual?&quot;</span></div>
<div class="line">                  &lt;&lt; params.<a class="code hl_variable" href="group__sensors__common__group.html#ada918cb69f74cd07d306af18bcd43bf0">parameters</a> &lt;&lt; std::endl;</div>
<div class="line">        exit(1);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aVersionCurrent_8h_html_a45464d71bb6003b7e36f39f2be67056c"><div class="ttname"><a href="VersionCurrent_8h.html#a45464d71bb6003b7e36f39f2be67056c">DW_VERSION</a></div><div class="ttdeci">#define DW_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="VersionCurrent_8h_source.html#l00044">VersionCurrent.h:44</a></div></div>
<div class="ttc" id="agroup__core__context__group_html_ga01e8476c6a7d6155335bd4da7775a3da"><div class="ttname"><a href="group__core__context__group.html#ga01e8476c6a7d6155335bd4da7775a3da">dwInitialize</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwInitialize(dwContextHandle_t *const context, dwVersion const headerVersion, dwContextParameters const *const params)</div><div class="ttdoc">Creates and initializes an SDK context.</div></div>
<div class="ttc" id="agroup__core__status__group_html_ga01e41060986cf4c0d618a8923846619b"><div class="ttname"><a href="group__core__status__group.html#ga01e41060986cf4c0d618a8923846619b">dwStatus</a></div><div class="ttdeci">dwStatus</div><div class="ttdoc">Status definition.</div><div class="ttdef"><b>Definition:</b> <a href="Status_8h_source.html#l00173">Status.h:173</a></div></div>
<div class="ttc" id="agroup__core__types__group_html_ga6caa500e64263b826a1e242a20cc02cc"><div class="ttname"><a href="group__core__types__group.html#ga6caa500e64263b826a1e242a20cc02cc">DW_NULL_HANDLE</a></div><div class="ttdeci">#define DW_NULL_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="Types_8h_source.html#l00083">Types.h:83</a></div></div>
<div class="ttc" id="agroup__sensors__common__group_html_ada918cb69f74cd07d306af18bcd43bf0"><div class="ttname"><a href="group__sensors__common__group.html#ada918cb69f74cd07d306af18bcd43bf0">dwSensorParams::parameters</a></div><div class="ttdeci">const char8_t * parameters</div><div class="ttdoc">Array of additional parameters provided to sensor creation.</div><div class="ttdef"><b>Definition:</b> <a href="Sensors_8h_source.html#l00106">Sensors.h:106</a></div></div>
<div class="ttc" id="agroup__sensors__common__group_html_ae345701d33349ba6794043c46ea0a52c"><div class="ttname"><a href="group__sensors__common__group.html#ae345701d33349ba6794043c46ea0a52c">dwSensorParams::protocol</a></div><div class="ttdeci">const char8_t * protocol</div><div class="ttdoc">Name of the protocol.</div><div class="ttdef"><b>Definition:</b> <a href="Sensors_8h_source.html#l00099">Sensors.h:99</a></div></div>
<div class="ttc" id="agroup__sensors__common__group_html_ga4004ff15b00f6e90cfe9aa43792be801"><div class="ttname"><a href="group__sensors__common__group.html#ga4004ff15b00f6e90cfe9aa43792be801">dwSAL_createSensor</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwSAL_createSensor(dwSensorHandle_t *const sensor, dwSensorParams const params, dwSALHandle_t const sal)</div><div class="ttdoc">Creates a new sensor managed by the SAL module with the given parameters.</div></div>
<div class="ttc" id="agroup__sensors__common__group_html_ga668e387f4d1d7bc19c6430e20f8f4782"><div class="ttname"><a href="group__sensors__common__group.html#ga668e387f4d1d7bc19c6430e20f8f4782">dwSAL_initialize</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwSAL_initialize(dwSALHandle_t *const sal, dwContextHandle_t const context)</div><div class="ttdoc">Creates and initializes a SAL (sensor abstraction layer) module.</div></div>
<div class="ttc" id="agroup__sensors__common__group_html_structdwSensorParams"><div class="ttname"><a href="group__sensors__common__group.html#structdwSensorParams">dwSensorParams</a></div><div class="ttdoc">Holds sets of parameters for sensor creation.</div><div class="ttdef"><b>Definition:</b> <a href="Sensors_8h_source.html#l00094">Sensors.h:95</a></div></div>
</div><!-- fragment --><p >Once the sensor has started, it is possible to consume the data being acquired by using generic or specialized accessors.</p>
<p >Generic accessors are used mainly for serialization purposes as they provide raw sensor data. The available function calls are <code><a class="el" href="group__sensors__common__group.html#ga69af84722fe6859f388ba81e05fc52cc" title="Reads RAW data from sensor as byte array at a given time (TimeoutUs).">dwSensor_readRawData()</a></code> to get access to the data memory pointers and <code><a class="el" href="group__sensors__common__group.html#ga6baeb35a3eda12a7db3e83d97d2639a0" title="Returns RAW data to sensor as a byte array.">dwSensor_returnRawData()</a></code> to return the pointers back to the sensor abstraction layer. A full workflow based on raw data use is demonstrare in <a class="el" href="dwx_record_sample.html">Simple Sensor Recording Sample</a>.</p>
<p >To access processed data one needs to use specialized function calls that will provide the data formatted appropriately depending on the sensor type. For all details on specific sensors see:</p>
<ul>
<li><a class="el" href="basic_tutorials.html#dwx_sensors_camera_tutorials">Camera Usage</a></li>
<li><a class="el" href="basic_tutorials.html#dwx_sensors_canbus_tutorials">CANBUS Usage</a></li>
<li><a class="el" href="basic_tutorials.html#dwx_sensors_gps_tutorials">GPS Usage</a></li>
<li><a class="el" href="basic_tutorials.html#dwx_sensors_imu_tutorials">IMU Usage</a></li>
<li><a class="el" href="basic_tutorials.html#dwx_sensors_lidar_tutorials">Lidar Usage</a></li>
<li><a class="el" href="basic_tutorials.html#dwx_sensors_radar_tutorials">Radar Usage</a></li>
</ul>
<p >After usage the sensor, SAL and SDK handle must be released.</p>
<div class="fragment"><div class="line">// release camera sensor</div>
<div class="line">dwSAL_releaseSensor(&amp;cameraSensor);</div>
<div class="line"> </div>
<div class="line">// release SAL module of the SDK</div>
<div class="line">dwSAL_release(&amp;sal);</div>
<div class="line"> </div>
<div class="line">// Release DriveWorks</div>
<div class="line">dwRelease(&amp;sdk);</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">
        Advance Information | Subject to Change |
        Prepared and Provided under NDA | Generated by NVIDIA |
        PR-08397-V5.0
      </li>
     </ul>
  </div>
</body>
</html>
