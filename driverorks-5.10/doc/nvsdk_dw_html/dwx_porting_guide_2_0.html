<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
 * Copyright (c) 2009-2014 NVIDIA CORPORATION.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
-->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<title>DriveWorks SDK Reference: Porting Guide from SDK 1.5 to SDK 2.0</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="Nvidia.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="reverb-search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="nv.css" rel="stylesheet" type="text/css" />
<link href="nvdwx.css" rel="stylesheet" type="text/css"/>
<style>
 body {
 background-position: 350px 150px;
 background-image: url(watermark.png);
 background-repeat: no-repeat;
 background-attachment: fixed;
 }
 </style>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table width="99%" border="0" cellspacing="1" cellpadding="1">
  <tbody>
    <tr valign="middle">
      <td rowspan="2" height="44" width="19%">
        <div>
            <a id="nv-logo" href="https://www.nvidia.com/"></a>
        </div>
      <td width="81%" height="44">
        <div style="text-align:right; font-weight: bold; font-size:20px"> <br/>DriveWorks SDK Reference </div>
        <div style="text-align:right">
        5.10.87 Release <br/> For Test and Development only <br/> <br/> </div>
    </td>
  </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dwx_porting_guide_2_0.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Porting Guide from SDK 1.5 to SDK 2.0 </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#pg_calibration">Calibration</a></li>
<li class="level1"><a href="#pg_dnn">DNN</a></li>
<li class="level1"><a href="#pg_egomotion">Egomotion</a></li>
<li class="level1"><a href="#pg_icp">Iterative Closest Point</a></li>
<li class="level1"><a href="#pg_imageprocessing">Image Processing</a></li>
<li class="level1"><a href="#pg_lanegraph">Lane Graph</a></li>
<li class="level1"><a href="#pg_lidaraccumulator">Lidar Accumulator</a></li>
<li class="level1"><a href="#pg_maps">Maps</a></li>
<li class="level1"><a href="#pg_objectdetection">Object Detection</a></li>
<li class="level1"><a href="#pg_objects">Objects</a></li>
<li class="level1"><a href="#pg_pcp">Point Cloud Processing</a></li>
<li class="level1"><a href="#pg_rigconfiguration">Rig Configuration</a></li>
<li class="level1"><a href="#pg_sfm">SFM</a></li>
<li class="level1"><a href="#pg_vehicleio">VehicleIO</a></li>
<li class="level1"><a href="#pg_waitconditions">Wait Conditions</a></li>
</ul>
</div>
<div class="textblock"><p >This document will help you port your applications from DriveWorks SDK 1.5 to DriveWorks SDK 2.0.</p>
<hr  />
<h1><a class="anchor" id="pg_calibration"></a>
Calibration</h1>
<p >The module <code>dwCalibratedCamera</code> has been separated from <code>dwRig</code> renamed to <code>dwCameraModel</code>. It resides in the folder <code>dw/calibration/cameramodel</code>. It provides functions to handle calibrated intrinsic camera models.</p>
<ul>
<li>Header file has been renamed from <code><a class="el" href="Camera_8h.html" title="NVIDIA DriveWorks API: Cameras">Camera.h</a></code> to <code><a class="el" href="CameraModel_8h.html" title="NVIDIA DriveWorks API: Camera Methods">CameraModel.h</a></code>.</li>
<li>The object handles have been renamed to <code>dwCameraModelHandle_t</code> and <code>dwConstCameraModelHandle_t</code>, respectively.</li>
<li>The prefixes for all functions declared in <code><a class="el" href="CameraModel_8h.html" title="NVIDIA DriveWorks API: Camera Methods">CameraModel.h</a></code> have been updated from <code>dwCalibratedCamera</code> to <code>dwCameraModel</code>.</li>
<li><code><a class="el" href="group__cameramodel__group.html#gaa741429ffb1cfd11b477f3ad3ffd5c23" title="Sets a new origin for the image and adjusts image scales.">dwCameraModel_applyImageTransform()</a></code> has been updated and now it takes the additional parameter <code>bool updateMasks</code>.</li>
<li><code>dwCameraModel_initialize</code> has been moved here from <code>dwRig</code>.</li>
</ul>
<p >For more information see <a class="el" href="rig_mainsection.html">Rig Configuration</a>.</p>
<hr  />
<h1><a class="anchor" id="pg_dnn"></a>
DNN</h1>
<p >This release adds support for generating and using DLA (Deep-Learning-Accelerator) models. This change requires selection of the processor type at the time of initialization; therefore, the following functions' signatures have been updated accordingly:</p>
<ul>
<li><code><a class="el" href="group__dnn__group.html#ga437860c89763fc8e4b74efae2e0f4cbf" title="Creates and initializes a TensorRT Network from file.">dwDNN_initializeTensorRTFromFile()</a></code> has been renamed to <code>dwDNN_initializeTensorRTFromFileNew()</code> and requires an additional argument of type <code>dwProcessorType</code> indicating on which processor the model shall run on. Note that the model must be generated on the corresponding processor.</li>
<li><code><a class="el" href="group__dnn__group.html#ga4593649191f89a10751511df7fd22b7f" title="Creates and initializes a TensorRT Network from memory.">dwDNN_initializeTensorRTFromMemory()</a></code> has been renamed to <code>dwDNN_initializeTensorRTFromMemoryNew()</code> and requires an additional argument of type <code>dwProcessorType</code> indicating on which processor the model shall run on. Note that the model must be generated on the corresponding processor.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The old APIs and the <code>New</code> suffix for the new APIs will be removed in the next major release.</dd></dl>
<p>For more information see <a class="el" href="dnn_mainsection.html">DNN</a>.</p>
<hr  />
<h1><a class="anchor" id="pg_egomotion"></a>
Egomotion</h1>
<ul>
<li><code>dwEgoMotionParameters</code> has been renamed to <code><a class="el" href="group__egomotion__group.html#structdwEgomotionParameters" title="Holds initialization parameters for the Egomotion module.">dwEgomotionParameters</a></code>.</li>
<li><code>dwEgoMotionSensorCharacteristics</code> has been renamed to <code><a class="el" href="group__egomotion__group.html#structdwEgomotionSensorCharacteristics" title="Sensor measurement noise characteristics.">dwEgomotionSensorCharacteristics</a></code>.</li>
<li>The <code>dwEgomotionParameters.enableLocationFilter</code> has been renamed to <code>dwEgomotionParameters.disableLocationFilter</code>.</li>
<li><code>dw/radarmotion</code> has been moved to <code>dw/egomotion/radar</code>.</li>
</ul>
<p >For more information see <a class="el" href="egomotion_mainsection.html">Egomotion</a>.</p>
<hr  />
<h1><a class="anchor" id="pg_icp"></a>
Iterative Closest Point</h1>
<p >ICP has been completelly moved to point cloud processing module.</p>
<p >For more information see <a class="el" href="pointcloudprocessing_usecase5.html">Point Cloud ICP</a>.</p>
<hr  />
<h1><a class="anchor" id="pg_imageprocessing"></a>
Image Processing</h1>
<h3>Port <code>dwPyramidHandle_t</code> to <code>dwPyramidImage</code></h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Old name   </th><th class="markdownTableHeadNone">New name    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwPyramid_initialize()   </td><td class="markdownTableBodyNone">dwPyramid_create()    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwPyramid_release()   </td><td class="markdownTableBodyNone">dwPyramid_destroy()    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwPyramid_build()   </td><td class="markdownTableBodyNone">dwImageFilter_computePyramid()    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwPyramid_getLevelCount()   </td><td class="markdownTableBodyNone">dwPyramidImage::levelCount   </td></tr>
</table>
<p ><code>dwPyramidImage::levelImages[level]</code> provides an <code><a class="el" href="group__image__group.html#ga0941eecdd67c03c4685bb895f0066f59">dwImageHandle_t</a></code> for the (level)-th image, <code><a class="el" href="group__image__group.html#ga9a80257186d4317439edf3bbdbb63d7c" title="Retrieves the properties of a dwImageHandle_t.">dwImage_getProperties()</a></code> acquires the image size, and <code><a class="el" href="group__image__group.html#ga9b63aaeb03d9cbda4fec269ec09f53e6" title="Retrieves the dwImageCUDA of a dwImageHandle_t.">dwImage_getCUDA()</a></code> acquires <code><a class="el" href="group__image__group.html#structdwImageCUDA" title="Defines a CUDA image.">dwImageCUDA</a></code> data.</p>
<p >Example: Old code for creating, building and destroying a pyramid: </p><div class="fragment"><div class="line"><span class="comment">// Old code</span></div>
<div class="line">dwPyramidConfig config{};</div>
<div class="line">config.width = width;</div>
<div class="line">config.height = height;</div>
<div class="line">config.levelCount = numLevel;</div>
<div class="line">config.dataType = <a class="code hl_enumvalue" href="group__core__types__group.html#ggaa47781681c93aac1f28bc9bef7b07960ab94112ec2a0a6a1958881319168f52a5">DW_TYPE_UINT8</a>;</div>
<div class="line">dwPyramid_initialize(&amp;pyramid, &amp;config, 0, context);</div>
<div class="line">dwPyramid_build(&amp;singlePlaneImage, pyramid);</div>
<div class="line">dwPyramid_release(pyramid);</div>
<div class="ttc" id="agroup__core__types__group_html_ggaa47781681c93aac1f28bc9bef7b07960ab94112ec2a0a6a1958881319168f52a5"><div class="ttname"><a href="group__core__types__group.html#ggaa47781681c93aac1f28bc9bef7b07960ab94112ec2a0a6a1958881319168f52a5">DW_TYPE_UINT8</a></div><div class="ttdeci">@ DW_TYPE_UINT8</div><div class="ttdoc">8-bit unsigned integer.</div><div class="ttdef"><b>Definition:</b> <a href="Types_8h_source.html#l00108">Types.h:108</a></div></div>
</div><!-- fragment --><p >New code for creating, building and destroying a pyramid: </p><div class="fragment"><div class="line"><span class="comment">// New code</span></div>
<div class="line">dwPyramid_create(&amp;pyramid, numLevel, width, height, <a class="code hl_enumvalue" href="group__core__types__group.html#ggaa47781681c93aac1f28bc9bef7b07960ab94112ec2a0a6a1958881319168f52a5">DW_TYPE_UINT8</a>, context);</div>
<div class="line">dwImageFilter_computePyramid(&amp;pyramid, &amp;singlePlaneImage, 0, context);</div>
<div class="line">dwPyramid_destroy(pyramid);</div>
</div><!-- fragment --><h3>Port <code>dwFeatureListHandle_t</code> and <code>dwFeatureListPointers</code> to <code><a class="el" href="group__featureArray__group.html#structdwFeatureHistoryArray" title="Holds pointers to the data exposed by a feature2d list.">dwFeatureHistoryArray</a></code>.</h3>
<ul>
<li><code>dwFeatureStatus</code> has been renamed to <code><a class="el" href="group__featureArray__group.html#ga41557d7183de7a8b1d351f7cb1043817" title="Defines the possible status of a feature.">dwFeature2DStatus</a></code>.</li>
<li><code>DW_FEATURE_STATUS_XXX</code> has been renamed to <code>DW_FEATURE2D_STATUS_XXX</code>.</li>
</ul>
<p >The new <code><a class="el" href="group__featureArray__group.html#structdwFeatureHistoryArray" title="Holds pointers to the data exposed by a feature2d list.">dwFeatureHistoryArray</a></code> struct provides pointers such as: <code>*statuses</code>, <code>*ages</code>, <code>*ids</code>, <code>*locationHistory</code> and <code>*featureCount</code> like the old <code>dwFeatureListPointers</code> struct did. It is also created and destroyed like the old handle <code>dwFeatureListHandle_t</code>. <code><a class="el" href="group__featureArray__group.html#structdwFeatureHistoryArray" title="Holds pointers to the data exposed by a feature2d list.">dwFeatureHistoryArray</a></code> can be created on page-able/pinned CPU or CUDA memory.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Old name   </th><th class="markdownTableHeadNone">New name    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureListPointers::statuses   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureArray__group.html#ab259b136db10282b78e86ab11e95e0ad" title="Status of each feature.">dwFeatureHistoryArray::statuses</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureListPointers::ages   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureArray__group.html#a4c6faa13abee7eb02a98d8618552d916" title="Age of each feature.">dwFeatureHistoryArray::ages</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureArray__group.html#abe8cc3de1fb591f0d3bda9d049e764f4" title="Id of each feature.">dwFeatureHistoryArray::ids</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureListPointers::locationHistory   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureArray__group.html#a90e33ce0c91eb6aa5f14ad844cc857f9" title="Location history of feature points.">dwFeatureHistoryArray::locationHistory</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureListPointers::featureCount   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureArray__group.html#aa1d3615da2dc2e0ae7ad0c1eedeae568" title="Total number of feature points.">dwFeatureHistoryArray::featureCount</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureList_initialize()   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureArray__group.html#gae638b572d3bef4c29ebe29531b58354c" title="Creates and initializes a feature history array.">dwFeatureHistoryArray_create()</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureList_release()   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureArray__group.html#ga212e03d3e504937744c141c0951d8bf5" title="Destroys the featureHistoryArray and frees any memory created by dwFeatureHistoryArray_create().">dwFeatureHistoryArray_destroy()</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureList_reset()   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureArray__group.html#gaad15398ee6a8f80b373c6d38f2e99c7a" title="Resets the feature history array.">dwFeatureHistoryArray_reset()</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureList_getDataBasePointer()   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureArray__group.html#ad6d3ffe9760895f271913a2c685499f1" title="Pointer to the raw data address.">dwFeatureHistoryArray::data</a>, <a class="el" href="group__featureArray__group.html#ac6a21142a3a77b19ebd23029a03e479b" title="Bytes of raw data.">dwFeatureHistoryArray::bytes</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureList_getCurrentTimeIdx()   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureArray__group.html#acac509432b1e52052bee8c2d18bd6118" title="Index that points to the latest feature records.">dwFeatureHistoryArray::currentTimeIdx</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureList_setCurrentTimeIdx()   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureArray__group.html#acac509432b1e52052bee8c2d18bd6118" title="Index that points to the latest feature records.">dwFeatureHistoryArray::currentTimeIdx</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureList_getFeatureListSize()   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureArray__group.html#a733567c39b2f54f9495f932a376d14d7" title="Max number of features in one timeIdx.">dwFeatureHistoryArray::maxFeatures</a>, <a class="el" href="group__featureArray__group.html#a17f754c825d2e51b6bb44eec81e85432" title="Max feature history size.">dwFeatureHistoryArray::maxHistory</a>   </td></tr>
</table>
<p >For new <code>dw_imageprocessing</code> APIs, there's no need to call <code>selectValid()</code>, <code>compact()</code> and <code>proximityFilter()</code> explicitly. They are automatically called within the DriveWorks module.</p>
<p >Example: In the old <code>dw_feature</code> APIs, the application needed to create a <code>dwFeatureListHandle_t</code> object and call <code>dwFeatureList_getDataPointers()</code> to get the interpretable <code>dwFeatureListPointers</code>. </p><div class="fragment"><div class="line"><span class="comment">// Old code</span></div>
<div class="line">dwFeatureList_initialize(&amp;featureList, maxFeatureCount, historyCapacity, width, height, 0, context);</div>
<div class="line"><span class="keywordtype">void</span>* d_database8;</div>
<div class="line"><span class="keywordtype">size_t</span> databytes;</div>
<div class="line">dwFeatureListPointers featureDataGPU;</div>
<div class="line">dwFeatureList_getDataBasePointer(&amp;d_database8, &amp;databytes, featureList);</div>
<div class="line">dwFeatureList_getDataPointers(&amp;featureDataGPU, d_database8, featureList));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// access the pointers of dwFeatureListPointers on GPU</span></div>
<div class="line">featureDataGPU.statuses[...]</div>
<div class="line">featureDataGPU.locationHistory[...]</div>
</div><!-- fragment --><p >If the application needed a CPU copy of the <code>featureList</code> handle, it first had to allocate CPU memory and call <code>dwFeatureList_getDataPointers()</code> to interpret it into <code>dwFeatureListPointers</code>. </p><div class="fragment"><div class="line"><span class="comment">// Old code</span></div>
<div class="line">uint8_t* h_database8 = <span class="keyword">new</span> uint8_t[databytes];</div>
<div class="line">dwFeatureListPointers featureDataCPU;</div>
<div class="line">dwFeatureList_getDataPointers(&amp;featureDataCPU, h_database8, featureList));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// access the pointers of dwFeatureListPointers on CPU</span></div>
<div class="line">featureDataCPU.statuses[...]</div>
<div class="line">featureDataCPU.locationHistory[...]</div>
</div><!-- fragment --><p >It also needed the raw data pointer to copy data between the CPU and GPU. </p><div class="fragment"><div class="line"><span class="comment">// GPU -&gt; CPU copy</span></div>
<div class="line">cudaMemcpy(h_database8, d_database8, databytes, cudaMemcpyDeviceToHost);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// CPU -&gt; GPU copy</span></div>
<div class="line">cudaMemcpy(d_database8, h_database8, databytes, cudaMemcpyHostToDevice);</div>
</div><!-- fragment --><p >In the new <code>dw_imageprocessing</code> APIs, the application only needs to create the <code><a class="el" href="group__featureArray__group.html#structdwFeatureHistoryArray" title="Holds pointers to the data exposed by a feature2d list.">dwFeatureHistoryArray</a></code> object on the CPU and GPU. It provides both raw pointers and interpretable pointers. It also provides the <code><a class="el" href="group__featureArray__group.html#ga8abb15248cf2a91333720b8eed1ba7b9" title="Deep copy all contents from srcFeatureHistory to dstFeatureHistory.">dwFeatureHistoryArray_copyAsync()</a></code> API to easily copy data between two feature history arrays. </p><div class="fragment"><div class="line"><span class="comment">// New code</span></div>
<div class="line"><a class="code hl_function" href="group__featureArray__group.html#gae638b572d3bef4c29ebe29531b58354c">dwFeatureHistoryArray_create</a>(&amp;featureHistoryCPU, maxFeatureCount, historyCapacity, <a class="code hl_enumvalue" href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023a9729e85945ecb1a598a445897aeb545c">DW_MEMORY_TYPE_CPU</a>, context);</div>
<div class="line"><a class="code hl_function" href="group__featureArray__group.html#gae638b572d3bef4c29ebe29531b58354c">dwFeatureHistoryArray_create</a>(&amp;featureHistoryGPU, maxFeatureCount, historyCapacity, <a class="code hl_enumvalue" href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023ac9656206fa925a04a1a14bdfa5ab6a40">DW_MEMORY_TYPE_CUDA</a>, context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// access the pointers on GPU</span></div>
<div class="line">featureHistoryGPU.statuses[...]</div>
<div class="line">featureHistoryGPU.locationHistory[...]</div>
<div class="line"> </div>
<div class="line"><span class="comment">// access the pointers on CPU</span></div>
<div class="line">featureHistoryCPU.statuses[...]</div>
<div class="line">featureHistoryCPU.locationHistory[...]</div>
<div class="line"> </div>
<div class="line"><span class="comment">// GPU -&gt; CPU copy</span></div>
<div class="line"><a class="code hl_function" href="group__featureArray__group.html#ga8abb15248cf2a91333720b8eed1ba7b9">dwFeatureHistoryArray_copyAsync</a>(&amp;featureHistoryCPU, &amp;featureHistoryGPU, 0);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// CPU -&gt; GPU copy</span></div>
<div class="line"><a class="code hl_function" href="group__featureArray__group.html#ga8abb15248cf2a91333720b8eed1ba7b9">dwFeatureHistoryArray_copyAsync</a>(&amp;featureHistoryGPU, &amp;featureHistoryCPU, 0);</div>
<div class="ttc" id="agroup__core__types__group_html_gga71b04af11695393d59ac9aca72f93023a9729e85945ecb1a598a445897aeb545c"><div class="ttname"><a href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023a9729e85945ecb1a598a445897aeb545c">DW_MEMORY_TYPE_CPU</a></div><div class="ttdeci">@ DW_MEMORY_TYPE_CPU</div><div class="ttdoc">pageable CPU memory</div><div class="ttdef"><b>Definition:</b> <a href="Types_8h_source.html#l00181">Types.h:181</a></div></div>
<div class="ttc" id="agroup__core__types__group_html_gga71b04af11695393d59ac9aca72f93023ac9656206fa925a04a1a14bdfa5ab6a40"><div class="ttname"><a href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023ac9656206fa925a04a1a14bdfa5ab6a40">DW_MEMORY_TYPE_CUDA</a></div><div class="ttdeci">@ DW_MEMORY_TYPE_CUDA</div><div class="ttdoc">CUDA memory.</div><div class="ttdef"><b>Definition:</b> <a href="Types_8h_source.html#l00178">Types.h:178</a></div></div>
<div class="ttc" id="agroup__featureArray__group_html_ga8abb15248cf2a91333720b8eed1ba7b9"><div class="ttname"><a href="group__featureArray__group.html#ga8abb15248cf2a91333720b8eed1ba7b9">dwFeatureHistoryArray_copyAsync</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeatureHistoryArray_copyAsync(dwFeatureHistoryArray *dstFeatureHistory, const dwFeatureHistoryArray *srcFeatureHistory, cudaStream_t stream)</div><div class="ttdoc">Deep copy all contents from srcFeatureHistory to dstFeatureHistory.</div></div>
<div class="ttc" id="agroup__featureArray__group_html_gae638b572d3bef4c29ebe29531b58354c"><div class="ttname"><a href="group__featureArray__group.html#gae638b572d3bef4c29ebe29531b58354c">dwFeatureHistoryArray_create</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeatureHistoryArray_create(dwFeatureHistoryArray *featureHistoryArray, const uint32_t maxFeatureCount, const uint32_t maxHistoryCapacity, const dwMemoryType memoryType, dwContextHandle_t context)</div><div class="ttdoc">Creates and initializes a feature history array.</div></div>
</div><!-- fragment --><p >The application can also create <code><a class="el" href="group__featureArray__group.html#structdwFeatureHistoryArray" title="Holds pointers to the data exposed by a feature2d list.">dwFeatureHistoryArray</a></code> on pinned memory, it only needs to change <code><a class="el" href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023a9729e85945ecb1a598a445897aeb545c" title="pageable CPU memory">DW_MEMORY_TYPE_CPU</a></code> to <code><a class="el" href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023ad5a261f6101e4062e1d40a04a406f127" title="pinned memory">DW_MEMORY_TYPE_PINNED</a></code> during creation.</p>
<p >Like <code>dwFeatureListHandle_t</code>, there are also <code>reset()</code> and <code>destroy()</code> APIs. <code><a class="el" href="group__featureArray__group.html#structdwFeatureHistoryArray" title="Holds pointers to the data exposed by a feature2d list.">dwFeatureHistoryArray</a></code> must be destroyed before the application exits. </p><div class="fragment"><div class="line"><span class="comment">// New code</span></div>
<div class="line"><a class="code hl_function" href="group__featureArray__group.html#ga212e03d3e504937744c141c0951d8bf5">dwFeatureHistoryArray_destroy</a>(featureHistoryCPU);</div>
<div class="line"><a class="code hl_function" href="group__featureArray__group.html#ga212e03d3e504937744c141c0951d8bf5">dwFeatureHistoryArray_destroy</a>(featureHistoryGPU);</div>
<div class="ttc" id="agroup__featureArray__group_html_ga212e03d3e504937744c141c0951d8bf5"><div class="ttname"><a href="group__featureArray__group.html#ga212e03d3e504937744c141c0951d8bf5">dwFeatureHistoryArray_destroy</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeatureHistoryArray_destroy(dwFeatureHistoryArray featureHistoryArray)</div><div class="ttdoc">Destroys the featureHistoryArray and frees any memory created by dwFeatureHistoryArray_create().</div></div>
</div><!-- fragment --><h3>Get particular <code>timeIdx</code> slice from <code><a class="el" href="group__featureArray__group.html#structdwFeatureHistoryArray" title="Holds pointers to the data exposed by a feature2d list.">dwFeatureHistoryArray</a></code></h3>
<p >Similar to <code>dwFeatureListPointers::locationHistory</code>, <code><a class="el" href="group__featureArray__group.html#a90e33ce0c91eb6aa5f14ad844cc857f9" title="Location history of feature points.">dwFeatureHistoryArray::locationHistory</a></code> stores <code>historyCapacity</code> time period of <code>maxFeatureCount</code> features. To get a particular <code>feature[i]</code> for <code>timeIdx</code>, it used to be: </p><div class="fragment"><div class="line"><span class="comment">// Old code</span></div>
<div class="line">uint32_t currentTimeIdx;</div>
<div class="line">dwFeatureList_getCurrentTimeIdx(&amp;currentTimeIdx, featureList);</div>
<div class="line"> </div>
<div class="line">uint32_t histIdx = (currentTimeIdx + timeIdx) % historyCapacity;</div>
<div class="line"><a class="code hl_struct" href="MatrixTypes_8h.html#structdwVector2f">dwVector2f</a>* pLocation = featureDataCPU.locationHistory + histIdx * maxFeatureCount;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// get the particular feature[i]</span></div>
<div class="line">pLocation[i]...</div>
<div class="ttc" id="aMatrixTypes_8h_html_structdwVector2f"><div class="ttname"><a href="MatrixTypes_8h.html#structdwVector2f">dwVector2f</a></div><div class="ttdoc">Defines a two-element single-precision floating-point vector.</div><div class="ttdef"><b>Definition:</b> <a href="MatrixTypes_8h_source.html#l00048">MatrixTypes.h:49</a></div></div>
</div><!-- fragment --><p >The new <code>dw_imageprocessing</code> modules provides a <code><a class="el" href="group__featureArray__group.html#structdwFeatureArray">dwFeatureArray</a></code> struct that contains features for a single time slice, so there's no need to compute <code>histIdx</code> any more. </p><div class="fragment"><div class="line"><span class="comment">// New code</span></div>
<div class="line"><a class="code hl_struct" href="group__featureArray__group.html#structdwFeatureArray">dwFeatureArray</a> features;</div>
<div class="line"><a class="code hl_function" href="group__featureArray__group.html#ga37a28dca6e70635553798b0546b62b90">dwFeatureHistoryArray_get</a>(&amp;features, timeIdx, &amp;featureHistoryCPU);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// get the particular feature[i]</span></div>
<div class="line">features.<a class="code hl_variable" href="group__featureArray__group.html#a59fc81eeae867ff5044a82dd08705878">locations</a>[i]...</div>
<div class="ttc" id="agroup__featureArray__group_html_a59fc81eeae867ff5044a82dd08705878"><div class="ttname"><a href="group__featureArray__group.html#a59fc81eeae867ff5044a82dd08705878">dwFeatureArray::locations</a></div><div class="ttdeci">dwVector2f * locations</div><div class="ttdoc">Location of feature points.</div><div class="ttdef"><b>Definition:</b> <a href="FeatureList_8h_source.html#l00143">FeatureList.h:143</a></div></div>
<div class="ttc" id="agroup__featureArray__group_html_ga37a28dca6e70635553798b0546b62b90"><div class="ttname"><a href="group__featureArray__group.html#ga37a28dca6e70635553798b0546b62b90">dwFeatureHistoryArray_get</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeatureHistoryArray_get(dwFeatureArray *featureArray, const uint32_t historyIdx, dwFeatureHistoryArray const *featureHistoryArray)</div><div class="ttdoc">Get the feature snapshot(arraySize = maxFeatureCount) historyIdx-th frame earlier.</div></div>
<div class="ttc" id="agroup__featureArray__group_html_structdwFeatureArray"><div class="ttname"><a href="group__featureArray__group.html#structdwFeatureArray">dwFeatureArray</a></div><div class="ttdef"><b>Definition:</b> <a href="FeatureList_8h_source.html#l00136">FeatureList.h:137</a></div></div>
</div><!-- fragment --><p >It can also get the most recent (top-most) time slice, or the slice that is 1 frame earlier than the top-most. </p><div class="fragment"><div class="line"><span class="comment">// New code</span></div>
<div class="line"><a class="code hl_struct" href="group__featureArray__group.html#structdwFeatureArray">dwFeatureArray</a> currentFeatures, previousFeatures;</div>
<div class="line"><a class="code hl_function" href="group__featureArray__group.html#gaf337f7663e3198d67440dc265d359e9c">dwFeatureHistoryArray_getCurrent</a>(&amp;currentFeatures, &amp;featureHistoryCPU);</div>
<div class="line"><a class="code hl_function" href="group__featureArray__group.html#gaff6250de8fc450cba4d14f7d5a80d2d3">dwFeatureHistoryArray_getPrevious</a>(&amp;previousFeatures, &amp;featureHistoryCPU);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// get the particular feature[i]</span></div>
<div class="line">currentFeatures.<a class="code hl_variable" href="group__featureArray__group.html#a59fc81eeae867ff5044a82dd08705878">locations</a>[i]...</div>
<div class="line">previousFeatures.locations[i]...</div>
<div class="ttc" id="agroup__featureArray__group_html_gaf337f7663e3198d67440dc265d359e9c"><div class="ttname"><a href="group__featureArray__group.html#gaf337f7663e3198d67440dc265d359e9c">dwFeatureHistoryArray_getCurrent</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeatureHistoryArray_getCurrent(dwFeatureArray *featureArray, dwFeatureHistoryArray const *featureHistoryArray)</div><div class="ttdoc">Get the latest feature snapshot(arraySize = maxFeatureCount) from history.</div></div>
<div class="ttc" id="agroup__featureArray__group_html_gaff6250de8fc450cba4d14f7d5a80d2d3"><div class="ttname"><a href="group__featureArray__group.html#gaff6250de8fc450cba4d14f7d5a80d2d3">dwFeatureHistoryArray_getPrevious</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeatureHistoryArray_getPrevious(dwFeatureArray *featureArray, dwFeatureHistoryArray const *featureHistoryArray)</div><div class="ttdoc">Get the feature snapshot(arraySize = maxFeatureCount) 1 frame previous to current time.</div></div>
</div><!-- fragment --><p ><code><a class="el" href="group__featureArray__group.html#structdwFeatureArray">dwFeatureArray</a></code> acquired by <code>dwFeatureHistoryArray_getXXX</code> APIs don't need to be destroyed as they are only shallow copies. Resources are automatically freed when the corresponding <code><a class="el" href="group__featureArray__group.html#structdwFeatureHistoryArray" title="Holds pointers to the data exposed by a feature2d list.">dwFeatureHistoryArray</a></code> is destroyed. However, <code><a class="el" href="group__featureArray__group.html#structdwFeatureArray">dwFeatureArray</a></code> also provides creation APIs, where the usage is very similar to <code><a class="el" href="group__featureArray__group.html#structdwFeatureHistoryArray" title="Holds pointers to the data exposed by a feature2d list.">dwFeatureHistoryArray</a></code>: </p><div class="fragment"><div class="line"><span class="comment">// New code</span></div>
<div class="line"><a class="code hl_function" href="group__featureArray__group.html#gacea0d10ba2271450e4ad00061f3589ac">dwFeatureArray_create</a>(&amp;featureCPU, maxFeatureCount, <a class="code hl_enumvalue" href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023a9729e85945ecb1a598a445897aeb545c">DW_MEMORY_TYPE_CPU</a>, context);</div>
<div class="line"><a class="code hl_function" href="group__featureArray__group.html#gacea0d10ba2271450e4ad00061f3589ac">dwFeatureArray_create</a>(&amp;featureGPU, maxFeatureCount, <a class="code hl_enumvalue" href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023ac9656206fa925a04a1a14bdfa5ab6a40">DW_MEMORY_TYPE_CUDA</a>, context);</div>
<div class="ttc" id="agroup__featureArray__group_html_gacea0d10ba2271450e4ad00061f3589ac"><div class="ttname"><a href="group__featureArray__group.html#gacea0d10ba2271450e4ad00061f3589ac">dwFeatureArray_create</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeatureArray_create(dwFeatureArray *featureArray, const uint32_t maxFeatureCount, const dwMemoryType memoryType, dwContextHandle_t context)</div><div class="ttdoc">Creates and initializes a feature array.</div></div>
</div><!-- fragment --><p ><code><a class="el" href="group__featureArray__group.html#structdwFeatureArray">dwFeatureArray</a></code> created by <code><a class="el" href="group__featureArray__group.html#gacea0d10ba2271450e4ad00061f3589ac" title="Creates and initializes a feature array.">dwFeatureArray_create()</a></code> APIs must be destroyed by <code><a class="el" href="group__featureArray__group.html#gaad6d20a82ac080c06684ff69553cadab" title="Destroys the featureArray and frees any memory created by dwFeatureArray_create().">dwFeatureArray_destroy()</a></code> before the application exits. Similarly, there is the <code><a class="el" href="group__featureArray__group.html#ga4afa68d015838f5d0017df22ec0b4a79" title="Deep copy all contents from srcFeatures to dstFeatures.">dwFeatureArray_copyAsync()</a></code> API to copy data between two feature array objects.</p>
<h3>Port <code>dwFeatureTrackerHandle_t</code> to <code>dwFeature2DDetectorHandle_t</code> and <code>dwFeature2DTrackerHandle_t</code></h3>
<h4>Harris corner detector handle <code>dwFeature2DDetectorHandle_t</code></h4>
<p >New imageprocessing module splits the Harris corner detector from <code>dwFeatureTrackerHandle_t</code>. The new Harris detector handle is <code><a class="el" href="group__featureDetector__group.html#gade5610f3024646076d39cc35e0a70e65" title="Handle representing a feature detector.">dwFeature2DDetectorHandle_t</a></code>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Old name   </th><th class="markdownTableHeadNone">New name    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureTracker_initialize()   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#gad15de8e32fc68dafe3f3cf824d6456c4" title="Creates and initializes a feature Detector.">dwFeature2DDetector_initialize()</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureTracker_initDefaultParams()   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#gac222b04a04af254513aaf9406c47498c" title="Initializes dwFeature2DDetector parameters with default values.">dwFeature2DDetector_initDefaultParams()</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureTracker_reset()   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#gaad07e07b2c2350c76e2e3d146d9b7269" title="Resets a feature Detector.">dwFeature2DDetector_reset()</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureTracker_release()   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#ga87fe2e9d78515bab9645984955a023a4" title="Releases the feature Detector.">dwFeature2DDetector_release()</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureTracker_setMask()   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#ga9a3a9e2a56ba59bc2848db7070212fa8" title="Sets a mask to ignore areas of the image.">dwFeature2DDetector_setMask()</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureTracker_detectNewFeatures()   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#ga1edee131954d23a5952406c20f509ce0" title="Detects new features and append them after old tracked features.">dwFeature2DDetector_detectFromPyramid()</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#ga85b864b1a1895f612d99c6870a1f9251" title="Detects new features and append them after old tracked features.">dwFeature2DDetector_detectFromImage()</a>   </td></tr>
</table>
<p >The new <code><a class="el" href="group__featureDetector__group.html#structdwFeature2DDetectorConfig" title="Holds configuration parameters for a feature detector.">dwFeature2DDetectorConfig</a></code> parameter not only covers all settings from the old <code>dwFeatureTrackerConfig</code> parameter, it also provides more flexible settings.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Old dwFeatureTrackerConfig   </th><th class="markdownTableHeadNone">New <a class="el" href="group__featureDetector__group.html#structdwFeature2DDetectorConfig" title="Holds configuration parameters for a feature detector.">dwFeature2DDetectorConfig</a>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone">type    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureTrackerConfig::imageWidth   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#a8da7f953cbb56099235517259933eaf7" title="Width of the images that the Detector runs on.">dwFeature2DDetectorConfig::imageWidth</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureTrackerConfig::imageHeight   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#a3364ab124887babb5dbbb7ccbbd71a65" title="Height of the images that the Detector runs on.">dwFeature2DDetectorConfig::imageHeight</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureTrackerConfig::maxFeatureCount   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#a6d3c69e22a715afdd65194926bcb56f4" title="Upper bound on number of features handled.">dwFeature2DDetectorConfig::maxFeatureCount</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#afb99e027e42fa7f0aecbc82c0e348a96" title="Weigting K of the harris corner score defined as det(M) - K * trace(M) * trace(M),...">dwFeature2DDetectorConfig::harrisK</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureTrackerConfig::cellSize   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#a7ee12328dc7741a0e631e7d693a80f48" title="Cell size in pixel to split the image into cells.">dwFeature2DDetectorConfig::cellSize</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureTrackerConfig::detectorScoreThreshold   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#afc0d733db5ae20538408c34ffb52a560" title="Threshold to filter out low latency points.">dwFeature2DDetectorConfig::scoreThreshold</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureTrackerConfig::detectorDetailThreshold   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#afb93684f9795edd82120c22fa952bc0e" title="for DW_FEATURE2D_DETECTOR_TYPE_STD only features in the cell that have scores higher than this value ...">dwFeature2DDetectorConfig::detailThreshold</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureTrackerConfig::numEvenDistributionPerCell   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#adb45e3b28964ec464e75382b00f51495" title="for DW_FEATURE2D_DETECTOR_TYPE_STD only Number of features to be appended after high frequency points...">dwFeature2DDetectorConfig::numEvenDistributionPerCell</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#ace01938837fbce1ff6d5e77ff2ca0dec" title="for DW_FEATURE2D_DETECTOR_TYPE_EX only STD detector always detects on level 0 pyramid image.">dwFeature2DDetectorConfig::detectionLevel</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#a64688ca27570054e710e6977b9542f01" title="for DW_FEATURE2D_DETECTOR_TYPE_EX only STD detector use fixed harrisRadius = 1.">dwFeature2DDetectorConfig::harrisRadius</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#ab60211835741fec0b3c43bb645c55847" title="for DW_FEATURE2D_DETECTOR_TYPE_EX and DW_FEATURE2D_DETECTOR_TYPE_FAST9 STD detector use fixed NMSRadi...">dwFeature2DDetectorConfig::NMSRadius</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#ab20a5a35d4d2d69aa384a0684fef338a" title="for DW_FEATURE2D_DETECTOR_TYPE_EX only STD detector always output UNIFORM distribution.">dwFeature2DDetectorConfig::maskType</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__featureDetector__group.html#a6353cf7e974fc0c73047870ba108ffae" title="for DW_FEATURE2D_DETECTOR_TYPE_EX only Switch to use mask adjusment">dwFeature2DDetectorConfig::isMaskAdjustmentEnabled</a>   </td></tr>
</table>
<p >Example of initializing a detector with the old code: </p><div class="fragment"><div class="line"><span class="comment">// Old code</span></div>
<div class="line"><span class="comment">// Detector and Tracker share the same dwFeatureTrackerHandle_t</span></div>
<div class="line">dwFeatureTrackerConfig trackerConfig{};</div>
<div class="line">dwFeatureTracker_initDefaultParams(&amp;trackerConfig);</div>
<div class="line">trackerConfig.imageWidth                 = imageWidth;</div>
<div class="line">trackerConfig.imageHeight                = imageHeight;</div>
<div class="line">trackerConfig.maxFeatureCount            = maxFeatureCount;</div>
<div class="line">trackerConfig.cellSize                   = cellSize;</div>
<div class="line">trackerConfig.detectorScoreThreshold     = scoreThreshold;</div>
<div class="line">trackerConfig.detectorDetailThreshold    = detailThreshold;</div>
<div class="line">trackerConfig.numEvenDistributionPerCell = numEvenDistributionPerCell;</div>
<div class="line"> </div>
<div class="line">dwFeatureTracker_initialize(&amp;tracker, &amp;trackerConfig, 0, context);</div>
</div><!-- fragment --><p >Example of initializing a detector with the new code: </p><div class="fragment"><div class="line"><span class="comment">// New code</span></div>
<div class="line"><a class="code hl_struct" href="group__featureDetector__group.html#structdwFeature2DDetectorConfig">dwFeature2DDetectorConfig</a> detectorConfig = {};</div>
<div class="line"><a class="code hl_function" href="group__featureDetector__group.html#gac222b04a04af254513aaf9406c47498c">dwFeature2DDetector_initDefaultParams</a>(&amp;detectorConfig);</div>
<div class="line">detectorConfig.<a class="code hl_variable" href="group__featureDetector__group.html#a8da7f953cbb56099235517259933eaf7">imageWidth</a>                 = imageWidth;</div>
<div class="line">detectorConfig.<a class="code hl_variable" href="group__featureDetector__group.html#a3364ab124887babb5dbbb7ccbbd71a65">imageHeight</a>                = imageHeight;</div>
<div class="line">detectorConfig.<a class="code hl_variable" href="group__featureDetector__group.html#a6d3c69e22a715afdd65194926bcb56f4">maxFeatureCount</a>            = maxFeatureCount;</div>
<div class="line">detectorConfig.<a class="code hl_variable" href="group__featureDetector__group.html#a7ee12328dc7741a0e631e7d693a80f48">cellSize</a>                   = cellSize;</div>
<div class="line">detectorConfig.<a class="code hl_variable" href="group__featureDetector__group.html#afc0d733db5ae20538408c34ffb52a560">scoreThreshold</a>             = scoreThreshold;</div>
<div class="line">detectorConfig.<a class="code hl_variable" href="group__featureDetector__group.html#afb93684f9795edd82120c22fa952bc0e">detailThreshold</a>            = detailThreshold;</div>
<div class="line">detectorConfig.<a class="code hl_variable" href="group__featureDetector__group.html#adb45e3b28964ec464e75382b00f51495">numEvenDistributionPerCell</a> = numEvenDistributionPerCell;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__featureDetector__group.html#gad15de8e32fc68dafe3f3cf824d6456c4">dwFeature2DDetector_initialize</a>(&amp;detector, &amp;detectorConfig, 0, context);</div>
<div class="ttc" id="agroup__featureDetector__group_html_a3364ab124887babb5dbbb7ccbbd71a65"><div class="ttname"><a href="group__featureDetector__group.html#a3364ab124887babb5dbbb7ccbbd71a65">dwFeature2DDetectorConfig::imageHeight</a></div><div class="ttdeci">uint32_t imageHeight</div><div class="ttdoc">Height of the images that the Detector runs on.</div><div class="ttdef"><b>Definition:</b> <a href="featuredetector_2FeatureDetector_8h_source.html#l00112">FeatureDetector.h:112</a></div></div>
<div class="ttc" id="agroup__featureDetector__group_html_a6d3c69e22a715afdd65194926bcb56f4"><div class="ttname"><a href="group__featureDetector__group.html#a6d3c69e22a715afdd65194926bcb56f4">dwFeature2DDetectorConfig::maxFeatureCount</a></div><div class="ttdeci">uint32_t maxFeatureCount</div><div class="ttdoc">Upper bound on number of features handled.</div><div class="ttdef"><b>Definition:</b> <a href="featuredetector_2FeatureDetector_8h_source.html#l00117">FeatureDetector.h:117</a></div></div>
<div class="ttc" id="agroup__featureDetector__group_html_a7ee12328dc7741a0e631e7d693a80f48"><div class="ttname"><a href="group__featureDetector__group.html#a7ee12328dc7741a0e631e7d693a80f48">dwFeature2DDetectorConfig::cellSize</a></div><div class="ttdeci">uint32_t cellSize</div><div class="ttdoc">Cell size in pixel to split the image into cells.</div><div class="ttdef"><b>Definition:</b> <a href="featuredetector_2FeatureDetector_8h_source.html#l00126">FeatureDetector.h:126</a></div></div>
<div class="ttc" id="agroup__featureDetector__group_html_a8da7f953cbb56099235517259933eaf7"><div class="ttname"><a href="group__featureDetector__group.html#a8da7f953cbb56099235517259933eaf7">dwFeature2DDetectorConfig::imageWidth</a></div><div class="ttdeci">uint32_t imageWidth</div><div class="ttdoc">Width of the images that the Detector runs on.</div><div class="ttdef"><b>Definition:</b> <a href="featuredetector_2FeatureDetector_8h_source.html#l00108">FeatureDetector.h:108</a></div></div>
<div class="ttc" id="agroup__featureDetector__group_html_adb45e3b28964ec464e75382b00f51495"><div class="ttname"><a href="group__featureDetector__group.html#adb45e3b28964ec464e75382b00f51495">dwFeature2DDetectorConfig::numEvenDistributionPerCell</a></div><div class="ttdeci">uint32_t numEvenDistributionPerCell</div><div class="ttdoc">for DW_FEATURE2D_DETECTOR_TYPE_STD only Number of features to be appended after high frequency points...</div><div class="ttdef"><b>Definition:</b> <a href="featuredetector_2FeatureDetector_8h_source.html#l00162">FeatureDetector.h:162</a></div></div>
<div class="ttc" id="agroup__featureDetector__group_html_afb93684f9795edd82120c22fa952bc0e"><div class="ttname"><a href="group__featureDetector__group.html#afb93684f9795edd82120c22fa952bc0e">dwFeature2DDetectorConfig::detailThreshold</a></div><div class="ttdeci">float32_t detailThreshold</div><div class="ttdoc">for DW_FEATURE2D_DETECTOR_TYPE_STD only features in the cell that have scores higher than this value ...</div><div class="ttdef"><b>Definition:</b> <a href="featuredetector_2FeatureDetector_8h_source.html#l00149">FeatureDetector.h:149</a></div></div>
<div class="ttc" id="agroup__featureDetector__group_html_afc0d733db5ae20538408c34ffb52a560"><div class="ttname"><a href="group__featureDetector__group.html#afc0d733db5ae20538408c34ffb52a560">dwFeature2DDetectorConfig::scoreThreshold</a></div><div class="ttdeci">float32_t scoreThreshold</div><div class="ttdoc">Threshold to filter out low latency points.</div><div class="ttdef"><b>Definition:</b> <a href="featuredetector_2FeatureDetector_8h_source.html#l00142">FeatureDetector.h:142</a></div></div>
<div class="ttc" id="agroup__featureDetector__group_html_gac222b04a04af254513aaf9406c47498c"><div class="ttname"><a href="group__featureDetector__group.html#gac222b04a04af254513aaf9406c47498c">dwFeature2DDetector_initDefaultParams</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeature2DDetector_initDefaultParams(dwFeature2DDetectorConfig *params)</div><div class="ttdoc">Initializes dwFeature2DDetector parameters with default values.</div></div>
<div class="ttc" id="agroup__featureDetector__group_html_gad15de8e32fc68dafe3f3cf824d6456c4"><div class="ttname"><a href="group__featureDetector__group.html#gad15de8e32fc68dafe3f3cf824d6456c4">dwFeature2DDetector_initialize</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeature2DDetector_initialize(dwFeature2DDetectorHandle_t *obj, const dwFeature2DDetectorConfig *config, cudaStream_t cudaStream, dwContextHandle_t context)</div><div class="ttdoc">Creates and initializes a feature Detector.</div></div>
<div class="ttc" id="agroup__featureDetector__group_html_structdwFeature2DDetectorConfig"><div class="ttname"><a href="group__featureDetector__group.html#structdwFeature2DDetectorConfig">dwFeature2DDetectorConfig</a></div><div class="ttdoc">Holds configuration parameters for a feature detector.</div><div class="ttdef"><b>Definition:</b> <a href="featuredetector_2FeatureDetector_8h_source.html#l00101">FeatureDetector.h:102</a></div></div>
</div><!-- fragment --><h4>LK tracker handle <code>dwFeature2DTrackerHandle_t</code></h4>
<p >The new imageprocessing module splits LK tracker from <code>dwFeatureTrackerHandle_t</code>. The new LK tracker handle is <code><a class="el" href="group__feature2dtracker__group.html#ga5e6db17dfac364bca1a8fdc475257c68" title="Handle representing a feature tracker.">dwFeature2DTrackerHandle_t</a></code>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Old name   </th><th class="markdownTableHeadNone">New name    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureTracker_initialize()   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#ga338a09308a4534aa08482159895b7762" title="Creates and initializes a feature tracker.">dwFeature2DTracker_initialize()</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureTracker_initDefaultParams()   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#gacc7433d0e649cb138c356f9ce005fccc" title="Initializes dwFeature2DTracker parameters with default values.">dwFeature2DTracker_initDefaultParams()</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureTracker_reset()   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#ga9637b4335c4b8ed1b11e469642f3f463" title="Resets a feature tracker.">dwFeature2DTracker_reset()</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureTracker_release()   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#gaac51ce50bf476989e7d3400a6a2b6345" title="Releases the feature tracker.">dwFeature2DTracker_release()</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureTracker_trackFeatures()   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#gaad84b8d7ede7ae10a20222c061021079" title="Tracks features and store the tracked results to predictedFeatures between the previous and current i...">dwFeature2DTracker_trackFeatures()</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone">dwFeature2DTracker_getNewToOldMap()   </td></tr>
</table>
<p >The new <code><a class="el" href="group__feature2dtracker__group.html#structdwFeature2DTrackerConfig" title="Holds configuration parameters for a feature tracker.">dwFeature2DTrackerConfig</a></code> parameter not only covers all settings from the the old <code>dwFeatureTrackerConfig</code> parameter, it also provides more flexible settings.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Old dwFeatureTrackerConfig   </th><th class="markdownTableHeadNone">New <a class="el" href="group__feature2dtracker__group.html#structdwFeature2DTrackerConfig" title="Holds configuration parameters for a feature tracker.">dwFeature2DTrackerConfig</a>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#a72a9376581de70c9c8e383abc1ce2710" title="Tracking Algorithm defined by dwFeature2DTrackerAlgorithm.">dwFeature2DTrackerConfig::algorithm</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#a1b6c02a778efde9a85991497820a6c52" title="Type of detector that connects to the tracker, should be the same value as dwFeature2DDetectorConfig:...">dwFeature2DTrackerConfig::detectorType</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone">dwFeature2DTrackerConfig::isOutputCompact    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureTrackerConfig::imageWidth   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#adb9faa4d6ee021f2e31dc586a64d8109" title="Width of the images that the tracker runs on.">dwFeature2DTrackerConfig::imageWidth</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureTrackerConfig::imageHeight   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#a99501e2875ea7cf32865ba59cf313b31" title="Height of the images that the tracker runs on.">dwFeature2DTrackerConfig::imageHeight</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureTrackerConfig::maxFeatureCount   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#a618e6c6f43309778ed89c2cceb40791d" title="Upper bound on number of features handled.">dwFeature2DTrackerConfig::maxFeatureCount</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#a24e90dac0edb53a34f50d5efe09c903d" title="Upper bound of history in feature history array.">dwFeature2DTrackerConfig::historyCapacity</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwFeatureTrackerConfig::windowSizeLK   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#a8c9a4082587e128c9a6945c599755b03" title="Window size used in the KLT tracker.">dwFeature2DTrackerConfig::windowSizeLK</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwFeatureTrackerConfig::iterationsLK   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#a9cdcac32eb667c01512b677201eac509" title="Upper bound on number of 2-DOF translation-only KLT iterations per level.">dwFeature2DTrackerConfig::numIterTranslationOnly</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#a1c869e13f6fcf89cfba38d782c9636fe" title="Upper bound on number of 3-DOF translation+scaling KLT iterations per level.">dwFeature2DTrackerConfig::numIterScaling</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#a1736fb15b52d23d38efabd67272bc36f" title="Number of levels in pyramid that will use translation-only KLT tracking, level [maxPyramidLevel - 1,...">dwFeature2DTrackerConfig::numLevelTranslationOnly</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#ab7608cb9e21f4b43d882546906c20717" title="The maximum allowed scale change for the tracked points across consecutive frames.">dwFeature2DTrackerConfig::maxScaleChange</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#a05e67945cf22bb9512b07c640a79d2ab" title="Features will be killed if the Cross Correlation Score is less than this threshold during tracking.">dwFeature2DTrackerConfig::nccKillThreshold</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__feature2dtracker__group.html#a28fa8ef5b044e3255c3e6a144e999ab9" title="Feature template will be updated if the Cross Correlation Score is less than this threshold during tr...">dwFeature2DTrackerConfig::nccUpdateThreshold</a>   </td></tr>
</table>
<p >Example of initializing a tracker with the old code: </p><div class="fragment"><div class="line"><span class="comment">// Old code</span></div>
<div class="line"><span class="comment">// Detector and Tracker share the same dwFeatureTrackerHandle_t</span></div>
<div class="line">dwFeatureTrackerConfig trackerConfig{};</div>
<div class="line">dwFeatureTracker_initDefaultParams(&amp;trackerConfig);</div>
<div class="line">trackerConfig.imageWidth      = imageWidth;</div>
<div class="line">trackerConfig.imageHeight     = imageHeight;</div>
<div class="line">trackerConfig.maxFeatureCount = maxFeatureCount;</div>
<div class="line">trackerConfig.windowSizeLK    = windowSize;</div>
<div class="line">trackerConfig.iterationsLK    = numIterTranslation;</div>
<div class="line"> </div>
<div class="line">dwFeatureTracker_initialize(&amp;tracker, &amp;trackerConfig, 0, context);</div>
</div><!-- fragment --><p >Example of initializing a tracker with the new code: </p><div class="fragment"><div class="line"><span class="comment">// New code</span></div>
<div class="line"><a class="code hl_struct" href="group__feature2dtracker__group.html#structdwFeature2DTrackerConfig">dwFeature2DTrackerConfig</a> trackerConfig = {};</div>
<div class="line"><a class="code hl_function" href="group__feature2dtracker__group.html#gacc7433d0e649cb138c356f9ce005fccc">dwFeature2DTracker_initDefaultParams</a>(&amp;trackerConfig);</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#a1b6c02a778efde9a85991497820a6c52">detectorType</a>            = detectorConfig.<a class="code hl_variable" href="group__featureDetector__group.html#ad421d1ad7e19cb03e04ce28b541da796">type</a>;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#a618e6c6f43309778ed89c2cceb40791d">maxFeatureCount</a>         = maxFeatureCount;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#a24e90dac0edb53a34f50d5efe09c903d">historyCapacity</a>         = historyCapacity;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#adb9faa4d6ee021f2e31dc586a64d8109">imageWidth</a>              = imageWidth;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#a99501e2875ea7cf32865ba59cf313b31">imageHeight</a>             = imageHeight;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#a8c9a4082587e128c9a6945c599755b03">windowSizeLK</a>            = windowSize;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#a9cdcac32eb667c01512b677201eac509">numIterTranslationOnly</a>  = numIterTranslation;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__feature2dtracker__group.html#ga338a09308a4534aa08482159895b7762">dwFeature2DTracker_initialize</a>(&amp;tracker, &amp;trackerConfig, 0, context);</div>
<div class="ttc" id="agroup__feature2dtracker__group_html_a1b6c02a778efde9a85991497820a6c52"><div class="ttname"><a href="group__feature2dtracker__group.html#a1b6c02a778efde9a85991497820a6c52">dwFeature2DTrackerConfig::detectorType</a></div><div class="ttdeci">dwFeature2DDetectorType detectorType</div><div class="ttdoc">Type of detector that connects to the tracker, should be the same value as dwFeature2DDetectorConfig:...</div><div class="ttdef"><b>Definition:</b> <a href="FeatureTracker_8h_source.html#l00098">FeatureTracker.h:98</a></div></div>
<div class="ttc" id="agroup__feature2dtracker__group_html_a24e90dac0edb53a34f50d5efe09c903d"><div class="ttname"><a href="group__feature2dtracker__group.html#a24e90dac0edb53a34f50d5efe09c903d">dwFeature2DTrackerConfig::historyCapacity</a></div><div class="ttdeci">uint32_t historyCapacity</div><div class="ttdoc">Upper bound of history in feature history array.</div><div class="ttdef"><b>Definition:</b> <a href="FeatureTracker_8h_source.html#l00104">FeatureTracker.h:104</a></div></div>
<div class="ttc" id="agroup__feature2dtracker__group_html_a618e6c6f43309778ed89c2cceb40791d"><div class="ttname"><a href="group__feature2dtracker__group.html#a618e6c6f43309778ed89c2cceb40791d">dwFeature2DTrackerConfig::maxFeatureCount</a></div><div class="ttdeci">uint32_t maxFeatureCount</div><div class="ttdoc">Upper bound on number of features handled.</div><div class="ttdef"><b>Definition:</b> <a href="FeatureTracker_8h_source.html#l00101">FeatureTracker.h:101</a></div></div>
<div class="ttc" id="agroup__feature2dtracker__group_html_a8c9a4082587e128c9a6945c599755b03"><div class="ttname"><a href="group__feature2dtracker__group.html#a8c9a4082587e128c9a6945c599755b03">dwFeature2DTrackerConfig::windowSizeLK</a></div><div class="ttdeci">uint32_t windowSizeLK</div><div class="ttdoc">Window size used in the KLT tracker.</div><div class="ttdef"><b>Definition:</b> <a href="FeatureTracker_8h_source.html#l00126">FeatureTracker.h:126</a></div></div>
<div class="ttc" id="agroup__feature2dtracker__group_html_a99501e2875ea7cf32865ba59cf313b31"><div class="ttname"><a href="group__feature2dtracker__group.html#a99501e2875ea7cf32865ba59cf313b31">dwFeature2DTrackerConfig::imageHeight</a></div><div class="ttdeci">uint32_t imageHeight</div><div class="ttdoc">Height of the images that the tracker runs on.</div><div class="ttdef"><b>Definition:</b> <a href="FeatureTracker_8h_source.html#l00116">FeatureTracker.h:116</a></div></div>
<div class="ttc" id="agroup__feature2dtracker__group_html_a9cdcac32eb667c01512b677201eac509"><div class="ttname"><a href="group__feature2dtracker__group.html#a9cdcac32eb667c01512b677201eac509">dwFeature2DTrackerConfig::numIterTranslationOnly</a></div><div class="ttdeci">uint32_t numIterTranslationOnly</div><div class="ttdoc">Upper bound on number of 2-DOF translation-only KLT iterations per level.</div><div class="ttdef"><b>Definition:</b> <a href="FeatureTracker_8h_source.html#l00141">FeatureTracker.h:141</a></div></div>
<div class="ttc" id="agroup__feature2dtracker__group_html_adb9faa4d6ee021f2e31dc586a64d8109"><div class="ttname"><a href="group__feature2dtracker__group.html#adb9faa4d6ee021f2e31dc586a64d8109">dwFeature2DTrackerConfig::imageWidth</a></div><div class="ttdeci">uint32_t imageWidth</div><div class="ttdoc">Width of the images that the tracker runs on.</div><div class="ttdef"><b>Definition:</b> <a href="FeatureTracker_8h_source.html#l00113">FeatureTracker.h:113</a></div></div>
<div class="ttc" id="agroup__feature2dtracker__group_html_ga338a09308a4534aa08482159895b7762"><div class="ttname"><a href="group__feature2dtracker__group.html#ga338a09308a4534aa08482159895b7762">dwFeature2DTracker_initialize</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeature2DTracker_initialize(dwFeature2DTrackerHandle_t *obj, const dwFeature2DTrackerConfig *config, cudaStream_t cudaStream, dwContextHandle_t context)</div><div class="ttdoc">Creates and initializes a feature tracker.</div></div>
<div class="ttc" id="agroup__feature2dtracker__group_html_gacc7433d0e649cb138c356f9ce005fccc"><div class="ttname"><a href="group__feature2dtracker__group.html#gacc7433d0e649cb138c356f9ce005fccc">dwFeature2DTracker_initDefaultParams</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeature2DTracker_initDefaultParams(dwFeature2DTrackerConfig *params)</div><div class="ttdoc">Initializes dwFeature2DTracker parameters with default values.</div></div>
<div class="ttc" id="agroup__feature2dtracker__group_html_structdwFeature2DTrackerConfig"><div class="ttname"><a href="group__feature2dtracker__group.html#structdwFeature2DTrackerConfig">dwFeature2DTrackerConfig</a></div><div class="ttdoc">Holds configuration parameters for a feature tracker.</div><div class="ttdef"><b>Definition:</b> <a href="FeatureTracker_8h_source.html#l00091">FeatureTracker.h:92</a></div></div>
<div class="ttc" id="agroup__featureDetector__group_html_ad421d1ad7e19cb03e04ce28b541da796"><div class="ttname"><a href="group__featureDetector__group.html#ad421d1ad7e19cb03e04ce28b541da796">dwFeature2DDetectorConfig::type</a></div><div class="ttdeci">dwFeature2DDetectorType type</div><div class="ttdoc">Detecting algorithm defined by dwFeature2DDetectorType</div><div class="ttdef"><b>Definition:</b> <a href="featuredetector_2FeatureDetector_8h_source.html#l00104">FeatureDetector.h:104</a></div></div>
</div><!-- fragment --><h4>Use the new <code>imageprocessing</code> module to detect and track Harris corners</h4>
<p >Here's a complete example showing the pipeline with the old <code>dw_feature</code> APIs and new <code>dw_imageprocessing</code> APIs.</p>
<div class="fragment"><div class="line"><span class="comment">// Old dw_features code</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create feature list</span></div>
<div class="line">dwFeatureListHandle_t featureList;</div>
<div class="line">dwFeatureList_initialize(&amp;featureList, maxFeatureCount, historyCapacity, width, height, 0, context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// create pyramid</span></div>
<div class="line">dwPyramidHandle_t pyramidCurrent, pyramidPrevious;</div>
<div class="line">dwPyramidConfig config{};</div>
<div class="line">config.width = width;</div>
<div class="line">config.height = height;</div>
<div class="line">config.levelCount = numLevel;</div>
<div class="line">config.dataType = <a class="code hl_enumvalue" href="group__core__types__group.html#ggaa47781681c93aac1f28bc9bef7b07960ab94112ec2a0a6a1958881319168f52a5">DW_TYPE_UINT8</a>;</div>
<div class="line">dwPyramid_initialize(&amp;pyramidCurrent, &amp;config, cudaStream, context);</div>
<div class="line">dwPyramid_initialize(&amp;pyramidPrevious, &amp;config, cudaStream, context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// create tracker and detector</span></div>
<div class="line">dwFeatureTrackerConfig trackerConfig{};</div>
<div class="line">dwFeatureTracker_initDefaultParams(&amp;trackerConfig);</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#adb9faa4d6ee021f2e31dc586a64d8109">imageWidth</a>                 = width;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#a99501e2875ea7cf32865ba59cf313b31">imageHeight</a>                = height;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#a618e6c6f43309778ed89c2cceb40791d">maxFeatureCount</a>            = maxFeatureCount;</div>
<div class="line">dwFeatureTracker_initialize(&amp;tracker, &amp;trackerConfig, cudaStream, context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Old dw_feature APIs requires additional CUDA buffers for compact.</span></div>
<div class="line">uint32_t *d_validCount, *d_validIndexes, *d_invalidCount, *d_invalidIndexes;</div>
<div class="line">cudaMalloc(&amp;d_validCount, <span class="keyword">sizeof</span>(uint32_t));</div>
<div class="line">cudaMalloc(&amp;d_validIndexes, <span class="keyword">sizeof</span>(uint32_t) * maxFeatureCount);</div>
<div class="line">cudaMalloc(&amp;d_invalidCount, <span class="keyword">sizeof</span>(uint32_t));</div>
<div class="line">cudaMalloc(&amp;d_invalidIndexes, <span class="keyword">sizeof</span>(uint32_t) * maxFeatureCount);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Assuming sensor provides single channel image as input</span></div>
<div class="line"><span class="keywordflow">while</span> (image = camera-&gt;getFrame())</div>
<div class="line">{</div>
<div class="line">    std::swap(pyramidCurrent, pyramidPrevious);</div>
<div class="line">    dwPyramid_build(&amp;image, pyramidCurrent);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Track</span></div>
<div class="line">    dwFeatureTracker_trackFeatures(featureList, pyramidPrevious, pyramidCurrent, <span class="keyword">nullptr</span>, tracker);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Apply proximity filters to make features uniformly distributed</span></div>
<div class="line">    dwFeatureList_proximityFilter(featureList);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Determine which features to throw away</span></div>
<div class="line">    dwFeatureList_selectValid(d_validCount, d_validIndexes,</div>
<div class="line">                              d_invalidCount, d_invalidIndexes, featureList);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Compact list</span></div>
<div class="line">    dwFeatureList_compact(featureList, d_validCount, d_validIndexes,</div>
<div class="line">                         d_invalidCount, d_invalidIndexes);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Detect</span></div>
<div class="line">    dwFeatureTracker_detectNewFeatures(featureList, pyramidCurrent, tracker);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// release resources</span></div>
<div class="line">dwFeatureTracker_release(tracker);</div>
<div class="line">dwPyramid_release(pyramidCurrent);</div>
<div class="line">dwPyramid_release(pyramidPrevious);</div>
<div class="line">dwFeatureList_release(featureList);</div>
<div class="line"> </div>
<div class="line">cudaFree(d_validCount);</div>
<div class="line">cudaFree(d_validIndexes);</div>
<div class="line">cudaFree(d_invalidCount);</div>
<div class="line">cudaFree(d_invalidIndexes);</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">// New dw_imageprocessing code</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// New dw_imageprocessing APIs requires a GPU dwFeatureArray as the output of Harris corner detector.</span></div>
<div class="line"><span class="comment">// It also requires a GPU dwFeatureHistoryArray as output of LK tracker.</span></div>
<div class="line"><a class="code hl_struct" href="group__featureArray__group.html#structdwFeatureArray">dwFeatureArray</a> featureDetectedGPU;</div>
<div class="line"><a class="code hl_function" href="group__featureArray__group.html#gacea0d10ba2271450e4ad00061f3589ac">dwFeatureArray_create</a>(&amp;featureDetectedGPU, maxFeatureCount, <a class="code hl_enumvalue" href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023ac9656206fa925a04a1a14bdfa5ab6a40">DW_MEMORY_TYPE_CUDA</a>, context);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="group__featureArray__group.html#structdwFeatureHistoryArray">dwFeatureHistoryArray</a> featureHistoryGPU;</div>
<div class="line"><a class="code hl_function" href="group__featureArray__group.html#gae638b572d3bef4c29ebe29531b58354c">dwFeatureHistoryArray_create</a>(&amp;featureHistoryGPU, maxFeatureCount, historyCapacity, <a class="code hl_enumvalue" href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023ac9656206fa925a04a1a14bdfa5ab6a40">DW_MEMORY_TYPE_CUDA</a>, context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create pyramid</span></div>
<div class="line">dwPyramidImage pyramidCurrent, pyramidPrevious;</div>
<div class="line">dwPyramid_create(&amp;pyramidCurrent, numLevel, width, height, <a class="code hl_enumvalue" href="group__core__types__group.html#ggaa47781681c93aac1f28bc9bef7b07960ab94112ec2a0a6a1958881319168f52a5">DW_TYPE_UINT8</a>, context);</div>
<div class="line">dwPyramid_create(&amp;pyramidPrevious, numLevel, width, height, <a class="code hl_enumvalue" href="group__core__types__group.html#ggaa47781681c93aac1f28bc9bef7b07960ab94112ec2a0a6a1958881319168f52a5">DW_TYPE_UINT8</a>, context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// create detector</span></div>
<div class="line"><a class="code hl_struct" href="group__featureDetector__group.html#structdwFeature2DDetectorConfig">dwFeature2DDetectorConfig</a> detectorConfig = {};</div>
<div class="line"><a class="code hl_function" href="group__featureDetector__group.html#gac222b04a04af254513aaf9406c47498c">dwFeature2DDetector_initDefaultParams</a>(&amp;detectorConfig);</div>
<div class="line">detectorConfig.<a class="code hl_variable" href="group__featureDetector__group.html#a8da7f953cbb56099235517259933eaf7">imageWidth</a>                 = imageWidth;</div>
<div class="line">detectorConfig.<a class="code hl_variable" href="group__featureDetector__group.html#a3364ab124887babb5dbbb7ccbbd71a65">imageHeight</a>                = imageHeight;</div>
<div class="line">detectorConfig.<a class="code hl_variable" href="group__featureDetector__group.html#a6d3c69e22a715afdd65194926bcb56f4">maxFeatureCount</a>            = maxFeatureCount;</div>
<div class="line"><a class="code hl_function" href="group__featureDetector__group.html#gad15de8e32fc68dafe3f3cf824d6456c4">dwFeature2DDetector_initialize</a>(&amp;detector, &amp;detectorConfig, cudaStream, context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// create tracker</span></div>
<div class="line"><a class="code hl_struct" href="group__feature2dtracker__group.html#structdwFeature2DTrackerConfig">dwFeature2DTrackerConfig</a> trackerConfig = {};</div>
<div class="line"><a class="code hl_function" href="group__feature2dtracker__group.html#gacc7433d0e649cb138c356f9ce005fccc">dwFeature2DTracker_initDefaultParams</a>(&amp;trackerConfig);</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#a1b6c02a778efde9a85991497820a6c52">detectorType</a>            = detectorConfig.<a class="code hl_variable" href="group__featureDetector__group.html#ad421d1ad7e19cb03e04ce28b541da796">type</a>;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#a618e6c6f43309778ed89c2cceb40791d">maxFeatureCount</a>         = maxFeatureCount;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#a24e90dac0edb53a34f50d5efe09c903d">historyCapacity</a>         = historyCapacity;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#adb9faa4d6ee021f2e31dc586a64d8109">imageWidth</a>              = imageWidth;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#a99501e2875ea7cf32865ba59cf313b31">imageHeight</a>             = imageHeight;</div>
<div class="line"><a class="code hl_function" href="group__feature2dtracker__group.html#ga338a09308a4534aa08482159895b7762">dwFeature2DTracker_initialize</a>(&amp;tracker, &amp;trackerConfig, cudaStream, context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Assuming sensor provides single channel image as input, all handles and buffers are initialized.</span></div>
<div class="line"><span class="keywordflow">while</span> (image = camera-&gt;getFrame())</div>
<div class="line">{</div>
<div class="line">    std::swap(pyramidCurrent, pyramidPrevious);</div>
<div class="line">    dwImageFilter_computePyramid(&amp;pyramidCurrent, &amp;imageY, cudaStream, context);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Track</span></div>
<div class="line">    <a class="code hl_struct" href="group__featureArray__group.html#structdwFeatureArray">dwFeatureArray</a> featurePredicted;</div>
<div class="line">    <a class="code hl_function" href="group__feature2dtracker__group.html#gaad84b8d7ede7ae10a20222c061021079">dwFeature2DTracker_trackFeatures</a>(&amp;featureHistoryGPU, &amp;featurePredicted, <span class="keyword">nullptr</span>,</div>
<div class="line">                                     &amp;featureDetectedGPU, <span class="keyword">nullptr</span>,</div>
<div class="line">                                     &amp;pyramidPrevious, &amp;pyramidCurrent, tracker);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Detect</span></div>
<div class="line">    <a class="code hl_function" href="group__featureDetector__group.html#ga1edee131954d23a5952406c20f509ce0">dwFeature2DDetector_detectFromPyramid</a>(&amp;featureDetectedGPU, &amp;pyramidCurrent,</div>
<div class="line">                                          &amp;featurePredicted, <span class="keyword">nullptr</span>, detector);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// release resources</span></div>
<div class="line"><a class="code hl_function" href="group__featureDetector__group.html#ga87fe2e9d78515bab9645984955a023a4">dwFeature2DDetector_release</a>(detector);</div>
<div class="line"><a class="code hl_function" href="group__feature2dtracker__group.html#gaac51ce50bf476989e7d3400a6a2b6345">dwFeature2DTracker_release</a>(tracker);</div>
<div class="line"> </div>
<div class="line">dwFeatureHistoryArray_destory(featureHistoryGPU);</div>
<div class="line"><a class="code hl_function" href="group__featureArray__group.html#gaad6d20a82ac080c06684ff69553cadab">dwFeatureArray_destroy</a>(featureDetectedGPU);</div>
<div class="line">dwPyramid_destroy(pyramidCurrent);</div>
<div class="line">dwPyramid_destroy(pyramidPrevious);</div>
<div class="ttc" id="agroup__feature2dtracker__group_html_gaac51ce50bf476989e7d3400a6a2b6345"><div class="ttname"><a href="group__feature2dtracker__group.html#gaac51ce50bf476989e7d3400a6a2b6345">dwFeature2DTracker_release</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeature2DTracker_release(dwFeature2DTrackerHandle_t obj)</div><div class="ttdoc">Releases the feature tracker.</div></div>
<div class="ttc" id="agroup__feature2dtracker__group_html_gaad84b8d7ede7ae10a20222c061021079"><div class="ttname"><a href="group__feature2dtracker__group.html#gaad84b8d7ede7ae10a20222c061021079">dwFeature2DTracker_trackFeatures</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeature2DTracker_trackFeatures(dwFeatureHistoryArray *featureHistoryArray, dwFeatureArray *predictedFeatures, float32_t *d_normalizedCrossCorrelation, const dwFeatureArray *featuresToTrack, const dwVector2f *d_predictedPositions, const dwPyramidImage *previousPyramid, const dwPyramidImage *currentPyramid, dwFeature2DTrackerHandle_t obj)</div><div class="ttdoc">Tracks features and store the tracked results to predictedFeatures between the previous and current i...</div></div>
<div class="ttc" id="agroup__featureArray__group_html_gaad6d20a82ac080c06684ff69553cadab"><div class="ttname"><a href="group__featureArray__group.html#gaad6d20a82ac080c06684ff69553cadab">dwFeatureArray_destroy</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeatureArray_destroy(dwFeatureArray featureArray)</div><div class="ttdoc">Destroys the featureArray and frees any memory created by dwFeatureArray_create().</div></div>
<div class="ttc" id="agroup__featureArray__group_html_structdwFeatureHistoryArray"><div class="ttname"><a href="group__featureArray__group.html#structdwFeatureHistoryArray">dwFeatureHistoryArray</a></div><div class="ttdoc">Holds pointers to the data exposed by a feature2d list.</div><div class="ttdef"><b>Definition:</b> <a href="FeatureList_8h_source.html#l00115">FeatureList.h:116</a></div></div>
<div class="ttc" id="agroup__featureDetector__group_html_ga1edee131954d23a5952406c20f509ce0"><div class="ttname"><a href="group__featureDetector__group.html#ga1edee131954d23a5952406c20f509ce0">dwFeature2DDetector_detectFromPyramid</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeature2DDetector_detectFromPyramid(dwFeatureArray *outputDetections, const dwPyramidImage *pyramid, dwFeatureArray *preTrackedFeatures, const float32_t *d_normalizedCrossCorrelation, dwFeature2DDetectorHandle_t obj)</div><div class="ttdoc">Detects new features and append them after old tracked features.</div></div>
<div class="ttc" id="agroup__featureDetector__group_html_ga87fe2e9d78515bab9645984955a023a4"><div class="ttname"><a href="group__featureDetector__group.html#ga87fe2e9d78515bab9645984955a023a4">dwFeature2DDetector_release</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeature2DDetector_release(dwFeature2DDetectorHandle_t obj)</div><div class="ttdoc">Releases the feature Detector.</div></div>
</div><!-- fragment --><h4>Advanced detector and tracker</h4>
<p >The new <code><a class="el" href="group__featureDetector__group.html#gade5610f3024646076d39cc35e0a70e65" title="Handle representing a feature detector.">dwFeature2DDetectorHandle_t</a></code> and <code><a class="el" href="group__feature2dtracker__group.html#ga5e6db17dfac364bca1a8fdc475257c68" title="Handle representing a feature tracker.">dwFeature2DTrackerHandle_t</a></code> provides advanced detecting/tracking options. To enable advanced mode, the application needs to set the detector type as <code><a class="el" href="group__featureDetector__group.html#ggaefefe43983d7f867df1d6597f59acfcaaccb6fdbf8cfec9c8d0a63376a8f4448d" title="Extended Harris Corner detector with more configurable parameters, more flexible, better quality but ...">DW_FEATURE2D_DETECTOR_TYPE_EX</a></code> and the tracker algorithm as <code><a class="el" href="group__feature2dtracker__group.html#ggaedef2b465c9332d24484fd5dc5c450e9a06edef6741a78d5e4ccf90f6278164a4" title="3-DOF (dx, dy, dscale) extended KLT tracking.">DW_FEATURE2D_TRACKER_ALGORITHM_EX</a></code>: </p><div class="fragment"><div class="line"><a class="code hl_struct" href="group__featureDetector__group.html#structdwFeature2DDetectorConfig">dwFeature2DDetectorConfig</a> detectorConfig = {};</div>
<div class="line"><a class="code hl_function" href="group__featureDetector__group.html#gac222b04a04af254513aaf9406c47498c">dwFeature2DDetector_initDefaultParams</a>(&amp;detectorConfig);</div>
<div class="line">detectorConfig.<a class="code hl_variable" href="group__featureDetector__group.html#ad421d1ad7e19cb03e04ce28b541da796">type</a> = <a class="code hl_enumvalue" href="group__featureDetector__group.html#ggaefefe43983d7f867df1d6597f59acfcaaccb6fdbf8cfec9c8d0a63376a8f4448d">DW_FEATURE2D_DETECTOR_TYPE_EX</a>;</div>
<div class="line"><span class="comment">// ... Other settings</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="group__feature2dtracker__group.html#structdwFeature2DTrackerConfig">dwFeature2DTrackerConfig</a> trackerConfig = {};</div>
<div class="line"><a class="code hl_function" href="group__feature2dtracker__group.html#gacc7433d0e649cb138c356f9ce005fccc">dwFeature2DTracker_initDefaultParams</a>(&amp;trackerConfig);</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#a72a9376581de70c9c8e383abc1ce2710">algorithm</a>    = <a class="code hl_enumvalue" href="group__feature2dtracker__group.html#ggaedef2b465c9332d24484fd5dc5c450e9a06edef6741a78d5e4ccf90f6278164a4">DW_FEATURE2D_TRACKER_ALGORITHM_EX</a>;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__feature2dtracker__group.html#a1b6c02a778efde9a85991497820a6c52">detectorType</a> = detectorConfig.<a class="code hl_variable" href="group__featureDetector__group.html#ad421d1ad7e19cb03e04ce28b541da796">type</a>;</div>
<div class="line"><span class="comment">// ... Other settings</span></div>
<div class="ttc" id="agroup__feature2dtracker__group_html_a72a9376581de70c9c8e383abc1ce2710"><div class="ttname"><a href="group__feature2dtracker__group.html#a72a9376581de70c9c8e383abc1ce2710">dwFeature2DTrackerConfig::algorithm</a></div><div class="ttdeci">dwFeature2DTrackerAlgorithm algorithm</div><div class="ttdoc">Tracking Algorithm defined by dwFeature2DTrackerAlgorithm.</div><div class="ttdef"><b>Definition:</b> <a href="FeatureTracker_8h_source.html#l00094">FeatureTracker.h:94</a></div></div>
<div class="ttc" id="agroup__feature2dtracker__group_html_ggaedef2b465c9332d24484fd5dc5c450e9a06edef6741a78d5e4ccf90f6278164a4"><div class="ttname"><a href="group__feature2dtracker__group.html#ggaedef2b465c9332d24484fd5dc5c450e9a06edef6741a78d5e4ccf90f6278164a4">DW_FEATURE2D_TRACKER_ALGORITHM_EX</a></div><div class="ttdeci">@ DW_FEATURE2D_TRACKER_ALGORITHM_EX</div><div class="ttdoc">3-DOF (dx, dy, dscale) extended KLT tracking.</div><div class="ttdef"><b>Definition:</b> <a href="FeatureTracker_8h_source.html#l00080">FeatureTracker.h:80</a></div></div>
<div class="ttc" id="agroup__featureDetector__group_html_ggaefefe43983d7f867df1d6597f59acfcaaccb6fdbf8cfec9c8d0a63376a8f4448d"><div class="ttname"><a href="group__featureDetector__group.html#ggaefefe43983d7f867df1d6597f59acfcaaccb6fdbf8cfec9c8d0a63376a8f4448d">DW_FEATURE2D_DETECTOR_TYPE_EX</a></div><div class="ttdeci">@ DW_FEATURE2D_DETECTOR_TYPE_EX</div><div class="ttdoc">Extended Harris Corner detector with more configurable parameters, more flexible, better quality but ...</div><div class="ttdef"><b>Definition:</b> <a href="featuredetector_2FeatureDetector_8h_source.html#l00077">FeatureDetector.h:77</a></div></div>
</div><!-- fragment --><p> Please refer to documentation for more details regarding available configuration.</p>
<p >Advanced mode also requires an additional device buffer <code>nccScore</code>. It can be left as <code>nullptr</code>, but a valid <code>nccScore</code> buffer is recommended for better tracking/detecting quality. </p><div class="fragment"><div class="line"><a class="code hl_typedef" href="group__core__basictypes__group.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>* nccScore = <span class="keyword">nullptr</span>;</div>
<div class="line">cudaMalloc(&amp;nccScore, <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="group__core__basictypes__group.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>) * maxFeatureCount);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Initialization code</span></div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Start detecting/tracking loop</span></div>
<div class="line"><span class="keywordflow">while</span> (image = camera-&gt;getFrame())</div>
<div class="line">{</div>
<div class="line">    std::swap(pyramidCurrent, pyramidPrevious);</div>
<div class="line">    dwImageFilter_computePyramid(&amp;pyramidCurrent, &amp;imageY, cudaStream, context);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Track</span></div>
<div class="line">    <a class="code hl_struct" href="group__featureArray__group.html#structdwFeatureArray">dwFeatureArray</a> featurePredicted;</div>
<div class="line">    <a class="code hl_function" href="group__feature2dtracker__group.html#gaad84b8d7ede7ae10a20222c061021079">dwFeature2DTracker_trackFeatures</a>(&amp;featureHistoryGPU, &amp;featurePredicted, nccScore,</div>
<div class="line">                                     &amp;featureDetectedGPU, <span class="keyword">nullptr</span>,</div>
<div class="line">                                     &amp;pyramidPrevious, &amp;pyramidCurrent, tracker);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Detect</span></div>
<div class="line">    <a class="code hl_function" href="group__featureDetector__group.html#ga1edee131954d23a5952406c20f509ce0">dwFeature2DDetector_detectFromPyramid</a>(&amp;featureDetectedGPU, &amp;pyramidCurrent,</div>
<div class="line">                                          &amp;featurePredicted, nccScore, detector);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__core__basictypes__group_html_ga4611b605e45ab401f02cab15c5e38715"><div class="ttname"><a href="group__core__basictypes__group.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a></div><div class="ttdeci">float float32_t</div><div class="ttdoc">Specifies POD types.</div><div class="ttdef"><b>Definition:</b> <a href="BasicTypes_8h_source.html#l00057">BasicTypes.h:57</a></div></div>
</div><!-- fragment --><p >The <code>nccScore</code> buffer is recommended only when both the detector and tracker are in advanced mode. It's valid to connect the <code><a class="el" href="group__featureDetector__group.html#ggaefefe43983d7f867df1d6597f59acfcaa810963b7defbbd17d10480a929029299" title="Standard Harris Corner detector with fixed parameters, quicker.">DW_FEATURE2D_DETECTOR_TYPE_STD</a></code> normal detector with the <code><a class="el" href="group__feature2dtracker__group.html#ggaedef2b465c9332d24484fd5dc5c450e9a06edef6741a78d5e4ccf90f6278164a4" title="3-DOF (dx, dy, dscale) extended KLT tracking.">DW_FEATURE2D_TRACKER_ALGORITHM_EX</a></code> advanced tracker, or to connect the <code><a class="el" href="group__featureDetector__group.html#ggaefefe43983d7f867df1d6597f59acfcaaccb6fdbf8cfec9c8d0a63376a8f4448d" title="Extended Harris Corner detector with more configurable parameters, more flexible, better quality but ...">DW_FEATURE2D_DETECTOR_TYPE_EX</a></code> advanced detector with the <code><a class="el" href="group__feature2dtracker__group.html#ggaedef2b465c9332d24484fd5dc5c450e9a7162f6e7fa3c0d0b6b0002d154ef3dfd" title="3-DOF (dx, dy, dscale) standard KLT tracking.">DW_FEATURE2D_TRACKER_ALGORITHM_STD</a></code> advanced tracker. The application only needs to set <code><a class="el" href="group__feature2dtracker__group.html#a1b6c02a778efde9a85991497820a6c52" title="Type of detector that connects to the tracker, should be the same value as dwFeature2DDetectorConfig:...">dwFeature2DTrackerConfig::detectorType</a></code> with the correct value of its corresponding detector.</p>
<h4>Working with SFM APIs</h4>
<p >Below are the recommended steps for using <code>imageprocessing</code> APIs in SFM:</p><ol type="1">
<li>Set <code><a class="el" href="group__feature2dtracker__group.html#structdwFeature2DTrackerConfig" title="Holds configuration parameters for a feature tracker.">dwFeature2DTrackerConfig</a>:.algorithm = DW_FEATURE2D_TRACKER_ALGORITHM_SFM</code> to allow sparse tracking results output.</li>
<li>Perform tracking and reconstruction. DO NOT detect new features immediately after tracking.</li>
<li>Call <code><a class="el" href="group__feature2dtracker__group.html#ga653816f0e70ec655c96fa9daf595b3a2" title="Remove invalid features.">dwFeature2DTracker_compact()</a></code> explicitly after SFM reconstruction is done. Fill the <code>d_newToOldMap</code> device array by <code>dwFeature2DTracker_getNewToOldMap()</code>.</li>
<li>Call <code>dwReconstructor_compact*</code> by <code>d_newToOldMap</code> received in step 3.</li>
<li>Detect new features when <code>compact</code> is done.</li>
</ol>
<p >Pseudo code for a typical workflow: </p><div class="fragment"><div class="line"><span class="comment">// Track features</span></div>
<div class="line"><a class="code hl_function" href="group__feature2dtracker__group.html#gaad84b8d7ede7ae10a20222c061021079">dwFeature2DTracker_trackFeatures</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Reconstruction</span></div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Compact data</span></div>
<div class="line"><a class="code hl_function" href="group__feature2dtracker__group.html#ga653816f0e70ec655c96fa9daf595b3a2">dwFeature2DTracker_compact</a>();</div>
<div class="line">dwFeature2DTracker_getNewToOldMap();</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__reconstructor__group.html#ga50b57c98dfb01bda3078af5a2f8d3720">dwReconstructor_compactFeatureHistory</a>();</div>
<div class="line"><a class="code hl_function" href="group__reconstructor__group.html#gaee5807764c89816840d87bf218175405">dwReconstructor_compactWorldPoints</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Detect new features</span></div>
<div class="line"><a class="code hl_function" href="group__featureDetector__group.html#ga1edee131954d23a5952406c20f509ce0">dwFeature2DDetector_detectFromPyramid</a>();</div>
<div class="ttc" id="agroup__feature2dtracker__group_html_ga653816f0e70ec655c96fa9daf595b3a2"><div class="ttname"><a href="group__feature2dtracker__group.html#ga653816f0e70ec655c96fa9daf595b3a2">dwFeature2DTracker_compact</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwFeature2DTracker_compact(dwFeatureHistoryArray *featureHistoryArray, dwFeature2DTrackerHandle_t obj)</div><div class="ttdoc">Remove invalid features.</div></div>
<div class="ttc" id="agroup__reconstructor__group_html_ga50b57c98dfb01bda3078af5a2f8d3720"><div class="ttname"><a href="group__reconstructor__group.html#ga50b57c98dfb01bda3078af5a2f8d3720">dwReconstructor_compactFeatureHistory</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwReconstructor_compactFeatureHistory(const uint32_t cameraIdx, const uint32_t *d_validIndexCount, const uint32_t *d_newToOldMap, dwReconstructorHandle_t obj)</div><div class="ttdoc">Compacts the internal feature history by keeping only selected features.</div></div>
<div class="ttc" id="agroup__reconstructor__group_html_gaee5807764c89816840d87bf218175405"><div class="ttname"><a href="group__reconstructor__group.html#gaee5807764c89816840d87bf218175405">dwReconstructor_compactWorldPoints</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwReconstructor_compactWorldPoints(dwVector4f *d_worldPoints, const uint32_t *d_validIndexCount, const uint32_t *d_newToOldMap, dwReconstructorHandle_t obj)</div><div class="ttdoc">Compacts the world point array by keeping only selected features.</div></div>
</div><!-- fragment --><p >For the full implementation refer to <a class="el" href="dwx_struct_from_motion_sample.html">Structure from Motion (SFM) Sample</a>.</p>
<h3>Port <code>dwScalingFeatureListHandle_t</code> and <code>dwScalingFeatureListPointers</code> to <code><a class="el" href="group__template__tracker__group.html#structdwTemplateArray">dwTemplateArray</a></code></h3>
<p >Similar to <code><a class="el" href="group__featureArray__group.html#structdwFeatureHistoryArray" title="Holds pointers to the data exposed by a feature2d list.">dwFeatureHistoryArray</a></code>, template tracker provides a <code><a class="el" href="group__template__tracker__group.html#structdwTemplateArray">dwTemplateArray</a></code> to replace the old <code>dwScalingFeatureListHandle_t</code> and <code>dwScalingFeatureListPointers</code>.</p>
<p >The new <code><a class="el" href="group__template__tracker__group.html#structdwTemplateArray">dwTemplateArray</a></code> struct provides pointers such as: <code>*bboxes</code>, <code>*statuses</code>, <code>*ids</code>, <code>*ages</code>, <code>*scaleFactors</code> and <code>*templateCount</code> like the old <code>dwScalingFeatureListPointers</code> did. It is also created and destroyed like old handle <code>dwScalingFeatureListHandle_t</code>. <code><a class="el" href="group__template__tracker__group.html#structdwTemplateArray">dwTemplateArray</a></code> can be created on page-able/pinned CPU or CUDA memory.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Old name   </th><th class="markdownTableHeadNone">New name    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwScalingFeatureListPointers::locations   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#a45fd8607e2a7f9f80946e29eca43702e" title="bounding box of each template.">dwTemplateArray::bboxes</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwScalingFeatureListPointers::sizes   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#a45fd8607e2a7f9f80946e29eca43702e" title="bounding box of each template.">dwTemplateArray::bboxes</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwScalingFeatureListPointers::statuses   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#acbdef1f250ddb5592bd36a121ef46690" title="Status of each template.">dwTemplateArray::statuses</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwScalingFeatureListPointers::ids   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#a40685db92ee22f1d7b4201ee9d154313" title="Id of each template.">dwTemplateArray::ids</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwScalingFeatureListPointers::ages   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#a76c7fdedf5528129ececc6e4d771efe2" title="Age of each template.">dwTemplateArray::ages</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwScalingFeatureListPointers::scaleFactors   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#a5686ec066785b0386fba2e639e1f6d95" title="scaleFactor from frame N to N-1 of each template.">dwTemplateArray::scaleFactors</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwScalingFeatureListPointers::bNewTemplate   </td><td class="markdownTableBodyNone">&mdash;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwScalingFeatureListPointers::featureCount   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#aae768b1d32a3ff7005baecf5c2eee952" title="Total number of templates.">dwTemplateArray::templateCount</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwScalingFeatureList_initialize()   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#ga2ce56ce87492bb95a643e8566c043322" title="Creates and initializes a template array.">dwTemplateArray_create()</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwScalingFeatureList_release()   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#ga7987fa2de3dacc07a01d47340009d4a2" title="Destroys the template array and frees any memory created by dwTemplateArray_create().">dwTemplateArray_destroy()</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwScalingFeatureList_reset()   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#ga59ee7cf657a422084e9bb086e942d970" title="Resets the template array.">dwTemplateArray_reset()</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwScalingFeatureList_getDataBasePointer()   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#a3c60bd63108f6dbdd25b39db85a3e52f" title="Pointer to the raw data address.">dwTemplateArray::data</a>, <a class="el" href="group__template__tracker__group.html#a68f7a5145e7c1324705560f52b05c0b4" title="Bytes of raw data.">dwTemplateArray::bytes</a>   </td></tr>
</table>
<p >For new <code>dw_imageprocessing</code> APIs, there's no need to call <code>addEmptyFeature</code>, <code>selectValid()</code>, <code>compact()</code> and <code>applySizeFilter()</code> explicitly. They are automatically called within the DriveWorks module.</p>
<p >Example: In the old <code>dw_feature</code> APIs, the application needed to create a <code>dwScalingFeatureListHandle_t</code> object and call <code>dwScalingFeatureList_getDataPointers()</code> to get the interpretable <code>dwScalingFeatureListPointers</code>. </p><div class="fragment"><div class="line"><span class="comment">// Old code</span></div>
<div class="line">dwScalingFeatureList_initialize(&amp;templateList, 0, maxTemplateCount, pxlType, context);</div>
<div class="line"><span class="keywordtype">void</span>* d_database8;</div>
<div class="line"><span class="keywordtype">size_t</span> databytes;</div>
<div class="line">dwScalingFeatureListPointers templateDataGPU;</div>
<div class="line">dwScalingFeatureList_getDataBasePointer(&amp;d_database8, &amp;databytes, templateList);</div>
<div class="line">dwScalingFeatureList_getDataPointers(&amp;templateDataGPU, d_database8, templateList));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// access the pointers of dwFeatureListPointers on GPU</span></div>
<div class="line">templateDataGPU.locations[...]</div>
<div class="line">templateDataGPU.sizes[...]</div>
</div><!-- fragment --><p >If the application needed a CPU copy of the <code>templateList</code> handle, it first had to allocate CPU memory and call <code>dwScalingFeatureList_getDataPointers()</code> to interpret it into <code>dwScalingFeatureListPointers</code>. </p><div class="fragment"><div class="line"><span class="comment">// Old code</span></div>
<div class="line">uint8_t* h_database8 = <span class="keyword">new</span> uint8_t[databytes];</div>
<div class="line">dwScalingFeatureListPointers templateDataCPU;</div>
<div class="line">dwScalingFeatureList_getDataPointers(&amp;templateDataCPU, h_database8, templateList));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// access the pointers of dwScalingFeatureListPointers on CPU</span></div>
<div class="line">templateDataCPU.locations[...]</div>
<div class="line">templateDataCPU.sizes[...]</div>
</div><!-- fragment --><p >It also needed the raw data pointer to copy data between the CPU and GPU. </p><div class="fragment"><div class="line"><span class="comment">// GPU -&gt; CPU copy</span></div>
<div class="line">cudaMemcpy(h_database8, d_database8, databytes, cudaMemcpyDeviceToHost);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// CPU -&gt; GPU copy</span></div>
<div class="line">cudaMemcpy(d_database8, h_database8, databytes, cudaMemcpyHostToDevice);</div>
</div><!-- fragment --><p >In the new <code>dw_imageprocessing</code> APIs, the application only needs to create the <code><a class="el" href="group__template__tracker__group.html#structdwTemplateArray">dwTemplateArray</a></code> object on the CPU and GPU. It provides both raw pointers and interpretable pointers. It also provides the <code><a class="el" href="group__template__tracker__group.html#ga9d5ab06a78d030f34eb49aa5b97571e4" title="Deep copy all contents from srcTemplateArray to dstTemplateArray">dwTemplateArray_copyAsync()</a></code> API to easily copy data between two template arrays. </p><div class="fragment"><div class="line"><span class="comment">// New code</span></div>
<div class="line"><a class="code hl_function" href="group__template__tracker__group.html#ga2ce56ce87492bb95a643e8566c043322">dwTemplateArray_create</a>(&amp;templateCPU, maxFeatureCount, <a class="code hl_enumvalue" href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023a9729e85945ecb1a598a445897aeb545c">DW_MEMORY_TYPE_CPU</a>, context);</div>
<div class="line"><a class="code hl_function" href="group__template__tracker__group.html#ga2ce56ce87492bb95a643e8566c043322">dwTemplateArray_create</a>(&amp;templateGPU, maxFeatureCount, <a class="code hl_enumvalue" href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023ac9656206fa925a04a1a14bdfa5ab6a40">DW_MEMORY_TYPE_CUDA</a>, context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// access the pointers on GPU</span></div>
<div class="line">templateGPU.statuses[...]</div>
<div class="line">templateGPU.bboxes[...]</div>
<div class="line"> </div>
<div class="line"><span class="comment">// access the pointers on CPU</span></div>
<div class="line">templateCPU.statuses[...]</div>
<div class="line">templateCPU.bboxes[...]</div>
<div class="line"> </div>
<div class="line"><span class="comment">// GPU -&gt; CPU copy</span></div>
<div class="line"><a class="code hl_function" href="group__template__tracker__group.html#ga9d5ab06a78d030f34eb49aa5b97571e4">dwTemplateArray_copyAsync</a>(&amp;templateCPU, &amp;templateGPU, 0);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// CPU -&gt; GPU copy</span></div>
<div class="line"><a class="code hl_function" href="group__template__tracker__group.html#ga9d5ab06a78d030f34eb49aa5b97571e4">dwTemplateArray_copyAsync</a>(&amp;templateGPU, &amp;templateCPU, 0);</div>
<div class="ttc" id="agroup__template__tracker__group_html_ga2ce56ce87492bb95a643e8566c043322"><div class="ttname"><a href="group__template__tracker__group.html#ga2ce56ce87492bb95a643e8566c043322">dwTemplateArray_create</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwTemplateArray_create(dwTemplateArray *templateArray, const uint32_t maxTemplateCount, const dwMemoryType memoryType, dwContextHandle_t context)</div><div class="ttdoc">Creates and initializes a template array.</div></div>
<div class="ttc" id="agroup__template__tracker__group_html_ga9d5ab06a78d030f34eb49aa5b97571e4"><div class="ttname"><a href="group__template__tracker__group.html#ga9d5ab06a78d030f34eb49aa5b97571e4">dwTemplateArray_copyAsync</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwTemplateArray_copyAsync(dwTemplateArray *dstTemplateArray, const dwTemplateArray *srcTemplateArray, cudaStream_t stream)</div><div class="ttdoc">Deep copy all contents from srcTemplateArray to dstTemplateArray</div></div>
</div><!-- fragment --><p >The application can also create <code><a class="el" href="group__template__tracker__group.html#structdwTemplateArray">dwTemplateArray</a></code> on pinned memory, it only needs to change <code><a class="el" href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023a9729e85945ecb1a598a445897aeb545c" title="pageable CPU memory">DW_MEMORY_TYPE_CPU</a></code> to <code><a class="el" href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023ad5a261f6101e4062e1d40a04a406f127" title="pinned memory">DW_MEMORY_TYPE_PINNED</a></code> during creation.</p>
<p >Like <code>dwScalingFeatureListHandle_t</code>, there are also <code>reset()</code> and <code>destroy()</code> APIs. <code><a class="el" href="group__template__tracker__group.html#structdwTemplateArray">dwTemplateArray</a></code> must be destroyed before the application exits. </p><div class="fragment"><div class="line"><span class="comment">// New code</span></div>
<div class="line"><a class="code hl_function" href="group__template__tracker__group.html#ga7987fa2de3dacc07a01d47340009d4a2">dwTemplateArray_destroy</a>(templateCPU);</div>
<div class="line"><a class="code hl_function" href="group__template__tracker__group.html#ga7987fa2de3dacc07a01d47340009d4a2">dwTemplateArray_destroy</a>(templateGPU);</div>
<div class="ttc" id="agroup__template__tracker__group_html_ga7987fa2de3dacc07a01d47340009d4a2"><div class="ttname"><a href="group__template__tracker__group.html#ga7987fa2de3dacc07a01d47340009d4a2">dwTemplateArray_destroy</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwTemplateArray_destroy(dwTemplateArray templateArray)</div><div class="ttdoc">Destroys the template array and frees any memory created by dwTemplateArray_create().</div></div>
</div><!-- fragment --><h3>Port <code>dwScalingFeatureTrackerHandle_t</code> to <code>dwTemplateTrackerHandle_t</code></h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Old name   </th><th class="markdownTableHeadNone">New name    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwScalingFeatureTracker_initialize()   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#ga92984e4561a5c20a6ddcb4e61dbac4d6" title="Initialize the TemplateTracker module.">dwTemplateTracker_initialize()</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwScalingFeatureTracker_initDefaultParams()   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#ga6b85492b84fee4c2b9a047c99798d5c7" title="Initializes TemplateTracker parameters with default values.">dwTemplateTracker_initDefaultParams()</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwScalingFeatureTracker_reset()   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#ga0bf611481f2499431dc1b4017d8d681b" title="Resets the TemplateTracker.">dwTemplateTracker_reset()</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwScalingFeatureTracker_release()   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#ga9f208869ce65a235114a731ec5d25563" title="Releases the TemplateTracker module.">dwTemplateTracker_release()</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwScalingFeatureTracker_trackAsync()   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#gacde7aa76553f9dcf09e7cb3bf86d7bc5" title="Track the templates in currentImage  .">dwTemplateTracker_trackImage()</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#ga66764bc101d8e68bcb270c1c81736adc" title="Track the templates in currentPyramid  .">dwTemplateTracker_trackPyramid()</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone">dwFeature2DTracker_getNewToOldMap()   </td></tr>
</table>
<p >For new <code>dw_imageprocessing</code> APIs, there's no need to call <code>dwScalingFeatureTracker_updateTemplateAsync()</code> explicitly. It is automatically called within the DriveWorks module.</p>
<p >The new <code><a class="el" href="group__template__tracker__group.html#structdwTemplateTrackerParameters" title="Configuration parameters for a dwTemplateTrackerIA.">dwTemplateTrackerParameters</a></code> parameter covers all settings from the old <code>dwScalingFeatureTrackerConfig</code> and <code>dwScalingFeatureListParameters</code> parameters.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Old dwScalingFeatureXXX settings   </th><th class="markdownTableHeadNone">New <a class="el" href="group__template__tracker__group.html#structdwTemplateTrackerParameters" title="Configuration parameters for a dwTemplateTrackerIA.">dwTemplateTrackerParameters</a>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone">dwTemplateTrackerParameters::type    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwScalingFeatureListParameters::maxFeatureCount   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#a1508cea266089b994f1c4e63de7ff955" title="Upper bound on number of templates handled.">dwTemplateTrackerParameters::maxTemplateCount</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwScalingFeatureListParameters::imageWidth   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#a9921f16bf14763858ce5213fb476adce" title="Width of the images that the tracker runs on.">dwTemplateTrackerParameters::imageWidth</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwScalingFeatureListParameters::imageHeight   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#a157d2a73734b6661b70a341edc096396" title="Height of the images that the tracker runs on.">dwTemplateTrackerParameters::imageHeight</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwScalingFeatureListParameters::pyramidLevelCount   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#af3240fd66752911e9ff36e46858acb6d" title="Max pyramid level to track.">dwTemplateTrackerParameters::maxPyramidLevel</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwScalingFeatureTrackerConfig::numIterCoarse   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#a72bddedd29e6b75b20a25034f54c39ca" title="for DW_TEMPLATE_TRACKER_ALGO_IA only Iteration number to apply the coarse KLT for robustness.">dwTemplateTrackerParameters::numIterationsCoarse</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwScalingFeatureTrackerConfig::numIterFine   </td><td class="markdownTableBodyNone">dwTemplateTrackerParameters::numIterations    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwScalingFeatureTrackerConfig::thresholdUpdate   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#a027ffbba0f3c58321440076b7279acd2" title="Updating threshold in [0, 1].">dwTemplateTrackerParameters::thresholdUpdate</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwScalingFeatureTrackerConfig::thresholdKill   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#a5008ceda4042f795c5f03b85f7c31cfa" title="Killing threshold in [0, 1].">dwTemplateTrackerParameters::thresholdKill</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwScalingFeatureTrackerConfig::thresholdStop   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#a7129bc921d61e4a47ddadc7ea3884db7" title="for DW_TEMPLATE_TRACKER_ALGO_IC only Stop threshold in [-1, 1].">dwTemplateTrackerParameters::thresholdStop</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwScalingFeatureTrackerConfig::maxScaleChange   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#a166573620d8b045b17587dddf5e5e1be" title="If scalingFactor between frame N to N-1 is outside range [1/maxScaleChange, maxScaleChange] tracking ...">dwTemplateTrackerParameters::maxScaleChange</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#aa48e0aac8ef2a870d1e4d55f92032338" title="Maximum valid template width, any templates with bbox.width &gt; validWidth will be killed after trackin...">dwTemplateTrackerParameters::validWidth</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;   </td><td class="markdownTableBodyNone"><a class="el" href="group__template__tracker__group.html#ad3a23294c8fcacdafd1eee7817a827e8" title="Maximum valid template height, any templates with bbox.height &gt; validHeight will be killed after trac...">dwTemplateTrackerParameters::validHeight</a>   </td></tr>
</table>
<p >Here's a complete example showing the template tracker pipeline with the old <code>dw_feature</code> APIs and new <code>dw_imageprocessing</code> APIs.</p>
<h4>old dw_feature</h4>
<div class="fragment"><div class="line"><span class="comment">// Old dw_features code</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create template list</span></div>
<div class="line">dwScalingFeatureListHandle_t templateList;</div>
<div class="line">dwScalingFeatureList_initialize(&amp;templateList, cudaStream, maxTemplateCount, <a class="code hl_enumvalue" href="group__core__types__group.html#ggaa47781681c93aac1f28bc9bef7b07960ab94112ec2a0a6a1958881319168f52a5">DW_TYPE_UINT8</a>, context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// create pyramid</span></div>
<div class="line">dwPyramidHandle_t pyramidCurrent, pyramidPrevious;</div>
<div class="line">dwPyramidConfig config{};</div>
<div class="line">config.width = width;</div>
<div class="line">config.height = height;</div>
<div class="line">config.levelCount = numLevel;</div>
<div class="line">config.dataType = <a class="code hl_enumvalue" href="group__core__types__group.html#ggaa47781681c93aac1f28bc9bef7b07960ab94112ec2a0a6a1958881319168f52a5">DW_TYPE_UINT8</a>;</div>
<div class="line">dwPyramid_initialize(&amp;pyramidCurrent, &amp;config, cudaStream, context);</div>
<div class="line">dwPyramid_initialize(&amp;pyramidPrevious, &amp;config, cudaStream, context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// create tracker and detector</span></div>
<div class="line">dwScalingFeatureTrackerConfig trackerConfig{};</div>
<div class="line">dwScalingFeatureTracker_initDefaultParams(&amp;trackerConfig);</div>
<div class="line">dwScalingFeatureTracker_initialize(&amp;tracker, &amp;trackerConfig, cudaStream, context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Old dw_feature APIs requires additional CUDA buffers for compact.</span></div>
<div class="line">uint32_t *d_validCount, *d_validIndexes, *d_invalidCount, *d_invalidIndexes;</div>
<div class="line">cudaMalloc(&amp;d_validCount, <span class="keyword">sizeof</span>(uint32_t));</div>
<div class="line">cudaMalloc(&amp;d_validIndexes, <span class="keyword">sizeof</span>(uint32_t) * maxFeatureCount);</div>
<div class="line">cudaMalloc(&amp;d_invalidCount, <span class="keyword">sizeof</span>(uint32_t));</div>
<div class="line">cudaMalloc(&amp;d_invalidIndexes, <span class="keyword">sizeof</span>(uint32_t) * maxFeatureCount);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// add bboxes to track, assuming there&#39;re nBoxToTrack, bounding box info is stored in hBBoxes array</span></div>
<div class="line">uint8_t* d_database8;</div>
<div class="line"><span class="keywordtype">size_t</span> databytes;</div>
<div class="line">dwScalingFeatureList_getDataBasePointer(&amp;d_database8, &amp;databytes, templateList);</div>
<div class="line"> </div>
<div class="line">uint8_t* h_database8 = <span class="keyword">new</span> uint8_t[databytes];</div>
<div class="line">dwScalingFeatureListPointers templateDataCPU;</div>
<div class="line">dwScalingFeatureList_getDataPointers(&amp;templateDataCPU, h_database8, templateList));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// assuming there&#39;re nBoxToTrack stored in hBBoxes array</span></div>
<div class="line"><span class="keywordflow">for</span> (uint32_t i = 0; i &lt; nBoxToTrack; i++)</div>
<div class="line">{</div>
<div class="line">    templateDataCPU.locations[i]    = {hBBoxes[i].x, hBBoxes[i].y};</div>
<div class="line">    templateDataCPU.sizes[i]        = {hBBoxes[i].width, hBBoxes[i].height};</div>
<div class="line">    templateDataCPU.statuses[i]     = DW_FEATURE_STATUS_DETECTED;</div>
<div class="line">    templateDataCPU.ages[i]         = 1;</div>
<div class="line">    templateDataCPU.bNewTemplate[i] = <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line">*templateDataCPU.featureCount = nBoxToTrack;</div>
<div class="line">cudaMemcpy(d_database8, h_database8, databytes, cudaMemcpyHostToDevice);</div>
<div class="line">dwScalingFeatureList_addEmptyFeature(nBoxToTrack, dwScalingFeatureListHandle_t obj);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Assuming sensor provides single channel image as input</span></div>
<div class="line"><span class="keywordflow">while</span> (image = camera-&gt;getFrame())</div>
<div class="line">{</div>
<div class="line">    std::swap(pyramidCurrent, pyramidPrevious);</div>
<div class="line">    dwPyramid_build(&amp;image, pyramidCurrent);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="group__image__group.html#structdwImageCUDA">dwImageCUDA</a> *imageCurrent, *imagePrevious;</div>
<div class="line">    dwPyramid_getLevelImageCUDA(&amp;imageCurrent, 0, pyramidCurrent);</div>
<div class="line">    dwPyramid_getLevelImageCUDA(&amp;imagePrevious, 0, pyramidPrevious);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Update template</span></div>
<div class="line">    dwScalingFeatureTracker_updateTemplateAsync(templateList, imagePrevious, tracker);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Track</span></div>
<div class="line">    dwScalingFeatureTracker_trackAsync(templateList, imageCurrent, tracker);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Apply proximity filters to make features uniformly distributed</span></div>
<div class="line">    dwScalingFeatureList_applySizeFilter(maxWidth, maxHeight, templateList);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Determine which features to throw away</span></div>
<div class="line">    dwScalingFeatureList_selectValid(d_validCount, d_validIndexes,</div>
<div class="line">                                     d_invalidCount, d_invalidIndexes, templateList);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Compact list</span></div>
<div class="line">    dwScalingFeatureList_compact(templateList, d_validCount, d_validIndexes,</div>
<div class="line">                                 d_invalidCount, d_invalidIndexes);</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// release resources</span></div>
<div class="line"><span class="keyword">delete</span>[] h_database8;</div>
<div class="line">dwScalingFeatureList_release(featureList);</div>
<div class="line">dwScalingFeatureTracker_release(tracker);</div>
<div class="line">dwPyramid_release(pyramidCurrent);</div>
<div class="line">dwPyramid_release(pyramidPrevious);</div>
<div class="line"> </div>
<div class="line">cudaFree(d_validCount);</div>
<div class="line">cudaFree(d_validIndexes);</div>
<div class="line">cudaFree(d_invalidCount);</div>
<div class="line">cudaFree(d_invalidIndexes);</div>
<div class="ttc" id="agroup__image__group_html_structdwImageCUDA"><div class="ttname"><a href="group__image__group.html#structdwImageCUDA">dwImageCUDA</a></div><div class="ttdoc">Defines a CUDA image.</div><div class="ttdef"><b>Definition:</b> <a href="image_2Image_8h_source.html#l00419">Image.h:420</a></div></div>
</div><!-- fragment --><h4>new dw_imageprocessing</h4>
<div class="fragment"><div class="line"><span class="comment">// New dw_imageprocessing code</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// create template array</span></div>
<div class="line"><a class="code hl_struct" href="group__template__tracker__group.html#structdwTemplateArray">dwTemplateArray</a> templateGPU, templateCPU;</div>
<div class="line"><a class="code hl_function" href="group__template__tracker__group.html#ga2ce56ce87492bb95a643e8566c043322">dwTemplateArray_create</a>(&amp;templateGPU, maxTemplateCount, <a class="code hl_enumvalue" href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023ac9656206fa925a04a1a14bdfa5ab6a40">DW_MEMORY_TYPE_CUDA</a>, context);</div>
<div class="line"><a class="code hl_function" href="group__template__tracker__group.html#ga2ce56ce87492bb95a643e8566c043322">dwTemplateArray_create</a>(&amp;templateCPU, maxTemplateCount, <a class="code hl_enumvalue" href="group__core__types__group.html#gga71b04af11695393d59ac9aca72f93023a9729e85945ecb1a598a445897aeb545c">DW_MEMORY_TYPE_CPU</a>, context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create pyramid</span></div>
<div class="line">dwPyramidImage pyramidCurrent, pyramidPrevious;</div>
<div class="line">dwPyramid_create(&amp;pyramidCurrent, numLevel, width, height, <a class="code hl_enumvalue" href="group__core__types__group.html#ggaa47781681c93aac1f28bc9bef7b07960ab94112ec2a0a6a1958881319168f52a5">DW_TYPE_UINT8</a>, context);</div>
<div class="line">dwPyramid_create(&amp;pyramidPrevious, numLevel, width, height, <a class="code hl_enumvalue" href="group__core__types__group.html#ggaa47781681c93aac1f28bc9bef7b07960ab94112ec2a0a6a1958881319168f52a5">DW_TYPE_UINT8</a>, context);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// create template tracker</span></div>
<div class="line"><a class="code hl_struct" href="group__template__tracker__group.html#structdwTemplateTrackerParameters">dwTemplateTrackerParameters</a> trackerConfig = {};</div>
<div class="line"><a class="code hl_function" href="group__template__tracker__group.html#ga6b85492b84fee4c2b9a047c99798d5c7">dwTemplateTracker_initDefaultParams</a>(&amp;trackerConfig);</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__template__tracker__group.html#a1508cea266089b994f1c4e63de7ff955">maxTemplateCount</a>  = maxTemplateCount;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__template__tracker__group.html#a9921f16bf14763858ce5213fb476adce">imageWidth</a>        = width;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__template__tracker__group.html#a157d2a73734b6661b70a341edc096396">imageHeight</a>       = height;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__template__tracker__group.html#aa48e0aac8ef2a870d1e4d55f92032338">validWidth</a>        = maxWidth;</div>
<div class="line">trackerConfig.<a class="code hl_variable" href="group__template__tracker__group.html#ad3a23294c8fcacdafd1eee7817a827e8">validHeight</a>       = maxHeight;</div>
<div class="line"><a class="code hl_function" href="group__template__tracker__group.html#ga92984e4561a5c20a6ddcb4e61dbac4d6">dwTemplateTracker_initialize</a>(&amp;tracker, &amp;trackerConfig, cudaStream, context);</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// assuming there&#39;re nBoxToTrack stored in hBBoxes array</span></div>
<div class="line"><span class="keywordflow">for</span> (uint32_t i = 0; i &lt; nBoxToTrack; i++)</div>
<div class="line">{</div>
<div class="line">    templateCPU.<a class="code hl_variable" href="group__template__tracker__group.html#a45fd8607e2a7f9f80946e29eca43702e">bboxes</a>[i]   = hBBoxes[i];</div>
<div class="line">    templateCPU.<a class="code hl_variable" href="group__template__tracker__group.html#acbdef1f250ddb5592bd36a121ef46690">statuses</a>[i] = <a class="code hl_enumvalue" href="group__featureArray__group.html#gga41557d7183de7a8b1d351f7cb1043817a8ef068f96c240ea86e613e26bab09e09">DW_FEATURE2D_STATUS_DETECTED</a>;</div>
<div class="line">    templateCPU.<a class="code hl_variable" href="group__template__tracker__group.html#a76c7fdedf5528129ececc6e4d771efe2">ages</a>[i]     = 1;</div>
<div class="line">}</div>
<div class="line">*templateCPU.<a class="code hl_variable" href="group__template__tracker__group.html#aae768b1d32a3ff7005baecf5c2eee952">templateCount</a> = nBoxToTrack;</div>
<div class="line"><a class="code hl_function" href="group__template__tracker__group.html#ga9d5ab06a78d030f34eb49aa5b97571e4">dwTemplateArray_copyAsync</a>(&amp;templateGPU, &amp;templateCPU, 0);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Assuming sensor provides single channel image as input, all handles and buffers are initialized.</span></div>
<div class="line"><span class="keywordflow">while</span> (image = camera-&gt;getFrame())</div>
<div class="line">{</div>
<div class="line">    std::swap(pyramidCurrent, pyramidPrevious);</div>
<div class="line">    dwImageFilter_computePyramid(&amp;pyramidCurrent, &amp;imageY, cudaStream, context);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="group__image__group.html#structdwImageCUDA">dwImageCUDA</a> *imageCurrent, *imagePrevious;</div>
<div class="line">    <a class="code hl_function" href="group__image__group.html#ga9b63aaeb03d9cbda4fec269ec09f53e6">dwImage_getCUDA</a>(&amp;imageCurrent, pyramidCurrent.levelImages[0]);</div>
<div class="line">    <a class="code hl_function" href="group__image__group.html#ga9b63aaeb03d9cbda4fec269ec09f53e6">dwImage_getCUDA</a>(&amp;imagePrevous, pyramidPrevious.levelImages[0]);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Track</span></div>
<div class="line">    <a class="code hl_function" href="group__template__tracker__group.html#gacde7aa76553f9dcf09e7cb3bf86d7bc5">dwTemplateTracker_trackImage</a>(&amp;templateGPU, imageCurrent, imagePrevious, tracker);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// release resources</span></div>
<div class="line"><a class="code hl_function" href="group__template__tracker__group.html#ga7987fa2de3dacc07a01d47340009d4a2">dwTemplateArray_destroy</a>(templateGPU);</div>
<div class="line"><a class="code hl_function" href="group__template__tracker__group.html#ga7987fa2de3dacc07a01d47340009d4a2">dwTemplateArray_destroy</a>(templateCPU);</div>
<div class="line"><a class="code hl_function" href="group__template__tracker__group.html#ga9f208869ce65a235114a731ec5d25563">dwTemplateTracker_release</a>(tracker);</div>
<div class="line"> </div>
<div class="line">dwPyramid_destroy(pyramidCurrent);</div>
<div class="line">dwPyramid_destroy(pyramidPrevious);</div>
<div class="ttc" id="agroup__featureArray__group_html_gga41557d7183de7a8b1d351f7cb1043817a8ef068f96c240ea86e613e26bab09e09"><div class="ttname"><a href="group__featureArray__group.html#gga41557d7183de7a8b1d351f7cb1043817a8ef068f96c240ea86e613e26bab09e09">DW_FEATURE2D_STATUS_DETECTED</a></div><div class="ttdeci">@ DW_FEATURE2D_STATUS_DETECTED</div><div class="ttdoc">The feature was just detected in the current frame.</div><div class="ttdef"><b>Definition:</b> <a href="FeatureList_8h_source.html#l00071">FeatureList.h:71</a></div></div>
<div class="ttc" id="agroup__image__group_html_ga9b63aaeb03d9cbda4fec269ec09f53e6"><div class="ttname"><a href="group__image__group.html#ga9b63aaeb03d9cbda4fec269ec09f53e6">dwImage_getCUDA</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwImage_getCUDA(dwImageCUDA **const imageCUDA, dwImageHandle_t const image)</div><div class="ttdoc">Retrieves the dwImageCUDA of a dwImageHandle_t.</div></div>
<div class="ttc" id="agroup__template__tracker__group_html_a1508cea266089b994f1c4e63de7ff955"><div class="ttname"><a href="group__template__tracker__group.html#a1508cea266089b994f1c4e63de7ff955">dwTemplateTrackerParameters::maxTemplateCount</a></div><div class="ttdeci">uint32_t maxTemplateCount</div><div class="ttdoc">Upper bound on number of templates handled.</div><div class="ttdef"><b>Definition:</b> <a href="TemplateTracker_8h_source.html#l00134">TemplateTracker.h:134</a></div></div>
<div class="ttc" id="agroup__template__tracker__group_html_a157d2a73734b6661b70a341edc096396"><div class="ttname"><a href="group__template__tracker__group.html#a157d2a73734b6661b70a341edc096396">dwTemplateTrackerParameters::imageHeight</a></div><div class="ttdeci">uint32_t imageHeight</div><div class="ttdoc">Height of the images that the tracker runs on.</div><div class="ttdef"><b>Definition:</b> <a href="TemplateTracker_8h_source.html#l00143">TemplateTracker.h:143</a></div></div>
<div class="ttc" id="agroup__template__tracker__group_html_a45fd8607e2a7f9f80946e29eca43702e"><div class="ttname"><a href="group__template__tracker__group.html#a45fd8607e2a7f9f80946e29eca43702e">dwTemplateArray::bboxes</a></div><div class="ttdeci">dwRectf * bboxes</div><div class="ttdoc">bounding box of each template.</div><div class="ttdef"><b>Definition:</b> <a href="TemplateTracker_8h_source.html#l00202">TemplateTracker.h:202</a></div></div>
<div class="ttc" id="agroup__template__tracker__group_html_a76c7fdedf5528129ececc6e4d771efe2"><div class="ttname"><a href="group__template__tracker__group.html#a76c7fdedf5528129ececc6e4d771efe2">dwTemplateArray::ages</a></div><div class="ttdeci">uint32_t * ages</div><div class="ttdoc">Age of each template.</div><div class="ttdef"><b>Definition:</b> <a href="TemplateTracker_8h_source.html#l00204">TemplateTracker.h:204</a></div></div>
<div class="ttc" id="agroup__template__tracker__group_html_a9921f16bf14763858ce5213fb476adce"><div class="ttname"><a href="group__template__tracker__group.html#a9921f16bf14763858ce5213fb476adce">dwTemplateTrackerParameters::imageWidth</a></div><div class="ttdeci">uint32_t imageWidth</div><div class="ttdoc">Width of the images that the tracker runs on.</div><div class="ttdef"><b>Definition:</b> <a href="TemplateTracker_8h_source.html#l00140">TemplateTracker.h:140</a></div></div>
<div class="ttc" id="agroup__template__tracker__group_html_aa48e0aac8ef2a870d1e4d55f92032338"><div class="ttname"><a href="group__template__tracker__group.html#aa48e0aac8ef2a870d1e4d55f92032338">dwTemplateTrackerParameters::validWidth</a></div><div class="ttdeci">float32_t validWidth</div><div class="ttdoc">Maximum valid template width, any templates with bbox.width &gt; validWidth will be killed after trackin...</div><div class="ttdef"><b>Definition:</b> <a href="TemplateTracker_8h_source.html#l00184">TemplateTracker.h:184</a></div></div>
<div class="ttc" id="agroup__template__tracker__group_html_aae768b1d32a3ff7005baecf5c2eee952"><div class="ttname"><a href="group__template__tracker__group.html#aae768b1d32a3ff7005baecf5c2eee952">dwTemplateArray::templateCount</a></div><div class="ttdeci">uint32_t * templateCount</div><div class="ttdoc">Total number of templates.</div><div class="ttdef"><b>Definition:</b> <a href="TemplateTracker_8h_source.html#l00208">TemplateTracker.h:208</a></div></div>
<div class="ttc" id="agroup__template__tracker__group_html_acbdef1f250ddb5592bd36a121ef46690"><div class="ttname"><a href="group__template__tracker__group.html#acbdef1f250ddb5592bd36a121ef46690">dwTemplateArray::statuses</a></div><div class="ttdeci">dwFeature2DStatus * statuses</div><div class="ttdoc">Status of each template.</div><div class="ttdef"><b>Definition:</b> <a href="TemplateTracker_8h_source.html#l00201">TemplateTracker.h:201</a></div></div>
<div class="ttc" id="agroup__template__tracker__group_html_ad3a23294c8fcacdafd1eee7817a827e8"><div class="ttname"><a href="group__template__tracker__group.html#ad3a23294c8fcacdafd1eee7817a827e8">dwTemplateTrackerParameters::validHeight</a></div><div class="ttdeci">float32_t validHeight</div><div class="ttdoc">Maximum valid template height, any templates with bbox.height &gt; validHeight will be killed after trac...</div><div class="ttdef"><b>Definition:</b> <a href="TemplateTracker_8h_source.html#l00189">TemplateTracker.h:189</a></div></div>
<div class="ttc" id="agroup__template__tracker__group_html_ga6b85492b84fee4c2b9a047c99798d5c7"><div class="ttname"><a href="group__template__tracker__group.html#ga6b85492b84fee4c2b9a047c99798d5c7">dwTemplateTracker_initDefaultParams</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwTemplateTracker_initDefaultParams(dwTemplateTrackerParameters *params)</div><div class="ttdoc">Initializes TemplateTracker parameters with default values.</div></div>
<div class="ttc" id="agroup__template__tracker__group_html_ga92984e4561a5c20a6ddcb4e61dbac4d6"><div class="ttname"><a href="group__template__tracker__group.html#ga92984e4561a5c20a6ddcb4e61dbac4d6">dwTemplateTracker_initialize</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwTemplateTracker_initialize(dwTemplateTrackerHandle_t *obj, const dwTemplateTrackerParameters *params, cudaStream_t stream, dwContextHandle_t context)</div><div class="ttdoc">Initialize the TemplateTracker module.</div></div>
<div class="ttc" id="agroup__template__tracker__group_html_ga9f208869ce65a235114a731ec5d25563"><div class="ttname"><a href="group__template__tracker__group.html#ga9f208869ce65a235114a731ec5d25563">dwTemplateTracker_release</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwTemplateTracker_release(dwTemplateTrackerHandle_t obj)</div><div class="ttdoc">Releases the TemplateTracker module.</div></div>
<div class="ttc" id="agroup__template__tracker__group_html_gacde7aa76553f9dcf09e7cb3bf86d7bc5"><div class="ttname"><a href="group__template__tracker__group.html#gacde7aa76553f9dcf09e7cb3bf86d7bc5">dwTemplateTracker_trackImage</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwTemplateTracker_trackImage(dwTemplateArray *templateArray, const dwImageCUDA *currentImage, const dwImageCUDA *previousImage, dwTemplateTrackerHandle_t obj)</div><div class="ttdoc">Track the templates in currentImage  .</div></div>
<div class="ttc" id="agroup__template__tracker__group_html_structdwTemplateArray"><div class="ttname"><a href="group__template__tracker__group.html#structdwTemplateArray">dwTemplateArray</a></div><div class="ttdef"><b>Definition:</b> <a href="TemplateTracker_8h_source.html#l00199">TemplateTracker.h:200</a></div></div>
<div class="ttc" id="agroup__template__tracker__group_html_structdwTemplateTrackerParameters"><div class="ttname"><a href="group__template__tracker__group.html#structdwTemplateTrackerParameters">dwTemplateTrackerParameters</a></div><div class="ttdoc">Configuration parameters for a dwTemplateTrackerIA.</div><div class="ttdef"><b>Definition:</b> <a href="TemplateTracker_8h_source.html#l00128">TemplateTracker.h:129</a></div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="pg_lanegraph"></a>
Lane Graph</h1>
<p >The APIs previously contained in <code>dw/world/LaneGraphProducer.h</code> are no longer available, while the data structures are now part of <code>LaneGraph.h</code>.</p>
<hr  />
<h1><a class="anchor" id="pg_lidaraccumulator"></a>
Lidar Accumulator</h1>
<p >The following API has been removed: </p><div class="fragment"><div class="line">dwStatus dwLidarAccumulator_hasFullSweepAvailable(bool* available, dwLidarAccumulatorHandle_t obj);</div>
</div><!-- fragment --><p ><code>dwLidarAccumulator_addPacket()</code> will return <code>DW_SUCCESS</code> if the full sweep is ready.</p>
<p >For more information see <a class="el" href="lidaraccumulator_mainsection.html">Lidar Accumulator (replaced with <code>dwPointCloudAccumulator</code>)</a>.</p>
<hr  />
<h1><a class="anchor" id="pg_maps"></a>
Maps</h1>
<p >The following APIs have been renamed:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Old name   </th><th class="markdownTableHeadNone">New name    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwMaps_transformLaneDividersToLocalLinesPerLocalLayout()   </td><td class="markdownTableBodyNone">dwMaps_transformLaneDividersToLocalLines()    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwMaps_transformRoadFeaturesToLocalLinesPerLocalLayout()   </td><td class="markdownTableBodyNone">dwMaps_transformRoadFeaturesToLocalLines()    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwMaps_computeBearing()   </td><td class="markdownTableBodyNone">dwMaps_computeBearingFromGeoPoints()    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwMaps_computeBearingFromRotMatrix()   </td><td class="markdownTableBodyNone">dwMaps_computeBearingFromRotation()    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwMaps_computeLocalToENUMatrix()   </td><td class="markdownTableBodyNone">dwMaps_computeRotationFromBearing()    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwMapTracker_updateCurrentPose()   </td><td class="markdownTableBodyNone">dwMapTracker_updateWithGlobalPose()   </td></tr>
</table>
<p >The following API has been removed: </p><div class="fragment"><div class="line">dwStatus dwMaps_transformLaneDividersToLocalLines(dwMapsLaneDividerLineBuffer* lineSegments,</div>
<div class="line">                                                 const dwMapsLaneDividerBuffer* laneDividers,</div>
<div class="line">                                                 const dwMapsGeoPoint* localOrigin,</div>
<div class="line">                                                 const dwMatrix3d* localToENURotation33,</div>
<div class="line">                                                 const dwMapsLocalBounds* bounds,</div>
<div class="line">                                                 const dwVector3f* directionFilterVector,</div>
<div class="line">                                                 float32_t directionFilterAngleRadian,</div>
<div class="line">                                                 bool ignoreLaneDirection);</div>
</div><!-- fragment --><p> dwMaps_transformLaneDividersToLocalLines() should be used instead.</p>
<hr  />
<h1><a class="anchor" id="pg_objectdetection"></a>
Object Detection</h1>
<p >The dwObjectDetector API has been simplified. The functions</p>
<ul>
<li><code>dwObjectDetector_inferDeviceAsync()</code></li>
<li><code>dwObjectDetector_interpretHost()</code></li>
<li><code>dwObjectDetector_getClusteredObjects()</code></li>
<li><code>dwObjectDetector_getRawDetections()</code></li>
<li><code>dwObjectDetector_bindInput()</code></li>
<li><code>dwObjectDetector_bindOutput()</code></li>
<li><code>dwObjectDetector_processDeviceAsync()</code></li>
<li><code>dwObjectDetector_processHost()</code></li>
</ul>
<p >have been removed in favor of <code>dwObjectDetector_detectObjects()</code>.</p>
<hr  />
<h1><a class="anchor" id="pg_objects"></a>
Objects</h1>
<p >The following data structures have been renamed:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Old name   </th><th class="markdownTableHeadNone">New name    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwObjectData   </td><td class="markdownTableBodyNone">dwObjectGeneric    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwObjectDataCamera   </td><td class="markdownTableBodyNone">dwObjectCamera    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwObjectDataRadar   </td><td class="markdownTableBodyNone">dwObjectRadar    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwObjectDataLidar   </td><td class="markdownTableBodyNone">dwObjectLidar    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwObjectDataFused   </td><td class="markdownTableBodyNone">dwObjectFused   </td></tr>
</table>
<p >dwObjectHandle_t has been removed and replaced with plain structs. In place of dwObjectHandleList, use dwObjectArray. Becase object handles are no longer part of the code base, the following APIs have been removed:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Removed APIs    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwStatus dwObject_createCamera(dwObjectHandle_t* handle, const dwObjectData* data, const dwObjectDataCamera* otherData)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwStatus dwObject_createRadar(dwObjectHandle_t* handle, const dwObjectData* data, const dwObjectDataRadar* otherData)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwStatus dwObject_createLidar(dwObjectHandle_t* handle, const dwObjectData* data, const dwObjectDataLidar* otherData)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwStatus dwObject_createFused(dwObjectHandle_t* handle, const dwObjectData* data, const dwObjectDataFused* otherData)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwStatus dwObject_destroy(dwObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwStatus dwObject_reset(dwObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwStatus dwObject_getData(dwObjectData* info, uint32_t index, dwConstObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwStatus dwObject_getDataCamera(dwObjectDataCamera* info, uint32_t index, dwConstObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwStatus dwObject_getDataRadar(dwObjectDataRadar* info, uint32_t index, dwConstObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwStatus dwObject_getDataLidar(dwObjectDataLidar* info, uint32_t index, dwConstObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwStatus dwObject_getDataFused(dwObjectDataFused* info, uint32_t index, dwConstObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwStatus dwObject_setData(const dwObjectData* info, uint32_t index, dwObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwStatus dwObject_setDataCamera(const dwObjectDataCamera* info, uint32_t index, dwObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwStatus dwObject_setDataRadar(const dwObjectDataRadar* info, uint32_t index, dwObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwStatus dwObject_setDataLidar(const dwObjectDataLidar* info, uint32_t index, dwObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwStatus dwObject_setDataFused(const dwObjectDataFused* info, uint32_t index, dwObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwStatus dwObject_addDataCamera(const dwObjectData* info, const dwObjectDataCamera* otherInfo, dwObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwStatus dwObject_addDataRadar(const dwObjectData* info, const dwObjectDataRadar* otherInfo, dwObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwStatus dwObject_addDataLidar(const dwObjectData* info, const dwObjectDataLidar* otherInfo, dwObjectHandle_t handle)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwStatus dwObject_addDataFused(const dwObjectData* info, const dwObjectDataFused* otherInfo, dwObjectHandle_t handle)   </td></tr>
</table>
<p >Because dwObjectHandle_t is no longer part of the code base, calling create to create an object is no longer necessary. For example, the old way of creating an object required calling:</p>
<div class="fragment"><div class="line">dwObjectHandle_t objHandle = <a class="code hl_define" href="group__core__types__group.html#ga6caa500e64263b826a1e242a20cc02cc">DW_NULL_HANDLE</a>;</div>
<div class="line">dwObjectData data{};</div>
<div class="line">dwObjectDataCamera cameraData{};</div>
<div class="line">dwObject_createCamera(&amp;objHandle, &amp;data, &amp;cameraData);</div>
<div class="ttc" id="agroup__core__types__group_html_ga6caa500e64263b826a1e242a20cc02cc"><div class="ttname"><a href="group__core__types__group.html#ga6caa500e64263b826a1e242a20cc02cc">DW_NULL_HANDLE</a></div><div class="ttdeci">#define DW_NULL_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="Types_8h_source.html#l00083">Types.h:83</a></div></div>
</div><!-- fragment --><p >The new way to do this is written as:</p>
<div class="fragment"><div class="line">dwObjectCamera obj{};</div>
</div><!-- fragment --><p >Object history is no longer stored as part of the object, but is now a separate history array: <code>dwObjectHistoryArray</code>. The old way to get a historical object from an object handle was:</p>
<div class="fragment"><div class="line">uint32_t historicalIndex = 10; <span class="comment">// Arbitrary historical index, 0 being the most recent</span></div>
<div class="line">dwObject_getData(&amp;data, historicalIndex, objHandle);</div>
</div><!-- fragment --><p> The new way to do this is written as:</p>
<div class="fragment"><div class="line">uint32_t historicalIndex = 10;</div>
<div class="line">uint32_t objectIndex = 0; <span class="comment">// This would be the index of the specific object in the history array</span></div>
<div class="line">dwObjectArray objArray{};</div>
<div class="line">...</div>
<div class="line">dwObjectCamera* objects = <span class="keyword">static_cast&lt;</span>dwObjectCamera*<span class="keyword">&gt;</span>(objArray.objects);</div>
<div class="line">objects[historicalIndex * objArray.maxObjectCount + objectIndex];</div>
</div><!-- fragment --><p >In order to add data to the history, you no longer call an API but use the indices into the objects array to insert into the history table.</p>
<p >Object arrays have also been introduced as <code>dwObjectArray</code>. These work very similarly to <code>dwObjectHistoryArray</code> except that it is a 1D contiguous array of objects.</p>
<hr  />
<h1><a class="anchor" id="pg_pcp"></a>
Point Cloud Processing</h1>
<p ><code>dwPointCloudMemoryType</code> has been replaced by the following data structure:</p><ul>
<li><a class="el" href="group__core__types__group.html#ga71b04af11695393d59ac9aca72f93023" title="Memory type definitions.">dwMemoryType</a></li>
</ul>
<p ><code>dwPointCloudRangeImage</code> structure has been removed. Range image creator now accepts <code>dwImageHandle_t</code> instead.</p>
<p >For more information see <a class="el" href="pointcloudprocessing_mainsection.html">Point Cloud Processing</a>.</p>
<hr  />
<h1><a class="anchor" id="pg_rigconfiguration"></a>
Rig Configuration</h1>
<p >The module <code>dwRigConfiguration</code> has been renamed <code>dwRig</code>.</p>
<ul>
<li>Header file has been renamed from <code>RigConfiguration.h</code> to <code><a class="el" href="Rig_8h.html" title="NVIDIA DriveWorks API: Rig Configuration">Rig.h</a></code>.</li>
<li>The object handles have been renamed to <code>dwRigHandle_t</code> and <code>dwConstRigHandle_t</code>, respectively.</li>
<li>The prefixes for all functions declared in <code><a class="el" href="Rig_8h.html" title="NVIDIA DriveWorks API: Rig Configuration">Rig.h</a></code> have been updated from <code>dwRigConfiguration</code> to <code>dwRig</code>.</li>
<li><code>dwRig_initializeCalibratedCamera</code> is now <code>dwCameraModel_initialize</code> in <code><a class="el" href="CameraModel_8h.html" title="NVIDIA DriveWorks API: Camera Methods">calibration/cameramodel/CameraModel.h</a></code>.</li>
</ul>
<hr  />
<h1><a class="anchor" id="pg_sfm"></a>
SFM</h1>
<ul>
<li>Feature status has been changed from <code>dwFeatureStatus</code> to <code>dwFeature2DStatus</code>.</li>
<li>Prototype for <code>dwReconstructor_compactWorldPoints</code> and <code>dwReconstructor_compactFeatureHistory</code> has changed. The input has changed from <code>const uint32_t* d_validIndexCount, const uint32_t* d_validIndexes, const uint32_t* d_invalidIndexCount, const uint32_t* d_invalidIndexes</code> to <code>const uint32_t* d_validIndexCount, const uint32_t* d_newToOldMap</code>, while <code>d_newToOldMap</code> is obtained with <code>dwFeature2DTracker_getNewToOldMap</code>.</li>
<li>Please refer to the "Working with SFM APIs" section in <a class="el" href="dwx_porting_guide_2_0.html#pg_imageprocessing">Image Processing</a> for how to work with new <code>dw_imageprocessing</code> APIs.</li>
</ul>
<p >For more information see <a class="el" href="sfm_mainsection.html">Structure from Motion (SFM)</a> and <a class="el" href="imageprocessing_features_mainsection.html">Features</a>.</p>
<hr  />
<h1><a class="anchor" id="pg_vehicleio"></a>
VehicleIO</h1>
<p >This release adds support for multiple simultanous VehicleIO backends, and the following changes are required:</p>
<ul>
<li><code><a class="el" href="group__VehicleIO__actuators__group.html#ga1a54f31ac20b623820ecced5c8b2abf6" title="Add CAN sensor handle and corresponding VehicleIO configuration ID.">dwVehicleIO_addCANSensor()</a></code> has to be called before send/consume operations.</li>
<li><a class="el" href="vehicleio_mainsection.html">VehicleIO</a> can automatically detect to which backend to send commands to, therefore <code>dwVehicleIO_sendVehicleCommand()</code> can be just be replaced with <code><a class="el" href="group__VehicleIO__actuators__group.html#ga712e2d206f68a963f6fee3dfe9e2372c" title="Send a vehicle command to the VehicleIO.">dwVehicleIO_sendCommand()</a></code>.</li>
<li>The same is not true when receiving messages and <code>dwVehicleIO_consume()</code> needs be replaced with <code><a class="el" href="group__VehicleIO__actuators__group.html#gadb4a97bea2caeb409b783d5e6d62d938" title="Parse a received event.">dwVehicleIO_consumeCANFrame()</a></code> with <code>sensorId</code> equal to the sensor added with <code><a class="el" href="group__VehicleIO__actuators__group.html#ga1a54f31ac20b623820ecced5c8b2abf6" title="Add CAN sensor handle and corresponding VehicleIO configuration ID.">dwVehicleIO_addCANSensor()</a></code>.</li>
</ul>
<p >For more information see <a class="el" href="vehicleio_mainsection.html">VehicleIO</a>.</p>
<hr  />
<h1><a class="anchor" id="pg_waitconditions"></a>
Wait Conditions</h1>
<p >The previous API header file <code>waitcondition/Classifier.h</code> has been split into <code>waitcondition/camera/TrafficLightSignClassifier.h</code> and <code>waitcondition/camera/TrafficLightSignClassifier_processPipeline.h</code>.</p>
<ul>
<li><code>dwObjectClassifierHandle_t</code> has been renamed to <code>dwTrafficLightSignClassifierHandle_t</code>.</li>
</ul>
<p >The following APIs have been renamed:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Old name   </th><th class="markdownTableHeadNone">New name    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwObjectClassifier_initializeFromLightNet(dwObjectClassifierHandle_t* obj, dwLightNetHandle_t dnn, dwContextHandle_t ctx)   </td><td class="markdownTableBodyNone">dwTrafficLightSignClassifier_initializeFromLightNet(dwTrafficLightSignClassifierHandle_t* obj, dwLightNetHandle_t dnn, dwContextHandle_t ctx)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwObjectClassifier_initializeFromSignNet(dwObjectClassifierHandle_t* obj, dwSignNetHandle_t dnn, dwContextHandle_t ctx)   </td><td class="markdownTableBodyNone">dwTrafficLightSignClassifier_initializeFromSignNet(dwTrafficLightSignClassifierHandle_t* obj, dwSignNetHandle_t dnn, dwContextHandle_t ctx)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwObjectClassifier_reset(dwObjectClassifierHandle_t obj)   </td><td class="markdownTableBodyNone">dwTrafficLightSignClassifier_reset(dwTrafficLightSignClassifierHandle_t obj)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwObjectClassifier_release(dwObjectClassifierHandle_t obj)   </td><td class="markdownTableBodyNone">dwTrafficLightSignClassifier_release(dwTrafficLightSignClassifierHandle_t obj)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwObjectClassifier_setCUDAStream(cudaStream_t stream, dwObjectClassifierHandle_t obj)   </td><td class="markdownTableBodyNone">dwTrafficLightSignClassifier_setCUDAStream(cudaStream_t stream, dwTrafficLightSignClassifierHandle_t obj)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwObjectClassifier_getCUDAStream(cudaStream_t* stream, dwObjectClassifierHandle_t obj)   </td><td class="markdownTableBodyNone">dwTrafficLightSignClassifier_getCUDAStream(cudaStream_t* stream, dwTrafficLightSignClassifierHandle_t obj)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwObjectClassifier_interpretHost(uint32_t numObjects, dwObjectClass type, dwObjectClassifierHandle_t obj)   </td><td class="markdownTableBodyNone">dwTrafficLightSignClassifier_interpretHost(uint32_t numObjects, dwObjectClass type, dwTrafficLightSignClassifierHandle_t obj)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dwObjectClassifier_inferDeviceAsync(const dwImageCUDA* const* imageArray, dwObject* objectList, uint32_t numObjects, dwObjectClass type, dwObjectClassifierHandle_t obj)   </td><td class="markdownTableBodyNone">dwTrafficLightSignClassifier_inferDeviceAsync(const dwImageCUDA* const* imageArray, dwObjectCamera* objectList, uint32_t numObjects, dwObjectClass type, dwTrafficLightSignClassifierHandle_t obj)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">dwObjectClassifier_getClassifiedObjects(dwObject* objectList, uint32_t numObjects, dwObjectClassifierHandle_t obj)   </td><td class="markdownTableBodyNone">dwTrafficLightSignClassifier_getClassifiedObjects(dwObjectCamera* objectList, uint32_t numObjects, dwTrafficLightSignClassifierHandle_t obj)   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">
        Advance Information | Subject to Change |
        Prepared and Provided under NDA | Generated by NVIDIA |
        PR-08397-V5.0
      </li>
     </ul>
  </div>
</body>
</html>
