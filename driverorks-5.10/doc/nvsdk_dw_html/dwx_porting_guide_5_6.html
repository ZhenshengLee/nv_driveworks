<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
 * Copyright (c) 2009-2014 NVIDIA CORPORATION.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
-->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<title>DriveWorks SDK Reference: Porting Guide from SDK 5.4 to SDK 5.6</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="Nvidia.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="reverb-search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="nv.css" rel="stylesheet" type="text/css" />
<link href="nvdwx.css" rel="stylesheet" type="text/css"/>
<style>
 body {
 background-position: 350px 150px;
 background-image: url(watermark.png);
 background-repeat: no-repeat;
 background-attachment: fixed;
 }
 </style>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table width="99%" border="0" cellspacing="1" cellpadding="1">
  <tbody>
    <tr valign="middle">
      <td rowspan="2" height="44" width="19%">
        <div>
            <a id="nv-logo" href="https://www.nvidia.com/"></a>
        </div>
      <td width="81%" height="44">
        <div style="text-align:right; font-weight: bold; font-size:20px"> <br/>DriveWorks SDK Reference </div>
        <div style="text-align:right">
        5.10.87 Release <br/> For Test and Development only <br/> <br/> </div>
    </td>
  </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dwx_porting_guide_5_6.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Porting Guide from SDK 5.4 to SDK 5.6 </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#pg_pyramid_5_6">Pyramid</a></li>
<li class="level1"><a href="#pg_featuredetector_5_4">FeatureDetector</a></li>
<li class="level1"><a href="#pg_calibration-engine_5_6">Calibration Engine</a></li>
<li class="level1"><a href="#pg_egomotion_5_6">Egomotion</a></li>
<li class="level1"><a href="#pg_featurelist_5_6">Feature List</a></li>
<li class="level1"><a href="#pg_templatetracker_5_6">Template Tracker</a></li>
<li class="level1"><a href="#pg_image_5_6">Image</a></li>
</ul>
</div>
<div class="textblock"><p >This document will help you port your applications from DriveWorks SDK 5.4 to DriveWorks SDK 5.6.</p>
<hr  />
<h1><a class="anchor" id="pg_pyramid_5_6"></a>
Pyramid</h1>
<p >Following APIs have been modified:</p><ul>
<li><code>dwPyramid_createFromProperties()</code> changes the input parameter from <code>dwPyramidImageProperties</code> to <code>dwPyramidImageProperties const*</code>.</li>
</ul>
<hr  />
<h1><a class="anchor" id="pg_featuredetector_5_4"></a>
FeatureDetector</h1>
<p >This release moved the following headers:</p><ul>
<li><code>dw/imageprocesssing/features/FeatureDetector.h</code> to <code>dw/imageprocesssing/featuredetector/FeatureDetector.h</code></li>
</ul>
<hr  />
<h1><a class="anchor" id="pg_calibration-engine_5_6"></a>
Calibration Engine</h1>
<p >Following APIs have been added:</p><ul>
<li><code>dwCalibrationEngine_addVehicleIONonSafetyState</code></li>
<li><code>dwCalibrationEngine_addVehicleIOActuationFeedback</code></li>
</ul>
<p >Following API has been deprecated:</p><ul>
<li><code>dwCalibrationEngine_addVehicleIOState</code>: Use the newly added <code>dwCalibrationEngine_addVehicleIONonSafetyState</code> and <code>dwCalibrationEngine_addVehicleIOActuationFeedback</code> instead.</li>
</ul>
<hr  />
<h1><a class="anchor" id="pg_egomotion_5_6"></a>
Egomotion</h1>
<p >The behavior of the follow APIs have changed:</p><ul>
<li><code>dwEgomotion_initParamsFromRig</code>, <code>dwEgomotion_initParamsFromRigByIndex</code>: use DW_EGOMOTION_REAR_WHEEL_SPEED by default, was previously DW_EGOMOTION_FRONT_SPEED.</li>
</ul>
<hr  />
<h1><a class="anchor" id="pg_featurelist_5_6"></a>
Feature List</h1>
<ul>
<li>Updated <code>dwFeatureArray_reset</code> and <code>dwFeatureHistoryArray_reset</code> APIs to take an extra input argument <code>stream</code> to specify the CUDA stream used to reset the array.</li>
</ul>
<hr  />
<h1><a class="anchor" id="pg_templatetracker_5_6"></a>
Template Tracker</h1>
<ul>
<li>Updated <code>dwTemplateArray_reset</code> API to take an extra input argument <code>stream</code> to specify the CUDA stream used to reset the array.</li>
</ul>
<h1><a class="anchor" id="pg_image_5_6"></a>
Image</h1>
<p >All images created have NvSci backing store on drive platform unless pointed out by a warning "Allocation of NvSci Backing Store failed; skipping setup". See <code>dwImageFormat</code> for info on which format is not NvSci backed. If an image is NvSci backed, they can be streamed to other types free of processing or copy.</p>
<p >Following APIs have been modified:</p><ul>
<li><code><a class="el" href="group__image__group.html#ga3adf4cff0610cd3a5b0a31d0152e706e" title="Converts CUDA or NvMedia images by copying into an output image, following the properties in the outp...">dwImage_copyConvert()</a></code> changes the functionality on drive platform with DW_IMAGE_NVMEDIA input. Since NvMediaImage has been deprecated, NvMedia2D functionality for conversion on VIC unit has been moved under <code>dwImageTransformation</code>. Inputting DW_IMAGE_NVMEDIA to <code><a class="el" href="group__image__group.html#ga3adf4cff0610cd3a5b0a31d0152e706e" title="Converts CUDA or NvMedia images by copying into an output image, following the properties in the outp...">dwImage_copyConvert()</a></code> will switch to CUDA conversion silently. If VIC is intended to be used, see <code>dwImageTransformation</code> changes in image processing.</li>
</ul>
<p >Following API has been deprecated:</p><ul>
<li><code><a class="el" href="group__image__group.html#structdwImageMetaData" title="Additional meta information stored with each image.">dwImageMetaData</a></code>: Following attributes have been moved: msbPosition moved to rawProperties in <a class="el" href="group__image__group.html#structdwImageMetaData" title="Additional meta information stored with each image.">dwImageMetaData</a>, exposureTime/analogGain/conversionGain/digitalGain/wbGain moved to sensorStatistics in <a class="el" href="group__image__group.html#structdwImageMetaData" title="Additional meta information stored with each image.">dwImageMetaData</a></li>
<li><code><a class="el" href="group__image__group.html#structdwImageNvMedia" title="Defines an NvMedia image.">dwImageNvMedia</a></code>: Field "img" has been replaced with imgBuf. The typs is now NvSciBufObj abased on NvSci library as NvMediaImage has been completely deprecated in PDK 6.0.4.0</li>
<li><code>dwImage_createAndBindNvMedia</code>: Removed as NvMediaImage has been completely deprecated in PDK 6.0.4.0</li>
</ul>
<hr  />
<h1><a class="anchor" id="pg_image_5_6"></a>
Image</h1>
<p >Following APIs have been introduced:</p><ul>
<li><code><a class="el" href="group__imagetransformation__group.html#gaaf5159d135d8089ed589c32616ead91e" title="Append the allocation attribute such that the images created of type DW_IMAGE_NVMEDIA can be fed to d...">dwImageTransformation_appendAllocationAttributes()</a></code> appends allocation attributes needed by NvMedia2D to use the input/output image with VIC engine. The <a class="el" href="group__image__group.html#structdwImageProperties" title="Defines the properties of the image.">dwImageProperties</a> updated with this can be used to create the images that would work with dwImageTransformation with NvMedia2D. Note this would happen only if the input/output images are DW_IMAGE_NVMEDIA type.</li>
<li><code><a class="el" href="group__rectifier__group.html#ga8fc5ae4ea4f09b91f6b3eb9089d0a0c3" title="Append the allocation attribute such that the images created of type DW_IMAGE_NVMEDIA can be fed to d...">dwRectifier_appendAllocationAttributes()</a></code> appends allocation attributes needed by NvMediaLDC to use the input/output image with VIC engine. The <a class="el" href="group__image__group.html#structdwImageProperties" title="Defines the properties of the image.">dwImageProperties</a> updated with this can be used to create the images that would work with dwRectifier with NvMediaLDC. Note this would happen only if the input/output images are DW_IMAGE_NVMEDIA type.</li>
</ul>
<p >Following APIs have been modified:</p><ul>
<li><code><a class="el" href="group__imagetransformation__group.html#ga833410d7b17d00577b7378e08f17f353" title="Resizes the input image subregion and copies the result into the previously allocated output image,...">dwImageTransformation_copy()</a></code> Inputting DW_IMAGE_NVMEDIA leads to using NvSci based NvMedia2D, which requires the image to have been created with attributes from <code>dwImageTransformation_appendAllocationAttributes</code></li>
<li><code><a class="el" href="group__rectifier__group.html#gaa7fb9460b4870502fd43e905cef3f570" title="Warps the image from the input camera model to the model of the output camera using CUDA on the GPU.">dwRectifier_warp()</a></code> Inputting DW_IMAGE_NVMEDIA leads to using NvSci based NvMediaLDC, which requires the image to have been created with attributes from <code>dwRectifier_appendAllocationAttributes</code></li>
</ul>
<hr  />
<h1><a class="anchor" id="pg_image_5_6"></a>
Image</h1>
<p >Following APIs have been introduced:</p><ul>
<li><code><a class="el" href="group__camera__group.html#ga1f7157110ad273f9a9b1ba7bdf66dd72" title="Append the allocation attribute such that images allocated by the application and given to the camera...">dwSensorCamera_appendAllocationAttributes()</a></code> appends allocation attributes needed by NvMediaIDE/NvSIPL to use the input/output image with NvMediaIDE/ISP engine. The <a class="el" href="group__image__group.html#structdwImageProperties" title="Defines the properties of the image.">dwImageProperties</a> updated with this can be used to create the images that would work with camera.gmsl or camera.virtual alongside other engines like VIC (see recent addition to dwImageTransformation and dwRectifier) or with dwChannel.</li>
<li><code><a class="el" href="group__camera__group.html#gab39db2d665a38c14c456f7a853f7538c" title="Sets a pool of image to be used as output by the camera layer.">dwSensorCamera_setImagePool()</a></code> sets the user images inside <code><a class="el" href="group__image__group.html#structdwImagePool" title="Specifies a pool of images.">dwImagePool</a></code> as camera's internal fifo. The images must have been created with attributes coming from <code>dwSensorCamera_appendAllocationAttributes</code> and other attributes from other engines if needed.</li>
<li><code><a class="el" href="group__camera__group.html#ga6cd6399b7ac5c8419f503f10db15fb1e" title="Enable the camera link This method enables a given link and, if reset is asserted,...">dwSensorCamera_enableLink()</a></code> enables a specific camera link for camera.gmsl. If the link is already running, it has no effect. Link is automatically disabled in case of a error signal from camera and can be reenabled (if possible) with this.</li>
<li><code><a class="el" href="group__camera__group.html#gac63e2718a3d3ff2f092f0c76f28bc81d" title="Disable the camera link This method should only be called after dwSensor_start() and before dwSensor_...">dwSensorCamera_disableLink()</a></code> disables a specific camera link.</li>
<li><code><a class="el" href="group__camera__group.html#ga4eaf9220c810a71adb5f78e5d6cfee12" title="Get EOF fence of the current camera frame according to the type of dwCameraOutputType.">dwSensorCamera_getEOFFence()</a></code> get EOF sync for external sync, see dwChannel</li>
<li><code><a class="el" href="group__camera__group.html#ga1d5993dec58b2bb915b5626236ca0207" title="Fill the sync attributes for the camera pipeline to signal EOF fences.">dwSensorCamera_fillSyncAttributes()</a></code> fill sync attributes to create external sync object, see dwChannel.</li>
<li><code><a class="el" href="group__camera__group.html#ga9e3ec4da5df4d2ff0fb709347496c813" title="Set the sync obj to which the camera pipeline will signal EOF fences.">dwSensorCamera_setSyncObject()</a></code> sets external sync object</li>
</ul>
<hr  />
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">
        Advance Information | Subject to Change |
        Prepared and Provided under NDA | Generated by NVIDIA |
        PR-08397-V5.0
      </li>
     </ul>
  </div>
</body>
</html>
