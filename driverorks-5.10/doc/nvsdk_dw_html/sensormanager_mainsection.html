<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
 * Copyright (c) 2009-2014 NVIDIA CORPORATION.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
-->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<title>DriveWorks SDK Reference: &lt;tt&gt;Grouping camera sensors&lt;/tt&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="Nvidia.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="reverb-search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="nv.css" rel="stylesheet" type="text/css" />
<link href="nvdwx.css" rel="stylesheet" type="text/css"/>
<style>
 body {
 background-position: 350px 150px;
 background-image: url(watermark.png);
 background-repeat: no-repeat;
 background-attachment: fixed;
 }
 </style>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table width="99%" border="0" cellspacing="1" cellpadding="1">
  <tbody>
    <tr valign="middle">
      <td rowspan="2" height="44" width="19%">
        <div>
            <a id="nv-logo" href="https://www.nvidia.com/"></a>
        </div>
      <td width="81%" height="44">
        <div style="text-align:right; font-weight: bold; font-size:20px"> <br/>DriveWorks SDK Reference </div>
        <div style="text-align:right">
        5.10.87 Release <br/> For Test and Development only <br/> <br/> </div>
    </td>
  </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('sensormanager_mainsection.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><code>Grouping camera sensors</code> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Data accessor for camera.</p>
<p >Special case as can be multisensor event. Frames from cameras related to single group will be stored here. Refer section for more information.</p>
<h1>About This Module</h1>
<p >Sensor Manager uses underlying SAL (Sensor Abstraction Layer) APIs to provide applications with a higher-level API to access sensor events. It is a thread-less module, whose purpose is to provide time-sorted stream of events from an aggregate set of sensors. Key features include:</p>
<ul>
<li>Configuration: instantiation of sensors based on JSON configuration data.</li>
<li>Sensor Event Access: strictly time-sorted event stream from all sensors in case of "virtual" sensors (i.e. sensor data playback from file); and weakly-sorted event stream from all sensors if running in live mode (with real sensors).</li>
</ul>
<p >Implementation details:</p>
<ul>
<li>Blocking poll operations with timeout support.</li>
<li>Support for multiple event consumers.</li>
</ul>
<h1>Sensor Abstraction Layer</h1>
<p >In general, the NVIDIA<sup>&reg;</sup> DriveWorks SAL implements sensor functionality into two modular layers:</p>
<ul>
<li>Device type: DriveWorks provides implementations for supported sensor interfaces (e.g. Radar, Lidar, Camera, etc.)</li>
<li>Device-specific decoder: handles parsing and interpretation of raw data for a given sensor model.</li>
</ul>
<p >In addition to the device decoders already implemented within the DriveWorks library, customers may implement additional device decoders using plug-in interfaces. The list of interfaces to be implemented is defined in an interface header file that is specific to sensor type. As part of application deployment, this pluggable interface is compiled as a shared object and loaded by DriveWorks at runtime.</p>
<p >The current API definition for the SAL can be found in the DriveWorks SDK documentation.</p>
<h1>Sensor Manager</h1>
<p >Sensor Manager is agnostic to specific sensor type, instead, it provides unified access to all types of sensors that are supported by SAL. Sensors instantiation is handled through the <code><a class="el" href="group__rig__configuration__group.html#ga69108a61f90f528053d6344ac49073f1" title="Handle representing the Rig interface.">dwRigHandle_t</a></code> (see <a class="el" href="rig_mainsection.html">Rig Configuration</a>). An example configuration file is shown below. This configuration defines a one-camera setup (ar0231 RCCB cameras), CAN bus, and a GPS sensor.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;rig&quot;</span>: {</div>
<div class="line">        <span class="stringliteral">&quot;sensors&quot;</span>: [</div>
<div class="line">            {</div>
<div class="line">                <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;camera:front:center:60fov&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;parameter&quot;</span>: <span class="stringliteral">&quot;camera-type=ar0231-rccb,camera-group=a,camera-count=1,camera-mask=0001,siblingIndex=0&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;properties&quot;</span>: {</div>
<div class="line">                    <span class="stringliteral">&quot;Model&quot;</span>: <span class="stringliteral">&quot;ftheta&quot;</span>,</div>
<div class="line">                    <span class="stringliteral">&quot;width&quot;</span>: <span class="stringliteral">&quot;1920&quot;</span>,</div>
<div class="line">                    <span class="stringliteral">&quot;height&quot;</span>: <span class="stringliteral">&quot;1208&quot;</span>,</div>
<div class="line">                    <span class="stringliteral">&quot;cx&quot;</span>: <span class="stringliteral">&quot;960&quot;</span>,</div>
<div class="line">                    <span class="stringliteral">&quot;cy&quot;</span>: <span class="stringliteral">&quot;604&quot;</span>,</div>
<div class="line">                    <span class="stringliteral">&quot;bw-poly&quot;</span>: <span class="stringliteral">&quot;0.0 0.000545421498827636 -1.6216719633103e-10 -4.64720492990289e-12 2.85224527762934e-16&quot;</span></div>
<div class="line">                },</div>
<div class="line">                <span class="stringliteral">&quot;protocol&quot;</span>: <span class="stringliteral">&quot;camera.gmsl&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;nominalSensor2Rig&quot;</span>: {</div>
<div class="line">                    <span class="stringliteral">&quot;quaternion&quot;</span>: [-0.502444, 0.507493, -0.497444, 0.492494],</div>
<div class="line">                    <span class="stringliteral">&quot;t&quot;</span>: [1.749, -0.1, 1.47]</div>
<div class="line">                },</div>
<div class="line">                <span class="stringliteral">&quot;sensor2Rig&quot;</span>: {</div>
<div class="line">                    <span class="stringliteral">&quot;quaternion&quot;</span>: [-0.502444, 0.507493, -0.497444, 0.492494],</div>
<div class="line">                    <span class="stringliteral">&quot;t&quot;</span>: [1.749, -0.1, 1.47]</div>
<div class="line">                }</div>
<div class="line">            },</div>
<div class="line">            {</div>
<div class="line">                <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;can:vehicle&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;nominalSensor2Rig&quot;</span>: { <span class="stringliteral">&quot;quaternion&quot;</span>: [ 0.0, 0.0, 0.0, 1.0 ],</div>
<div class="line">                                       <span class="stringliteral">&quot;t&quot;</span>: [ 0.0, 0.0, 0.0 ] },</div>
<div class="line">                <span class="stringliteral">&quot;parameter&quot;</span>: <span class="stringliteral">&quot;device=can0&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;properties&quot;</span>: null,</div>
<div class="line">                <span class="stringliteral">&quot;protocol&quot;</span>: <span class="stringliteral">&quot;can.socket&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;sensor2Rig&quot;</span>: { <span class="stringliteral">&quot;quaternion&quot;</span>: [ 0.0, 0.0, 0.0, 1.0 ],</div>
<div class="line">                                <span class="stringliteral">&quot;t&quot;</span>: [ 0.0, 0.0, 0.0 ] }</div>
<div class="line">            },</div>
<div class="line">            {</div>
<div class="line">                <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;gps:dataspeed&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;nominalSensor2Rig&quot;</span>: {</div>
<div class="line">                    <span class="stringliteral">&quot;quaternion&quot;</span>: [0.0, 0.0, 0.0, 1.0],</div>
<div class="line">                    <span class="stringliteral">&quot;t&quot;</span>: [-0.2, -0.1, 0.4]</div>
<div class="line">                },</div>
<div class="line">                <span class="stringliteral">&quot;parameter&quot;</span>: <span class="stringliteral">&quot;can-proto=can.socket,can-params=device=can0&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;properties&quot;</span>: null,</div>
<div class="line">                <span class="stringliteral">&quot;protocol&quot;</span>: <span class="stringliteral">&quot;gps.dataspeed&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;sensor2Rig&quot;</span>: {</div>
<div class="line">                    <span class="stringliteral">&quot;quaternion&quot;</span>: [0.0, 0.0, 0.0, 1.0],</div>
<div class="line">                    <span class="stringliteral">&quot;t&quot;</span>: [-0.2, -0.1, 0.4]</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        ],</div>
<div class="line">    },</div>
<div class="line">    <span class="stringliteral">&quot;version&quot;</span>: 2</div>
<div class="line">}</div>
</div><!-- fragment --><h1>Grouping camera sensors</h1>
<p >One of the features of the module is a grouping events from synchronized cameras with the ability to request them in scope with single acquiring call. In order to combine multiple cameras into a group, the user reflects this in configuration file. <code>camera-group</code> sensor parameter indicates to which named group camera should be refered. In the following example both cameras are assigned to the same group. Therefore, each acquired event will contain two frames, one for each camera.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;rig&quot;</span>: {</div>
<div class="line">        <span class="stringliteral">&quot;sensors&quot;</span>: [</div>
<div class="line">            {</div>
<div class="line">                <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;camera:front:center:60fov&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;parameter&quot;</span>: <span class="stringliteral">&quot;file=front_camera.mp4,camera-group=main_group&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;protocol&quot;</span>: <span class="stringliteral">&quot;camera.virtual&quot;</span></div>
<div class="line">            },</div>
<div class="line">            {</div>
<div class="line">                <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;camera:rear:center:60fov&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;parameter&quot;</span>: <span class="stringliteral">&quot;file=rear_camera.mp4,camera-group=main_group&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;protocol&quot;</span>: <span class="stringliteral">&quot;camera.virtual&quot;</span></div>
<div class="line">            },</div>
<div class="line">        ],</div>
<div class="line">    },</div>
<div class="line">    <span class="stringliteral">&quot;version&quot;</span>: 2</div>
<div class="line">}</div>
</div><!-- fragment --><p >If the user wants to split the events, it is enough to specify different names in <code>camera-group</code> parameter:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;rig&quot;</span>: {</div>
<div class="line">        <span class="stringliteral">&quot;sensors&quot;</span>: [</div>
<div class="line">            {</div>
<div class="line">                <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;camera:front:center:60fov&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;parameter&quot;</span>: <span class="stringliteral">&quot;file=front_camera.mp4,camera-group=separate-group-1&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;protocol&quot;</span>: <span class="stringliteral">&quot;camera.virtual&quot;</span></div>
<div class="line">            },</div>
<div class="line">            {</div>
<div class="line">                <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;camera:rear:center:60fov&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;parameter&quot;</span>: <span class="stringliteral">&quot;file=rear_camera.mp4,camera-group=separate-group-2&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;protocol&quot;</span>: <span class="stringliteral">&quot;camera.virtual&quot;</span></div>
<div class="line">            },</div>
<div class="line">        ],</div>
<div class="line">    },</div>
<div class="line">    <span class="stringliteral">&quot;version&quot;</span>: 2</div>
<div class="line">}</div>
</div><!-- fragment --><p >In this case acquired event will contain single frame from single camera with minimum timestamp.</p>
<p >It is assumed that all virtual cameras being processed by the module are synchronized. Therefore by default they all combined into a single group. That is, the first example is the same as the following:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;rig&quot;</span>: {</div>
<div class="line">        <span class="stringliteral">&quot;sensors&quot;</span>: [</div>
<div class="line">            {</div>
<div class="line">                <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;camera:front:center:60fov&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;parameter&quot;</span>: <span class="stringliteral">&quot;file=front_camera.mp4&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;protocol&quot;</span>: <span class="stringliteral">&quot;camera.virtual&quot;</span></div>
<div class="line">            },</div>
<div class="line">            {</div>
<div class="line">                <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;camera:rear:center:60fov&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;parameter&quot;</span>: <span class="stringliteral">&quot;file=rear_camera.mp4&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;protocol&quot;</span>: <span class="stringliteral">&quot;camera.virtual&quot;</span></div>
<div class="line">            },</div>
<div class="line">        ],</div>
<div class="line">    },</div>
<div class="line">    <span class="stringliteral">&quot;version&quot;</span>: 2</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Input</h3>
<p >The following are the input requirements to the Sensor Manager:</p>
<ul>
<li>All sensors used by the Sensor Manager (defined in a JSON configuration file) must be supported by the Sensor Abstraction Layer (SAL).</li>
<li>All sensor data must be timestamped (as provided by SAL).</li>
</ul>
<h3>Output</h3>
<p >The only output requirements for the Sensor Manager is to provide the respective sensor data as specified at the given event when the function to acquire the next event is called.</p>
<h1>Relevant Tutorials</h1>
<ul>
<li><a class="el" href="sensormanager_usecase1.html">Sensor Manager Workflow</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">
        Advance Information | Subject to Change |
        Prepared and Provided under NDA | Generated by NVIDIA |
        PR-08397-V5.0
      </li>
     </ul>
  </div>
</body>
</html>
