<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
 * Copyright (c) 2009-2014 NVIDIA CORPORATION.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
-->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<title>DriveWorks SDK Reference: 2D Box Tracking</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="Nvidia.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="reverb-search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="nv.css" rel="stylesheet" type="text/css" />
<link href="nvdwx.css" rel="stylesheet" type="text/css"/>
<style>
 body {
 background-position: 350px 150px;
 background-image: url(watermark.png);
 background-repeat: no-repeat;
 background-attachment: fixed;
 }
 </style>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table width="99%" border="0" cellspacing="1" cellpadding="1">
  <tbody>
    <tr valign="middle">
      <td rowspan="2" height="44" width="19%">
        <div>
            <a id="nv-logo" href="https://www.nvidia.com/"></a>
        </div>
      <td width="81%" height="44">
        <div style="text-align:right; font-weight: bold; font-size:20px"> <br/>DriveWorks SDK Reference </div>
        <div style="text-align:right">
        5.10.87 Release <br/> For Test and Development only <br/> <br/> </div>
    </td>
  </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('imageprocessing_tracking_boxtracker2d_usecase1.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">2D Box Tracking </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h3>Initialization</h3>
<p >NVIDIA<sup>&reg;</sup> DriveWorks includes a sample pipeline demonstrating tracking of multiple cars across multiple video frames. The following summarizes the sample’s initialization steps:</p>
<div class="fragment"><div class="line">std::vector&lt;dwBox2D&gt; initBoxes;</div>
<div class="line"><a class="code hl_typedef" href="group__boxtracker__group.html#ga71e150539905b171fbb5725797fb1db9">dwBoxTracker2DHandle_t</a> boxTracker;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// CODE: initialize the Box Tracker parameter</span></div>
<div class="line"><span class="comment">// CODE: initialize the Box Tracker</span></div>
<div class="line"><span class="comment">// CODE: allocate initBoxes</span></div>
<div class="line"><span class="comment">// CODE: fill initBoxes with detected bounding boxes</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Feed initBoxes to Box Tracker</span></div>
<div class="line"><a class="code hl_function" href="group__boxtracker__group.html#ga49d6d3259e62b940f28f26c1035913fb">dwBoxTracker2D_add</a>(initBoxes.data(), initBoxes.size(), boxTracker);</div>
<div class="ttc" id="agroup__boxtracker__group_html_ga49d6d3259e62b940f28f26c1035913fb"><div class="ttname"><a href="group__boxtracker__group.html#ga49d6d3259e62b940f28f26c1035913fb">dwBoxTracker2D_add</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwBoxTracker2D_add(const dwBox2D *boxes, size_t num, dwBoxTracker2DHandle_t obj)</div><div class="ttdoc">Adds bounding boxes to the tracker.</div></div>
<div class="ttc" id="agroup__boxtracker__group_html_ga71e150539905b171fbb5725797fb1db9"><div class="ttname"><a href="group__boxtracker__group.html#ga71e150539905b171fbb5725797fb1db9">dwBoxTracker2DHandle_t</a></div><div class="ttdeci">struct dwBoxTracker2DObject * dwBoxTracker2DHandle_t</div><div class="ttdoc">Handle to a 2D object tracker.</div><div class="ttdef"><b>Definition:</b> <a href="BoxTracker2D_8h_source.html#l00064">BoxTracker2D.h:64</a></div></div>
</div><!-- fragment --><h3>Initializing the Box Tracking Parameters</h3>
<p >The DriveWorks <a class="el" href="group__boxtracker__group.html#gab27db1a6547543d1bec661badd86365c" title="Initializes 2D tracker parameters with default values.">dwBoxTracker2D_initParams()</a> function initializes the Box Tracker parameter with default values. You can revise the tracker parameters for their specific use case. For a definition of the <code><a class="el" href="group__boxtracker__group.html#structdwBoxTracker2DParams" title="Holds 2D object-tracker parameters.">dwBoxTracker2DParams()</a></code> fields, see DriveWorks API Reference.</p>
<h3>Initializing the Box Tracker</h3>
<p >After you have customized the tracking parameters, you must call the <code><a class="el" href="group__boxtracker__group.html#ga85efb68b494b147a76c25f1ba7c64db7" title="Initializes 2D bounding box tracker.">dwBoxTracker2D_initialize()</a></code> function to initialize the Box Tracker internal states and memory.</p>
<h3>Initializing Initial 2D Object Locations</h3>
<p >The Box Tracker module requires initial 2D object locations represented by 2D rectangles. You can feed detection results to the Box Tracker.</p>
<h3>Applying Clustering</h3>
<p >DriveWorks provides two methods for applying clustering to reduce redundant/adjacent “raw” detection results:</p>
<ul>
<li>With <code><a class="el" href="group__boxtracker__group.html#ga49d6d3259e62b940f28f26c1035913fb" title="Adds bounding boxes to the tracker.">dwBoxTracker2D_add()</a></code>, which is internal to the Box Tracker module</li>
<li>With <code><a class="el" href="group__boxtracker__group.html#gaf198460fd09b68a20c4764daf152a047" title="Adds pre-clustered bounding boxes to the tracker.">dwBoxTracker2D_addPreClustered()</a></code>, which applies clustering outside Box Tracker. This function assumes you first cluster the bounding boxes and add it to Box Tracker afterwards.</li>
<li>Manually specify the object locations to start with. For example:</li>
</ul>
<div class="fragment"><div class="line">int32_t x, y;</div>
<div class="line">int32_t width, height;</div>
<div class="line"><a class="code hl_struct" href="GeometricTypes_8h.html#structdwRect">dwBox2D</a> userBox;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// CODE: specify top left of the bounding box (x, y)</span></div>
<div class="line"><span class="comment">// CODE: specify width and height of the bounding box (width, height)</span></div>
<div class="line"> </div>
<div class="line">userBox.<a class="code hl_variable" href="GeometricTypes_8h.html#a5050affc677e920b657c602b070eae01">x</a> = x;</div>
<div class="line">userBox.<a class="code hl_variable" href="GeometricTypes_8h.html#af53311e30f2e73bbc552666a625286b2">y</a> = y;</div>
<div class="line"> </div>
<div class="line">userBox.<a class="code hl_variable" href="GeometricTypes_8h.html#a63e965ce02b17cbd99efa6997e6738d2">width</a>  = width;</div>
<div class="line">userBox.<a class="code hl_variable" href="GeometricTypes_8h.html#acd4d1d6b7fb58143f30ceb7c13d97a5b">height</a> = height;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__boxtracker__group.html#ga49d6d3259e62b940f28f26c1035913fb">dwBoxTracker2D_add</a>(userBox, ...);</div>
<div class="ttc" id="aGeometricTypes_8h_html_a5050affc677e920b657c602b070eae01"><div class="ttname"><a href="GeometricTypes_8h.html#a5050affc677e920b657c602b070eae01">dwRect::x</a></div><div class="ttdeci">int32_t x</div><div class="ttdef"><b>Definition:</b> <a href="GeometricTypes_8h_source.html#l00059">GeometricTypes.h:59</a></div></div>
<div class="ttc" id="aGeometricTypes_8h_html_a63e965ce02b17cbd99efa6997e6738d2"><div class="ttname"><a href="GeometricTypes_8h.html#a63e965ce02b17cbd99efa6997e6738d2">dwRect::width</a></div><div class="ttdeci">int32_t width</div><div class="ttdef"><b>Definition:</b> <a href="GeometricTypes_8h_source.html#l00065">GeometricTypes.h:65</a></div></div>
<div class="ttc" id="aGeometricTypes_8h_html_acd4d1d6b7fb58143f30ceb7c13d97a5b"><div class="ttname"><a href="GeometricTypes_8h.html#acd4d1d6b7fb58143f30ceb7c13d97a5b">dwRect::height</a></div><div class="ttdeci">int32_t height</div><div class="ttdef"><b>Definition:</b> <a href="GeometricTypes_8h_source.html#l00068">GeometricTypes.h:68</a></div></div>
<div class="ttc" id="aGeometricTypes_8h_html_af53311e30f2e73bbc552666a625286b2"><div class="ttname"><a href="GeometricTypes_8h.html#af53311e30f2e73bbc552666a625286b2">dwRect::y</a></div><div class="ttdeci">int32_t y</div><div class="ttdef"><b>Definition:</b> <a href="GeometricTypes_8h_source.html#l00062">GeometricTypes.h:62</a></div></div>
<div class="ttc" id="aGeometricTypes_8h_html_structdwRect"><div class="ttname"><a href="GeometricTypes_8h.html#structdwRect">dwRect</a></div><div class="ttdoc">Defines a rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="GeometricTypes_8h_source.html#l00056">GeometricTypes.h:57</a></div></div>
</div><!-- fragment --><h3>Process</h3>
<p >Given the initial bounding boxes, the Box Tracker module computes and associates 2D image features in adjacent image frames. The module uses such feature displacement to estimate the bounding box motion in the next frame. In the figure below, blue, and black crosses represent the successfully tracked 2D image features from frame N to frame N+1. Red cross failed to find association in frame N+1 is thus not used to update the red rectangle in frame N+1. For more information, see 2D Tracker Module in this chapter.</p>
<div class="image">
<img src="tracking_2d_box.png" alt=""/>
</div>
    <p >To predict the bounding box locations in the current frame using the tracked 2D image features, call the <code><a class="el" href="group__boxtracker__group.html#ga41c1b179cf3d3a987eef01ac274383f2" title="Tracks the bounding boxes.">dwBoxTracker2D_track()</a></code> function. Tracking features in multiple frames could suffer from failure association such that the tracked feature number decreases. To avoid such a degradation, the DriveWorks sample Box Tracker application detects 2D image feature for each frame, after previous frame features are tracked. In this way, there are new features available for the next frame to use. Once the 2D feature detection is complete, Box Tracker updates each tracked bounding box with the detected 2D image features. The DriveWorks <code><a class="el" href="group__boxtracker__group.html#ga7c85545b8679351c0aad6a567e4bcd37" title="Updates the feature locations of the 2D bounding boxes.">dwBoxTracker2D_updateFeatures()</a></code> function offers the update mechanism.</p>
<p >The Box Tracker sample shows how to use <code><a class="el" href="group__boxtracker__group.html#ga41c1b179cf3d3a987eef01ac274383f2" title="Tracks the bounding boxes.">dwBoxTracker2D_track()</a></code> and <code><a class="el" href="group__boxtracker__group.html#ga7c85545b8679351c0aad6a567e4bcd37" title="Updates the feature locations of the 2D bounding boxes.">dwBoxTracker2D_updateFeatures()</a></code>.</p>
<p >To obtain the tracked bounding boxes, call <code><a class="el" href="group__boxtracker__group.html#ga52d5fb06098e2aed4fe1b37f2e1cba24" title="Gets tracked bounding boxes and IDs.">dwBoxTracker2D_get()</a></code>. That function returns information such as:</p>
<ul>
<li>List of 2D rectangles and tracking states, i.e. confidence</li>
<li>Box ID</li>
<li>Total number of tracked frames</li>
<li>2d feature locations used to predict the bounding boxes</li>
</ul>
<h3>Additional Information</h3>
<p >2D Object tracking is used in <a class="el" href="dwx_object_detector_tracker_sample.html">Basic Object Detector and Tracker Sample</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">
        Advance Information | Subject to Change |
        Prepared and Provided under NDA | Generated by NVIDIA |
        PR-08397-V5.0
      </li>
     </ul>
  </div>
</body>
</html>
