<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
 * Copyright (c) 2009-2014 NVIDIA CORPORATION.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
-->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<title>DriveWorks SDK Reference: Camera Color Correction Workflow</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="Nvidia.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="reverb-search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="nv.css" rel="stylesheet" type="text/css" />
<link href="nvdwx.css" rel="stylesheet" type="text/css"/>
<style>
 body {
 background-position: 350px 150px;
 background-image: url(watermark.png);
 background-repeat: no-repeat;
 background-attachment: fixed;
 }
 </style>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table width="99%" border="0" cellspacing="1" cellpadding="1">
  <tbody>
    <tr valign="middle">
      <td rowspan="2" height="44" width="19%">
        <div>
            <a id="nv-logo" href="https://www.nvidia.com/"></a>
        </div>
      <td width="81%" height="44">
        <div style="text-align:right; font-weight: bold; font-size:20px"> <br/>DriveWorks SDK Reference </div>
        <div style="text-align:right">
        5.10.87 Release <br/> For Test and Development only <br/> <br/> </div>
    </td>
  </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('colorcorrection_usecase1.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Camera Color Correction Workflow </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Workflow</h1>
<p >The workflow of the color correction module is:</p>
<ul>
<li>Create a handle that points to the <code>rig.json</code> file, which is a file containing the camera's calibration data. With the handle, the module can extract the ground area from each camera view.</li>
</ul>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="group__rig__configuration__group.html#ga69108a61f90f528053d6344ac49073f1">dwRigHandle_t</a> rigConfig = <a class="code hl_define" href="group__core__types__group.html#ga6caa500e64263b826a1e242a20cc02cc">DW_NULL_HANDLE</a>;</div>
<div class="line"><a class="code hl_function" href="group__rig__configuration__group.html#gaba5ac271d4af54f1deece15ac3376bba">dwRig_initializeFromFile</a>(&amp;rigConfig, sdk, <span class="stringliteral">&quot;rig.json&quot;</span>);</div>
<div class="line"><a class="code hl_typedef" href="group__color__correct.html#gad32ce8ddc82d418472affd79340e9510">dwColorCorrectHandle_t</a> cc = <a class="code hl_define" href="group__core__types__group.html#ga6caa500e64263b826a1e242a20cc02cc">DW_NULL_HANDLE</a>;</div>
<div class="line"><a class="code hl_struct" href="group__color__correct.html#structdwColorCorrectParameters">dwColorCorrectParameters</a> ccParams{};</div>
<div class="line">ccParams.<a class="code hl_variable" href="group__color__correct.html#ad2cd9d099d222d7690400af27b75d682">cameraWidth</a> = g_imageWidth;</div>
<div class="line">ccParams.cameraHeight = g_imageHeight;</div>
<div class="line"><a class="code hl_function" href="group__color__correct.html#ga40125e2c9884d718e4771ea39ea66875">dwColorCorrect_initializeFromRig</a>(&amp;cc, sdk, rigConfig, &amp;ccParams); </div>
<div class="ttc" id="agroup__color__correct_html_ad2cd9d099d222d7690400af27b75d682"><div class="ttname"><a href="group__color__correct.html#ad2cd9d099d222d7690400af27b75d682">dwColorCorrectParameters::cameraWidth</a></div><div class="ttdeci">uint32_t cameraWidth</div><div class="ttdoc">Width of the images from camera to be corrected. Must be even.</div><div class="ttdef"><b>Definition:</b> <a href="ColorCorrection_8h_source.html#l00070">ColorCorrection.h:70</a></div></div>
<div class="ttc" id="agroup__color__correct_html_ga40125e2c9884d718e4771ea39ea66875"><div class="ttname"><a href="group__color__correct.html#ga40125e2c9884d718e4771ea39ea66875">dwColorCorrect_initializeFromRig</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwColorCorrect_initializeFromRig(dwColorCorrectHandle_t *obj, const dwColorCorrectParameters *parameters, dwRigHandle_t rigConfig, dwContextHandle_t ctx)</div><div class="ttdoc">Creates and initializes the color correction module using dwRig.</div></div>
<div class="ttc" id="agroup__color__correct_html_gad32ce8ddc82d418472affd79340e9510"><div class="ttname"><a href="group__color__correct.html#gad32ce8ddc82d418472affd79340e9510">dwColorCorrectHandle_t</a></div><div class="ttdeci">struct dwColorCorrectObject * dwColorCorrectHandle_t</div><div class="ttdoc">Handles representing the Color Correction interface.</div><div class="ttdef"><b>Definition:</b> <a href="ColorCorrection_8h_source.html#l00062">ColorCorrection.h:62</a></div></div>
<div class="ttc" id="agroup__color__correct_html_structdwColorCorrectParameters"><div class="ttname"><a href="group__color__correct.html#structdwColorCorrectParameters">dwColorCorrectParameters</a></div><div class="ttdoc">Configuration parameters of the color correction module.</div><div class="ttdef"><b>Definition:</b> <a href="ColorCorrection_8h_source.html#l00067">ColorCorrection.h:68</a></div></div>
<div class="ttc" id="agroup__core__types__group_html_ga6caa500e64263b826a1e242a20cc02cc"><div class="ttname"><a href="group__core__types__group.html#ga6caa500e64263b826a1e242a20cc02cc">DW_NULL_HANDLE</a></div><div class="ttdeci">#define DW_NULL_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="Types_8h_source.html#l00083">Types.h:83</a></div></div>
<div class="ttc" id="agroup__rig__configuration__group_html_ga69108a61f90f528053d6344ac49073f1"><div class="ttname"><a href="group__rig__configuration__group.html#ga69108a61f90f528053d6344ac49073f1">dwRigHandle_t</a></div><div class="ttdeci">struct dwRigObject * dwRigHandle_t</div><div class="ttdoc">Handle representing the Rig interface.</div><div class="ttdef"><b>Definition:</b> <a href="Rig_8h_source.html#l00070">Rig.h:70</a></div></div>
<div class="ttc" id="agroup__rig__configuration__group_html_gaba5ac271d4af54f1deece15ac3376bba"><div class="ttname"><a href="group__rig__configuration__group.html#gaba5ac271d4af54f1deece15ac3376bba">dwRig_initializeFromFile</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwRig_initializeFromFile(dwRigHandle_t *const obj, dwContextHandle_t const ctx, char8_t const *const configurationFile)</div><div class="ttdoc">Initializes the Rig Configuration module from a file.</div></div>
</div><!-- fragment --><ul>
<li>Send the master camera's image to the handle to extract its statistical color distribution data.</li>
</ul>
<div class="fragment"><div class="line"><a class="code hl_function" href="group__color__correct.html#gacf67f75b1f3b0b6ed926748bfbfeee05">dwColorCorrect_setReferenceCameraView</a>(frameCUDAyuv, cameraIdx, cc); </div>
<div class="ttc" id="agroup__color__correct_html_gacf67f75b1f3b0b6ed926748bfbfeee05"><div class="ttname"><a href="group__color__correct.html#gacf67f75b1f3b0b6ed926748bfbfeee05">dwColorCorrect_setReferenceCameraView</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwColorCorrect_setReferenceCameraView(const dwImageHandle_t referenceImage, uint32_t cameraIdx, dwColorCorrectHandle_t obj)</div><div class="ttdoc">This method adds reference view to color correction; the color of all the other views are corrected b...</div></div>
</div><!-- fragment --><ul>
<li>Send the images captured from the rest of the cameras to the handle. It calculates their statistical color data and matches them to the statistical color distribution of the image from the master camera. The input images shall be in the format of YUV420.</li>
</ul>
<div class="fragment"><div class="line"><a class="code hl_function" href="group__color__correct.html#ga343d177d4ebe15c69bd63c4a21bc5de7">dwColorCorrect_correctByReferenceView</a>(frameCUDAyuv, cameraIdx, 0.8f, cc);</div>
<div class="ttc" id="agroup__color__correct_html_ga343d177d4ebe15c69bd63c4a21bc5de7"><div class="ttname"><a href="group__color__correct.html#ga343d177d4ebe15c69bd63c4a21bc5de7">dwColorCorrect_correctByReferenceView</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwColorCorrect_correctByReferenceView(dwImageHandle_t image, uint32_t curCameraIdx, float32_t factor, dwColorCorrectHandle_t obj)</div><div class="ttdoc">Applies global color correction on the given image.</div></div>
</div><!-- fragment --><p >The third argument of the function is a factor that controls how much the master camera affects the current view. The range of input for the factor argument is [0.f to 1.f], where:</p><ul>
<li>0.f means that there is no correction. Instead, the function uses the current camera's own color.</li>
<li>1.f means 100% dependency on the master camera's color distribution.</li>
</ul>
<p >The default value is 0.8f.</p>
<p >For a demonstration of this workflow, see <a class="el" href="dwx_camera_color_correction_sample.html">Camera Color Correction Sample</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">
        Advance Information | Subject to Change |
        Prepared and Provided under NDA | Generated by NVIDIA |
        PR-08397-V5.0
      </li>
     </ul>
  </div>
</body>
</html>
