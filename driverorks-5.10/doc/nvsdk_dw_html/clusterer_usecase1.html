<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
 * Copyright (c) 2009-2014 NVIDIA CORPORATION.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
-->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<title>DriveWorks SDK Reference: Clusterer Workflow</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="Nvidia.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="reverb-search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="nv.css" rel="stylesheet" type="text/css" />
<link href="nvdwx.css" rel="stylesheet" type="text/css"/>
<style>
 body {
 background-position: 350px 150px;
 background-image: url(watermark.png);
 background-repeat: no-repeat;
 background-attachment: fixed;
 }
 </style>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table width="99%" border="0" cellspacing="1" cellpadding="1">
  <tbody>
    <tr valign="middle">
      <td rowspan="2" height="44" width="19%">
        <div>
            <a id="nv-logo" href="https://www.nvidia.com/"></a>
        </div>
      <td width="81%" height="44">
        <div style="text-align:right; font-weight: bold; font-size:20px"> <br/>DriveWorks SDK Reference </div>
        <div style="text-align:right">
        5.10.87 Release <br/> For Test and Development only <br/> <br/> </div>
    </td>
  </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('clusterer_usecase1.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Clusterer Workflow </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This code snippet demonstrates how the <a class="el" href="clusterer_mainsection.html">Clusterer</a> module is typically used. Note that error handling is left out for clarity.</p>
<h3>Initialization</h3>
<p >Initialize Clusterer parameters with default values.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__clusterer__group.html#structdwClustererParams">dwClustererParams</a> clusteringParams{};</div>
<div class="line"><a class="code hl_function" href="group__clusterer__group.html#ga0518e898032eaf83fc0cea2e6aa1118f">dwClusterer_initParams</a>(&amp;clusteringParams);</div>
<div class="ttc" id="agroup__clusterer__group_html_ga0518e898032eaf83fc0cea2e6aa1118f"><div class="ttname"><a href="group__clusterer__group.html#ga0518e898032eaf83fc0cea2e6aa1118f">dwClusterer_initParams</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwClusterer_initParams(dwClustererParams *const clustererParams)</div><div class="ttdoc">Initializes Clusterer parameters with default values.</div></div>
<div class="ttc" id="agroup__clusterer__group_html_structdwClustererParams"><div class="ttname"><a href="group__clusterer__group.html#structdwClustererParams">dwClustererParams</a></div><div class="ttdef"><b>Definition:</b> <a href="Clusterer_8h_source.html#l00057">Clusterer.h:58</a></div></div>
</div><!-- fragment --><p >The initialization of Clustering module requires the following clustering parameters to be defined.</p>
<div class="fragment"><div class="line"><span class="comment">// Set DBSCAN clustering parameters</span></div>
<div class="line">clusteringParams.maxSampleCount = 1000;</div>
</div><!-- fragment --><p >This parameter defines the maximum number of samples the Clustering module should expect as input at once. This allows the module to pre-allocate resources at initialization time.</p>
<div class="fragment"><div class="line">clusteringParams.epsilon = 0.2;</div>
</div><!-- fragment --><p >In Clustering module, there are bounding boxes which are defined to be “core” which represent the cluster. Epsilon is the maximum distance for a box to be considered an element of a cluster to the core of that cluster.</p>
<div class="fragment"><div class="line">clusteringParams.minSamples = 0;</div>
</div><!-- fragment --><p >Defines the minimum number of boxes required to form a dense region. minSamples and minSumOfWeights are checked conjunctively.</p>
<div class="fragment"><div class="line">clusteringParams.minSumOfWeights = 0.5;</div>
</div><!-- fragment --><p >Defines the minimum sum of weights required to form a dense region. minSamples and minSumOfWeights are checked conjunctively.</p>
<p >Initialize Clusterer module.</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="group__clusterer__group.html#ga3f7da7152554e4ec4f410b5afbe536eb">dwClustererHandle_t</a> clustererHandle = <a class="code hl_define" href="group__core__types__group.html#ga6caa500e64263b826a1e242a20cc02cc">DW_NULL_HANDLE</a>;</div>
<div class="line"><a class="code hl_function" href="group__clusterer__group.html#gad19e3349cab30c127b6811c88da8cd94">dwClusterer_initialize</a>(&amp;clustererHandle, &amp;clusteringParams, contextHandle);</div>
<div class="ttc" id="agroup__clusterer__group_html_ga3f7da7152554e4ec4f410b5afbe536eb"><div class="ttname"><a href="group__clusterer__group.html#ga3f7da7152554e4ec4f410b5afbe536eb">dwClustererHandle_t</a></div><div class="ttdeci">struct dwClustererObject * dwClustererHandle_t</div><div class="ttdoc">Handle to a Clusterer.</div><div class="ttdef"><b>Definition:</b> <a href="Clusterer_8h_source.html#l00074">Clusterer.h:74</a></div></div>
<div class="ttc" id="agroup__clusterer__group_html_gad19e3349cab30c127b6811c88da8cd94"><div class="ttname"><a href="group__clusterer__group.html#gad19e3349cab30c127b6811c88da8cd94">dwClusterer_initialize</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwClusterer_initialize(dwClustererHandle_t *const obj, dwClustererParams const *const clustererParams, dwContextHandle_t const ctx)</div><div class="ttdoc">Initializes a Clusterer module.</div></div>
<div class="ttc" id="agroup__core__types__group_html_ga6caa500e64263b826a1e242a20cc02cc"><div class="ttname"><a href="group__core__types__group.html#ga6caa500e64263b826a1e242a20cc02cc">DW_NULL_HANDLE</a></div><div class="ttdeci">#define DW_NULL_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="Types_8h_source.html#l00083">Types.h:83</a></div></div>
</div><!-- fragment --><p >Allocate a list of bounding boxes to store the inputs of clustering.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="GeometricTypes_8h.html#structdwRect">dwRect</a> *inputBoxes = <span class="keyword">new</span> <a class="code hl_struct" href="GeometricTypes_8h.html#structdwRect">dwRect</a>[clusteringParams.maxSampleCount];</div>
<div class="line"><a class="code hl_typedef" href="group__core__basictypes__group.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> *inputWeights = <span class="keyword">new</span> <a class="code hl_typedef" href="group__core__basictypes__group.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>[clusteringParams.maxSampleCount];</div>
<div class="line">uint32_t numInputBoxes = 0U;</div>
<div class="ttc" id="aGeometricTypes_8h_html_structdwRect"><div class="ttname"><a href="GeometricTypes_8h.html#structdwRect">dwRect</a></div><div class="ttdoc">Defines a rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="GeometricTypes_8h_source.html#l00056">GeometricTypes.h:57</a></div></div>
<div class="ttc" id="agroup__core__basictypes__group_html_ga4611b605e45ab401f02cab15c5e38715"><div class="ttname"><a href="group__core__basictypes__group.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a></div><div class="ttdeci">float float32_t</div><div class="ttdoc">Specifies POD types.</div><div class="ttdef"><b>Definition:</b> <a href="BasicTypes_8h_source.html#l00057">BasicTypes.h:57</a></div></div>
</div><!-- fragment --><p >Allocate a list of bounding boxes to store the outputs of clustering.</p>
<div class="fragment"><div class="line">int32_t *clusterLabels = <span class="keyword">new</span> int32_t[clusteringParams.maxSampleCount];</div>
<div class="line">uint32_t numClusterLabels = 0U;</div>
<div class="line">uint32_t numClusters = 0U;</div>
</div><!-- fragment --><p >Bind input &amp; output to the clusterer module.</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="group__clusterer__group.html#gaf644e1cba2009ecf04dc5062963f1e52">dwClusterer_bindInput</a>(&amp;inputBoxes, &amp;inputWeights, &amp;numInputBoxes, clustererHandle);</div>
<div class="ttc" id="agroup__clusterer__group_html_gaf644e1cba2009ecf04dc5062963f1e52"><div class="ttname"><a href="group__clusterer__group.html#gaf644e1cba2009ecf04dc5062963f1e52">dwClusterer_bindInput</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwClusterer_bindInput(dwRectf const *const *const boxes, float32_t const *const *const weights, uint32_t const *const boxesCount, dwClustererHandle_t const obj)</div><div class="ttdoc">Binds the input for clusterer.</div></div>
</div><!-- fragment --><p >This function enables binding input to the Clusterer module by providing the pointers to an array of bounding boxes, to an array of weights and to number of bounding boxes to be clustered. Once the input is bound via this function, the changes to the input will be reflected in the Clustering module.</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="group__clusterer__group.html#ga509fb39ba5ed6bc4a32f3ca3dfbea590">dwClusterer_bindOutput</a>(&amp;clusterLabels, &amp;numClusterLabels, &amp;numClusters, clustererHandle);</div>
<div class="ttc" id="agroup__clusterer__group_html_ga509fb39ba5ed6bc4a32f3ca3dfbea590"><div class="ttname"><a href="group__clusterer__group.html#ga509fb39ba5ed6bc4a32f3ca3dfbea590">dwClusterer_bindOutput</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwClusterer_bindOutput(int32_t **const clusterLabels, uint32_t *const clusterLabelsCount, uint32_t *const clusterCount, dwClustererHandle_t const obj)</div><div class="ttdoc">Bind the ouput of the clusterer to list of cluster labels.</div></div>
</div><!-- fragment --><p >This function enables binding output to the Clusterer module by providing the pointers to an array of cluster labels, to number of cluster labels and to number of clusters. Once the output is bound via this function, the content of the output will be updated by the Clusterer module every time <code><a class="el" href="group__clusterer__group.html#ga15017bba3ae5834c92b14f955248a1fb" title="Runs DBScan clusterer on given bounding boxes and returns labels for each bounding box in the same or...">dwClusterer_process()</a></code> is called.</p>
<p ><code>clusterLabels</code> parameter contains the label index for each input sample in <code>inputBoxes</code> parameter in <code><a class="el" href="group__clusterer__group.html#gaf644e1cba2009ecf04dc5062963f1e52" title="Binds the input for clusterer.">dwClusterer_bindInput()</a></code> in the same order. If a bounding box does not belong to a cluster, its <code>clusterLabel</code> is set to <code>-1</code>. Otherwise, clusters are labeled as [0, clusterCount).</p>
<p ><code>clusterLabelCount</code> is the number of labels in the array, and it is expected to be the same as <code>boxesCount</code> in <code>bindInput</code>.</p>
<p ><code>numClusters</code> is the number of clusters, i.e. number of unique labels except <code>-1</code>.</p>
<h3>Run clustering algorithm.</h3>
<div class="fragment"><div class="line"><span class="keywordflow">while</span> isRun()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Run a process to update inputBoxes</span></div>
<div class="line">    fillInputBoxes(inputBoxes, inputWeights, numInputBoxes);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Run clustering.</span></div>
<div class="line">    <span class="comment">// This call reads the input from the variables bound via </span></div>
<div class="line">    <span class="comment">// dwClusterer_bindInput() and updates the variables bound via dwClusterer_bindOutput().</span></div>
<div class="line">    <a class="code hl_function" href="group__clusterer__group.html#ga15017bba3ae5834c92b14f955248a1fb">dwClusterer_process</a>(clustererHandle);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Read clustering labels</span></div>
<div class="line">    <span class="keywordflow">for</span> (uint32_t boxIdx = 0U; boxIdx &lt; numInputBoxes; ++boxIdx)</div>
<div class="line">    {</div>
<div class="line">        int32_t label = clusterLabels[boxIdx];</div>
<div class="line">        <span class="keywordflow">if</span> (label &lt; 0)</div>
<div class="line">        {</div>
<div class="line">            std::cout &lt;&lt; <span class="stringliteral">&quot;Sample at &quot;</span> &lt;&lt; boxIdx &lt;&lt; <span class="stringliteral">&quot; does not belong to any cluster.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> </div>
<div class="line">        {</div>
<div class="line">            std::cout &lt;&lt; <span class="stringliteral">&quot;Sample at &quot;</span> &lt;&lt; boxIdx &lt;&lt; <span class="stringliteral">&quot; belongs to cluster with id &quot;</span> &lt;&lt; label;</div>
<div class="line">        }</div>
<div class="line">    }   </div>
<div class="line">}</div>
<div class="ttc" id="agroup__clusterer__group_html_ga15017bba3ae5834c92b14f955248a1fb"><div class="ttname"><a href="group__clusterer__group.html#ga15017bba3ae5834c92b14f955248a1fb">dwClusterer_process</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwClusterer_process(dwClustererHandle_t const obj)</div><div class="ttdoc">Runs DBScan clusterer on given bounding boxes and returns labels for each bounding box in the same or...</div></div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>Clustering is performed on CPU.</dd></dl>
<h3>Free previously allocated memory.</h3>
<div class="fragment"><div class="line"><span class="comment">// Free resources</span></div>
<div class="line"><span class="keyword">delete</span>[] inputBoxes;</div>
<div class="line"><span class="keyword">delete</span>[] inputWeights;</div>
<div class="line"><span class="keyword">delete</span>[] clusterLabels;</div>
<div class="line"><a class="code hl_function" href="group__clusterer__group.html#ga28b6fae7179645acffe6ea713e8c66d3">dwClusterer_release</a>(&amp;clustererHandle);</div>
<div class="ttc" id="agroup__clusterer__group_html_ga28b6fae7179645acffe6ea713e8c66d3"><div class="ttname"><a href="group__clusterer__group.html#ga28b6fae7179645acffe6ea713e8c66d3">dwClusterer_release</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwClusterer_release(dwClustererHandle_t const obj)</div><div class="ttdoc">Releases the Clusterer module.</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">
        Advance Information | Subject to Change |
        Prepared and Provided under NDA | Generated by NVIDIA |
        PR-08397-V5.0
      </li>
     </ul>
  </div>
</body>
</html>
