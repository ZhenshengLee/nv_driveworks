<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
 * Copyright (c) 2009-2014 NVIDIA CORPORATION.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
-->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<title>DriveWorks SDK Reference: Porting Guide from SDK 2.2 to SDK 3.0</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="Nvidia.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="reverb-search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="nv.css" rel="stylesheet" type="text/css" />
<link href="nvdwx.css" rel="stylesheet" type="text/css"/>
<style>
 body {
 background-position: 350px 150px;
 background-image: url(watermark.png);
 background-repeat: no-repeat;
 background-attachment: fixed;
 }
 </style>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table width="99%" border="0" cellspacing="1" cellpadding="1">
  <tbody>
    <tr valign="middle">
      <td rowspan="2" height="44" width="19%">
        <div>
            <a id="nv-logo" href="https://www.nvidia.com/"></a>
        </div>
      <td width="81%" height="44">
        <div style="text-align:right; font-weight: bold; font-size:20px"> <br/>DriveWorks SDK Reference </div>
        <div style="text-align:right">
        5.10.87 Release <br/> For Test and Development only <br/> <br/> </div>
    </td>
  </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dwx_porting_guide_3_0.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Porting Guide from SDK 2.2 to SDK 3.0 </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#dwks_and_dws_release">For NVIDIA DriveWorks and NVIDIA DRIVE Software Releases</a><ul><li class="level2"><a href="#pg3_calibration">Calibration</a></li>
<li class="level2"><a href="#pg3_core">Core</a></li>
<li class="level2"><a href="#pg3_dnn">DNN</a></li>
<li class="level2"><a href="#pg3_dataconditioner">DataConditioner Processing Pipeline</a></li>
<li class="level2"><a href="#pg3_egomotion">Egomotion</a></li>
<li class="level2"><a href="#pg3_image_processing">Image Processing</a><ul><li class="level3"><a href="#pg3_feature_det_track">Feature Detector and Feature Tracker</a></li>
</ul>
</li>
<li class="level2"><a href="#pg3_ipc">Inter Process Communication</a><ul><li class="level3"><a href="#pg3_socketclientserver">SocketClientServer</a></li>
</ul>
</li>
<li class="level2"><a href="#pg3_lidaraccumulator">Lidar Accumulator</a></li>
<li class="level2"><a href="#pg3_pointcloudprocessing">Point Cloud Processing</a></li>
<li class="level2"><a href="#pg3_rigfile">Rig File</a></li>
<li class="level2"><a href="#pg3_sal">Sensor Abstraction Layer</a><ul><li class="level3"><a href="#pg3_sensors">Sensors</a></li>
</ul>
</li>
<li class="level2"><a href="#pg3_vehicle_and_motion">Vehicle and Motion Actuation</a><ul><li class="level3"><a href="#pg3_rig">Rig</a></li>
<li class="level3"><a href="#pg3_vehicleio">VehicleIO</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#dws_release_only">For NVIDIA DRIVE Software Releases</a><ul><li class="level2"><a href="#pg3_driveperception">Perception</a><ul><li class="level3"><a href="#pg3_ligthsourcenet">LightSourceNet</a></li>
<li class="level3"><a href="#pg3_clearsightnet">ClearSightNet</a></li>
<li class="level3"><a href="#pg3_drivenet">DriveNet</a></li>
<li class="level3"><a href="#pg3_lanenet">LaneNet</a></li>
<li class="level3"><a href="#pg3_lightnet">LightNet</a></li>
<li class="level3"><a href="#pg3_mapnet">MapNet</a></li>
<li class="level3"><a href="#pg3_openroadnet">OpenRoadNet</a></li>
<li class="level3"><a href="#pg3_pathnet">PathNet</a></li>
<li class="level3"><a href="#pg3_signnet">SignNet</a></li>
<li class="level3"><a href="#pg3_waitnet">WaitNet</a></li>
</ul>
</li>
<li class="level2"><a href="#pg3_drivemapping">Mapping</a><ul><li class="level3"><a href="#pg_maps_3_0">Maps</a></li>
</ul>
</li>
<li class="level2"><a href="#pg3_driveplanning">Planning</a><ul><li class="level3"><a href="#pg3_laneplanner">Lane Planner</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p >This document will help you port your applications from DriveWorks SDK 2.2 to DriveWorks SDK 3.0.</p>
<h1><a class="anchor" id="dwks_and_dws_release"></a>
For NVIDIA DriveWorks and NVIDIA DRIVE Software Releases</h1>
<dl class="section note"><dt>Note</dt><dd>The following subsections are applicable for both <b>NVIDIA DriveWorks</b> and <b>NVIDIA DRIVE Software</b> releases.</dd></dl>
<hr  />
<h2><a class="anchor" id="pg3_calibration"></a>
Calibration</h2>
<p >This release has removed the capability to select <code>DW_CALIBRATION_CAMERA_SIGNAL_NONE</code> for camera self-calibration signal specification, and has added the new option to select <code><a class="el" href="group__calibration__camera__group.html#gga25dd4341af00bfb48e7996bf7778890aa8f539a7d7b5e48888fc09457e3d56f25" title="Activate supported signals based on properties of the camera sensor.">DW_CALIBRATION_CAMERA_SIGNAL_DEFAULT</a></code> instead, which will automatically select the calibration signals for a given camera based on it's properties. Specific signals can still be selected for the non-default case as before.</p>
<p >The lidar self-calibration API <code>dwCalibrationEngine_addLidarSweep()</code> has been replaced with the simpler <code><a class="el" href="group__calibration__group.html#gaaa18c8a6c68fb38d4091ada57167310e" title="Adds a lidar sweep to the calibration engine.">dwCalibrationEngine_addLidarPointCloud()</a></code> and now expects a CAN bus index to be passed at initialization with <code><a class="el" href="group__calibration__group.html#gaecfa665203e2f294601ad6932c36d10d" title="Initializes a lidar calibration routine designated by the sensor provided to the method.">dwCalibrationEngine_initializeLidar()</a></code>, so that <code><a class="el" href="group__VehicleIO__actuators__group.html#structdwVehicleIOState" title="The vehicle IO state data.">dwVehicleIOState</a></code> data from this CAN bus provided with the existing <code><a class="el" href="group__calibration__group.html#ga60d49bed712761472275c1451f2dc074" title="Adds vehicle IO state to calibration engine.">dwCalibrationEngine_addVehicleIOState()</a></code> API is consumed internally. Also, the previously deprecated <code>dwCalibrationEngine_addLidarPoses()</code> API has been removed, the more general <code><a class="el" href="group__calibration__group.html#ga06d838ca6ca94308251887b64b42b1a4" title="Adds lidar delta-poses and ego-motion delta poses to the calibration engine.">dwCalibrationEngine_addLidarPose()</a></code> API should be used instead.</p>
<p >The IMU self-calibration has been adjusted to not require a dedicated egomotion handle anymore. Instead, <code><a class="el" href="group__calibration__group.html#gae5bcba81cb650e02384e5439b6f601e8" title="Initializes an IMU calibration routine designated by the sensor provided to the method.">dwCalibrationEngine_initializeIMU()</a></code> requires the index of a CAN bus from the rig file and the calibration engine initialized by it must be passed <code><a class="el" href="group__VehicleIO__actuators__group.html#structdwVehicleIOState" title="The vehicle IO state data.">dwVehicleIOState</a></code> data from this CAN bus via <code><a class="el" href="group__calibration__group.html#ga60d49bed712761472275c1451f2dc074" title="Adds vehicle IO state to calibration engine.">dwCalibrationEngine_addVehicleIOState()</a></code>.</p>
<p >The radar self-calibration has been modified to remove the dependency on egomotion. The API <code><a class="el" href="group__calibration__group.html#gaf3719baa84372a4b0045ac87b438b173" title="Initializes a radar calibration routine designated by the sensor provided to the method.">dwCalibrationEngine_initializeRadar()</a></code> doesn't need an input of egomotion handle any more. Instead, it accepts a CAN bus index as an additional input, so that <code><a class="el" href="group__VehicleIO__actuators__group.html#structdwVehicleIOState" title="The vehicle IO state data.">dwVehicleIOState</a></code> data from this CAN bus is provided with the existing <code><a class="el" href="group__calibration__group.html#ga60d49bed712761472275c1451f2dc074" title="Adds vehicle IO state to calibration engine.">dwCalibrationEngine_addVehicleIOState()</a></code>.</p>
<hr  />
<h2><a class="anchor" id="pg3_core"></a>
Core</h2>
<p >This release has removed the following previously deprecated APIs:</p><ul>
<li><code>dwContext_getNvMediaDevice</code></li>
<li><code>dwContext_setNvMediaDevice</code></li>
</ul>
<p >and the <code>NvMediaDevice* nvmediaDevice</code> field of the <code><a class="el" href="group__core__context__group.html#structdwContextParameters" title="A set of parameters that is passed to the SDK to create the context.">dwContextParameters</a></code> struct.</p>
<hr  />
<h2><a class="anchor" id="pg3_dnn"></a>
DNN</h2>
<p >This release removes the following old APIs:</p><ul>
<li><code>dwDNN_initializeTensorRTFromFile</code></li>
<li><code>dwDNN_initializeTensorRTFromMemory</code></li>
</ul>
<p >And renames:</p><ul>
<li><code>dwDNN_initializeTensorRTFromFileNew</code> into <code><a class="el" href="group__dnn__group.html#ga437860c89763fc8e4b74efae2e0f4cbf" title="Creates and initializes a TensorRT Network from file.">dwDNN_initializeTensorRTFromFile()</a></code></li>
<li><code>dwDNN_initializeTensorRTFromMemoryNew</code> into <code><a class="el" href="group__dnn__group.html#ga4593649191f89a10751511df7fd22b7f" title="Creates and initializes a TensorRT Network from memory.">dwDNN_initializeTensorRTFromMemory()</a></code></li>
</ul>
<p >The signature of <code><a class="el" href="group__dnn__group.html#ga1e7f10c93a35cd1c22821871a76f957a" title="Runs inference pipeline on the given input.">dwDNN_infer()</a></code> has been modified, and it accepts now a list of <code><a class="el" href="group__dnntensor__group.html#ga80e8a0c8695a8fd7437fe413ec15f8ea" title="Handles representing Deep Neural Network interface.">dwDNNTensorHandle_t</a></code> as input and output. <code><a class="el" href="group__dnn__group.html#ga359b8cc1f9f74aa5799283f4dc8567cf" title="Forwards pass from all input blobs to all output blobs.">dwDNN_inferRaw()</a></code> has been introduced to replace the previous <code>dwDNN_infer</code> function that works with raw device pointers.</p>
<hr  />
<h2><a class="anchor" id="pg3_dataconditioner"></a>
DataConditioner Processing Pipeline</h2>
<p >This release changes the signature of following APIs from:</p><ul>
<li><code>dwStatus dwDataConditioner_setROI(const dwRect* roi, dwDataConditionerHandle_t obj)</code></li>
<li><code>dwStatus dwDataConditioner_getROI(dwRect* roi, dwDataConditionerHandle_t obj)</code></li>
</ul>
<p >to following form that take an additional parameter <code>inputIdx</code>:</p><ul>
<li><code>dwStatus dwDataConditioner_setROI(const dwRect* roi, uint32_t inputIdx, dwDataConditionerHandle_t obj)</code></li>
<li><code>dwStatus dwDataConditioner_getROI(dwRect* roi, uint32_t inputIdx, dwDataConditionerHandle_t obj)</code></li>
</ul>
<p ><code>inputIdx</code> corresponds to the index of image to set/get ROI. Previously all input images share one global ROI, after the change, each input image slot can have one unique ROI attached.</p>
<p >This release has renamed <code>dwDataConditioner_prepareData</code> to <code>dwDataConditioner_prepareDataRaw</code>.</p>
<hr  />
<h2><a class="anchor" id="pg3_egomotion"></a>
Egomotion</h2>
<p >This release has exposed the capability to choose gains for the simple version of the linear acceleration filter. It exposed <code>accelerationFilterTimeConst</code>, <code>processNoiseStdevSpeed</code>, <code>processNoiseStdevAcceleration</code>, <code>measurementNoiseStdevSpeed</code>, and <code>measurementNoiseStdevAcceleration</code>. These variables should all be set when <code>dwEgomotionLinearAccelerationFilterMode</code> is set to <code>DW_EGOMOTION_ACC_FILTER_SIMPLE</code>.</p>
<p >This release has removed the model-based acceleration filter (DW_EGOMOTION_ACC_FILTER_MODELBASED).</p>
<p >This release has modified the following API functions:</p><ul>
<li><code><a class="el" href="group__egomotion__group.html#gad29358fbcdcf3b7999da5a7a062f6397" title="Initialize egomotion parameters from a provided RigConfiguration.">dwEgomotion_initParamsFromRig()</a></code> (<code>gpsSensorName</code> has been removed)</li>
<li><code><a class="el" href="group__egomotion__group.html#gafaa5de5202a5d60d481ca0a332d78837" title="Same as dwEgomotion_initParamsFromRig however uses sensor indices in rigConfiguration instead of thei...">dwEgomotion_initParamsFromRigByIndex()</a></code> (<code>gpsSensorIdx</code> has been removed)</li>
</ul>
<p >This release has removed the following deprecated API functions:</p>
<ul>
<li><code>dwEgomotion_getHistoryEntry</code> (please use <code><a class="el" href="group__egomotion__group.html#ga73f1f70b1147dc39dbfb8039b929114d" title="Returns an element from the motion history that is currently available.">dwEgomotion_getHistoryElement()</a></code> instead)</li>
<li><code>dwEgomotion_applyRelativeUncertainty</code></li>
<li><code>dwEgomotion_addGPSMeasurement</code> (please use the <code>dwGlobalEgomotion</code> module instead)</li>
</ul>
<p >This release has removed the deprecated <code>estimationPeriod</code> parameter in <code><a class="el" href="group__egomotion__group.html#structdwEgomotionParameters" title="Holds initialization parameters for the Egomotion module.">dwEgomotionParameters</a></code>. Use the <code><a class="el" href="group__egomotion__group.html#a98c9bdc3f50f411b125e0ed604280e52" title="Automatically update state estimation.">dwEgomotionParameters.automaticUpdate</a></code> parameter going forward.</p>
<p >This release has removed the following GNSS-related parameters and flags:</p>
<ul>
<li>Configuration parameters:<ul>
<li><code>dwEgomotionSensorCharacteristics.gpsSamplingRateHz</code></li>
<li><code>dwEgomotionSensorCharacteristics.gpsHorizontalNoiseMeter</code></li>
<li><code>dwEgomotionSensorCharacteristics.gpsVerticalNoiseMeter</code></li>
<li><code>dwEgomotionParameters.gps2rig</code></li>
<li><code>dwEgomotionParameters.disableLocationFilter</code></li>
</ul>
</li>
<li>Validity flags:<ul>
<li><code>dwEgomotionDataField.DW_EGOMOTION_LOCATION_LON</code></li>
<li><code>dwEgomotionDataField.DW_EGOMOTION_LOCATION_LAT</code></li>
<li><code>dwEgomotionDataField.DW_EGOMOTION_LOCATION_ALT</code></li>
</ul>
</li>
<li>Types:<ul>
<li><code>dwEgomotionReferenceFrame</code></li>
</ul>
</li>
<li>Estimates:<ul>
<li><code>dwEgomotionResult.location</code></li>
<li><code>dwEgomotionResult.rotationFrame</code></li>
<li><code>dwEgomotionUncertainty.location</code></li>
</ul>
</li>
</ul>
<p >This release has added an interpolation and extrapolation limit; requests for interpolation over an interval larger than 5 seconds or extrapolation of more than 2.5 seconds into the future will return DW_NOT_AVAILABLE. Affected APIs:</p><ul>
<li><code><a class="el" href="group__egomotion__group.html#gafac84234562d24f9552b6c221e2882de" title="Estimates the state for a given timestamp.">dwEgomotion_estimate()</a></code></li>
<li><code><a class="el" href="group__egomotion__group.html#gac050d4dcb967ff23105d1deef9e74244" title="Computes the relative transformation between two timestamps and the uncertainty of this transform.">dwEgomotion_computeRelativeTransformation()</a></code></li>
</ul>
<hr  />
<h2><a class="anchor" id="pg3_image_processing"></a>
Image Processing</h2>
<h3><a class="anchor" id="pg3_feature_det_track"></a>
Feature Detector and Feature Tracker</h3>
<p ><code>dwConnectedComponents_labelImage</code> has been removed. Instead the following API should be used:</p>
<ul>
<li><code><a class="el" href="group__connected__components__group.html#gac45242b6f6291fc6eb99c08ed2fd61b5" title="Specifies input image to be processed.">dwConnectedComponents_bindInput()</a></code></li>
<li><code><a class="el" href="group__connected__components__group.html#gaa1dccc49ebbecfe5efedbf1296a6a037" title="Specifies output label image for ccl algorithm.">dwConnectedComponents_bindOutputLabels()</a></code></li>
<li><code><a class="el" href="group__connected__components__group.html#gab3182552411e17912f13ee0a0abd9382" title="Specifies threshold to binarize input image.">dwConnectedComponents_setThreshold()</a></code></li>
<li><code><a class="el" href="group__connected__components__group.html#ga713c25be2b25640dc61e86c070f3414c" title="Performs image labeling.">dwConnectedComponents_process()</a></code></li>
</ul>
<p >This release removes <code>dw_features</code> module, header file <code>dw/features/Features.h</code> should be replaced to <code><a class="el" href="FeatureList_8h.html" title="NVIDIA DriveWorks API: Feature Array and Feature History Array">dw/imageprocessing/features/FeatureList.h</a></code>, <code><a class="el" href="features_2FeatureDetector_8h.html">dw/imageprocessing/features/FeatureDetector.h</a></code> and <code>dw/imageprocessing/tracking/FeatureTracker.h</code> respectively.</p>
<p >Refer to <a class="el" href="dwx_porting_guide_2_0.html">Porting Guide from SDK 1.5 to SDK 2.0</a> for API changings.</p>
<hr  />
<h2><a class="anchor" id="pg3_ipc"></a>
Inter Process Communication</h2>
<h3><a class="anchor" id="pg3_socketclientserver"></a>
SocketClientServer</h3>
<p >This release has removed the following previously deprecated APIs:</p><ul>
<li><code>dwSocketConnection_send</code></li>
<li><code>dwSocketConnection_peek</code></li>
<li><code>dwSocketConnection_peekNonBlock</code></li>
<li><code>dwSocketConnection_recv</code></li>
<li><code>dwSocketConnection_recvNonBlock</code></li>
</ul>
<p >and renamed:</p><ul>
<li><code>dwSocketConnection_peekNew</code> to <code><a class="el" href="group__ipc__group.html#gaea2d32cc11915add0892b000f7afbb43" title="Peek at a message of a given length from the network connection (blocking within timeout period).">dwSocketConnection_peek()</a></code></li>
</ul>
<hr  />
<h2><a class="anchor" id="pg3_lidaraccumulator"></a>
Lidar Accumulator</h2>
<p ><code>dwLidarAccumulator</code> has been removed. Use <code>dwPointCloudAccumulator</code> from <code><a class="el" href="PointCloudAccumulator_8h.html" title="NVIDIA DriveWorks API: Point Cloud Accumulator">PointCloudAccumulator.h</a></code> instead.</p>
<hr  />
<h2><a class="anchor" id="pg3_pointcloudprocessing"></a>
Point Cloud Processing</h2>
<p >The following depracated items have been removed:</p><ul>
<li><code>xyzi</code> member of <code><a class="el" href="group__pointcloudprocessing__group.html#structdwPointCloud" title="Defines point cloud data structure.">dwPointCloud</a></code> structure</li>
<li><code>dwPointCloudAccumulator_bindInput</code></li>
<li><code>dwPointCloudStitcher_setMotionCompensation</code></li>
</ul>
<p >The old <code>dwPointCloudStitcher_bindInput</code> has been removed and <code>dwPointCloudStitcher_bindInputToSlot</code> has been renamed to <code><a class="el" href="group__pointcloudstitcher__group.html#gae1ebda81cdc9a66a14bff9eb600695c0" title="Binds input point cloud to the point cloud stitcher.">dwPointCloudStitcher_bindInput()</a></code>.</p>
<p >Refer to <a class="el" href="dwx_porting_guide_2_0.html">Porting Guide from SDK 1.5 to SDK 2.0</a> for more details.</p>
<hr  />
<h2><a class="anchor" id="pg3_rigfile"></a>
Rig File</h2>
<p >This release updates the rig files to <code>version 6</code>, converting the rig throttle and brake maps to a torque map. That is, instead of mapping the inputs to an output force it maps them to a torque value. The old output force values can be mapped to torque values by multiplying them by the nominal wheel radius. (Torque = Force x Nominal_Radius)</p>
<p >The fields [<code>throttleStateInput</code>, <code>throttleForceOutput</code>, <code>brakeStateInput</code>, <code>brakeForceOutput</code>] are changed to [<code>throttlePedalInput</code>, <code>throttleSpeedInput</code>, <code>throttleTorqueOutput</code>, <code>brakePedalInput</code>, <code>brakeTorqueOutput</code>] under the field <code>torqueLUT</code>.</p>
<p >The throttle map is also now a 2-d table, mapping a pedal position at a given speed to a torque value. As such, the <code>throttleTorqueOutput</code> table is of size (<code>throttlePedalInput</code> x <code>throttleSpeedInput</code>).</p>
<p >With <code>VERSION 6</code>, there is also an additional field <code>effectiveMass</code>, providing the effective mass due to vehicle rotational inertia (wheel rotation, engine, and other parts of the CVT drive-train) in kg.</p>
<p >DriveWorks SDK documentation contains examples for the new <code>version 6</code> rig files.</p>
<hr  />
<h2><a class="anchor" id="pg3_sal"></a>
Sensor Abstraction Layer</h2>
<h3><a class="anchor" id="pg3_sensors"></a>
Sensors</h3>
<p >This release removes the following previously deprecated APIs:</p>
<ul>
<li><code>dwSensor_getSeekTable</code></li>
<li><code>dwSensorSerializer_serializeImage</code></li>
<li><code>dwSensorSerializer_serializeImageAsync</code></li>
</ul>
<p >See wFrameCapture_appendFrame() and <a class="el" href="group__framecapture__group.html#gaef627cc4beb34de662f97777d63d66b0" title="Asynchronously append a dwImageHandle frame to the capture and it&#39;s serialized.">dwFrameCapture_appendFrameAsync()</a> to support of the use cases previously covered by <code>dwSensorSerializer_serializeImage</code> and <code>dwSensorSerializer_serializeImageAsync</code>.</p>
<p >This release also removes support for Pointgrey cameras, therefore camera.pointgrey protocol is deprecated.</p>
<p >This release removes support for dwSoftISP and the isp module all together. Raw cameras and raw videos are to be processed via Tegra ISP, automatically in place when <code>output-format</code> contains <code>processed</code> and a processed image is requested from the acquired frame handle.</p>
<p >The previously separate concepts of HV (Human Vision) using Tegra ISP and MV (Machine Vision) using dwSoftISP are now surpassed for a unified vision paradigm. DNN (refer to the specific DNNs documentation) are now compatible with the unified paradigm, unless specified otherwise</p>
<p >The equivalent sample common classes CameraRawFramePipeline and RawSimpleCamera are also removed as based on dwSoftISP.</p>
<p >All samples have been stripped of dwSoftISP.</p>
<p >Protocol <code>camera.gmsl</code> based on NvMedia's IPP has been moved to <code>camera.gmsl.ipp</code> and replaced in functionality by NvSIPL library, see <a class="el" href="camera_nvsipl_ipp_porting_guide.html">IPP to NvSIPL Porting Guide</a> for info</p>
<p >sample_camera_gmsl, sample_camera_gmsl_raw, sample_camera_multiple_gmsl and sample_camera_gmsl_custom are all combined into <code>sample_camera</code>. Refer to its README for more details</p>
<hr  />
<h2><a class="anchor" id="pg3_vehicle_and_motion"></a>
Vehicle and Motion Actuation</h2>
<h3><a class="anchor" id="pg3_rig"></a>
Rig</h3>
<p >This release has removed the API <code>dwRig_initializeFromStringWithPath</code> and integrated its functionality into <code><a class="el" href="group__rig__configuration__group.html#ga3ee2457cdd3df4047a608d4313b0ac8a" title="Initializes the Rig Configuration module from a string.">dwRig_initializeFromString()</a></code> with a new parameter <code>relativeBasePath</code>. If <code>relativeBasePath</code> is <code>NULL</code>, then the current working directory of the current process is used to initialize it. Existing calls to <code><a class="el" href="group__rig__configuration__group.html#ga3ee2457cdd3df4047a608d4313b0ac8a" title="Initializes the Rig Configuration module from a string.">dwRig_initializeFromString()</a></code> can be updated to pass <code>NULL</code> for <code>relativeBasePath</code>.</p>
<hr  />
<h3><a class="anchor" id="pg3_vehicleio"></a>
VehicleIO</h3>
<p >Following APIs have been removed:</p><ul>
<li><code>dwVehicleIO_consume</code></li>
<li><code>dwVehicleIO_sendVehicleCommand</code></li>
<li><code>dwVehicleIOCommand::steeringSpeed</code> has been replaced by <code><a class="el" href="group__VehicleIO__actuators__group.html#ac16c8d3244733ac9dc196b849f5ea2df" title="Maximum steering wheel speed of the turning command rad/s.">dwVehicleIOCommand::maxSteeringWheelSpeed</a></code> for specifying the maximum steering wheel speed.</li>
<li><code>dwVehicleIOCommand::steeringValid</code> has been replaced by <code><a class="el" href="group__VehicleIO__actuators__group.html#a167df916e9ba5c5efb01fd210c315e8d" title="True if setting steering wheel steering.">dwVehicleIOCommand::steeringWheelValid</a></code> for specifying the validity status of steering wheel-based control interface.</li>
<li><code>dwVehicleIOState::steeringCmd</code> has been replaced by <code><a class="el" href="group__VehicleIO__actuators__group.html#a50060754523646d6a51ed22ce6b61247" title="Last acknowledged steering wheel value from a command (-10.0 to 10.0 +- 0.01rad)">dwVehicleIOState::steeringWheelAngleCmd</a></code> for the steering wheel angle command.</li>
<li><code>dwVehicleIOState::steeringAngle</code> has been replaced by <code><a class="el" href="group__VehicleIO__actuators__group.html#af13c539551b27acccd87b9b869fde488" title="Same as inverseSteeringR described as an angle instead of radius [rad].">dwVehicleIOState::frontSteeringAngle</a></code> for the front wheel steering angle.</li>
</ul>
<hr  />
<h1><a class="anchor" id="dws_release_only"></a>
For NVIDIA DRIVE Software Releases</h1>
<dl class="section note"><dt>Note</dt><dd>The following subsections are applicable for <b>NVIDIA DRIVE Software</b> releases only.</dd></dl>
<hr  />
<h2><a class="anchor" id="pg3_driveperception"></a>
Perception</h2>
<h3><a class="anchor" id="pg3_ligthsourcenet"></a>
LightSourceNet</h3>
<p >AhbNet.h has been removed in favor of LightSourceNet.h.</p>
<hr  />
<h3><a class="anchor" id="pg3_clearsightnet"></a>
ClearSightNet</h3>
<p >ClearSightNet.h has been moved to <code>perception/safety/camera/</code>.</p>
<p ><code>dwClearSightNet_initDefaultParameters</code> now requires an additional argument: <code><a class="el" href="group__timer__group.html#gae81934046206143539721bbe30b08a1e">dwContextHandle_t</a></code>.</p>
<p >The context handle is required to determine the current GPU architecture so that the default precision is selected accordingly. If the architecture is <code>Pascal</code> and a DNN model for this architecture is available, the default precision is set to <code>FP32</code>. Otherwise, it is set to <code>FP16</code>.</p>
<hr  />
<h3><a class="anchor" id="pg3_drivenet"></a>
DriveNet</h3>
<p >DriveNet.h has been moved to <code>perception/object/camera/</code>.</p>
<p ><code>dwDriveNet_initDefaultParameters()</code> now requires an additional argument: <code><a class="el" href="group__timer__group.html#gae81934046206143539721bbe30b08a1e">dwContextHandle_t</a></code>.</p>
<p >The context handle is required to determine the current GPU architecture so that the default precision is selected accordingly. If the architecture is <code>Pascal</code> and a DNN model for this architecture is available, the default precision is set to <code>FP32</code>. Otherwise, it is set to <code>FP16</code>.</p>
<hr  />
<h3><a class="anchor" id="pg3_lanenet"></a>
LaneNet</h3>
<p >This module has been removed. Lane detection is now performed by <code>dwMapNet</code>.</p>
<hr  />
<h3><a class="anchor" id="pg3_lightnet"></a>
LightNet</h3>
<p >LightNet.h has been moved to <code>perception/object/camera/</code>.</p>
<p ><code>dwLightNet_initDefaultParameters</code> now requires an additional argument: <code><a class="el" href="group__timer__group.html#gae81934046206143539721bbe30b08a1e">dwContextHandle_t</a></code>.</p>
<p >The context handle is required to determine the current GPU architecture so that the default precision is selected accordingly. If the architecture is <code>Pascal</code> and a DNN model for this architecture is available, the default precision is set to <code>FP32</code>. Otherwise, it is set to <code>FP16</code>.</p>
<hr  />
<h3><a class="anchor" id="pg3_mapnet"></a>
MapNet</h3>
<p >MapNet.h has been moved to <code>perception/landmarks/camera/</code>.</p>
<p ><code>dwMapNet_initDefaultParamsNew</code> has been renamed to <code>dwMapNet_initDefaultParams()</code>, and now requires additional arguments: <code>dwMapNetType</code> and <code><a class="el" href="group__timer__group.html#gae81934046206143539721bbe30b08a1e">dwContextHandle_t</a></code>.</p>
<hr  />
<h3><a class="anchor" id="pg3_openroadnet"></a>
OpenRoadNet</h3>
<p >OpenRoadNet.h has been moved to <code>perception/freespace/camera/</code>.</p>
<p ><code>dwOpenRoadNet_initDefaultParameters</code> now requires an additional argument: <code><a class="el" href="group__timer__group.html#gae81934046206143539721bbe30b08a1e">dwContextHandle_t</a></code>.</p>
<p >The context handle is required to determine the current GPU architecture so that the default precision is selected accordingly. If the architecture is <code>Pascal</code> and a DNN model for this architecture is available, the default precision is set to <code>FP32</code>. Otherwise, it is set to <code>FP16</code>.</p>
<hr  />
<h3><a class="anchor" id="pg3_pathnet"></a>
PathNet</h3>
<p >PathNet.h has been moved to <code>perception/path/camera/</code>.</p>
<p ><code>dwPathNet_initDefaultParameters</code> now requires an additional argument: <code><a class="el" href="group__timer__group.html#gae81934046206143539721bbe30b08a1e">dwContextHandle_t</a></code>.</p>
<p >The context handle is required to determine the current GPU architecture so that the default precision is selected accordingly. If the architecture is <code>Pascal</code> and a DNN model for this architecture is available, the default precision is set to <code>FP32</code>. Otherwise, it is set to <code>FP16</code>.</p>
<hr  />
<h3><a class="anchor" id="pg3_signnet"></a>
SignNet</h3>
<p >SignNet.h has been moved to <code>perception/object/camera/</code>.</p>
<p ><code>dwSignNet_initDefaultParameters</code> now requires an additional argument: <code><a class="el" href="group__timer__group.html#gae81934046206143539721bbe30b08a1e">dwContextHandle_t</a></code>.</p>
<p >The context handle is required to determine the current GPU architecture so that the default precision is selected accordingly. If the architecture is <code>Pascal</code> and a DNN model for this architecture is available, the default precision is set to <code>FP32</code>. Otherwise, it is set to <code>FP16</code>.</p>
<hr  />
<h3><a class="anchor" id="pg3_waitnet"></a>
WaitNet</h3>
<p >WaitNet.h has been moved to <code>perception/object/camera/</code>.</p>
<p ><code>dwWaitNet_initDefaultParameters</code> now requires an additional argument: <code><a class="el" href="group__timer__group.html#gae81934046206143539721bbe30b08a1e">dwContextHandle_t</a></code>.</p>
<p >The context handle is required to determine the current GPU architecture so that the default precision is selected accordingly. If the architecture is <code>Pascal</code> and a DNN model for this architecture is available, the default precision is set to <code>FP32</code>. Otherwise, it is set to <code>FP16</code>.</p>
<hr  />
<h2><a class="anchor" id="pg3_drivemapping"></a>
Mapping</h2>
<h3><a class="anchor" id="pg_maps_3_0"></a>
Maps</h3>
<p >The object model for map access has been significantly refactored for release 3.0.</p>
<p >Instead of directly initializing a <code>dwMapHandle_t</code> with <code>dwMaps_initialize()</code> application should instead first initialize a  <code>dwMapProviderHandle_t</code>  instance and subsequently use the Map Provider API to request Maps appropriately for scenario-specific needs.</p>
<p >An important change to the programming model is that Map resources are no longer owned directly by the application. Maps are only "requested" from the Map Provider and must be released back to the Map Provider via <code>dwMapProvider_releaseMap()</code> instead of being directly released by <code>dwMaps_release()</code>.</p>
<p >Enum <code>dwMapsLaneGeometry</code> is changed to have mapping enum entry consistent with the 'side' concept at <code>dwSide</code> eg., DW_MAPS_LANE_GEOMETRY_LANEDIVIDERLEFT = DW_SIDE_LEFT.</p>
<p ><code>layers/ImageLayer.h</code> is now available and contains 3 modules:</p><ul>
<li>Image Layer module, to work with <code>dwMapsContentLayerType</code> of type <code>DW_MAPS_CONTENT_LAYER_TYPE_IMAGES</code><ul>
<li>Image layer types available defined in enum <code>dwMapsImageType</code></li>
<li><code>dwMapsImageLayer_checkType</code> to check if contentLayer is an image type.</li>
<li><code>dwMapsImageLayer_getProperties</code> to get a handle to <code>dwMapsImageLayerProperties</code> of loaded image layer</li>
</ul>
</li>
<li>Image Layer View module to extend the layer views of content layers<ul>
<li><code>dwMapsImageLayerView_getImageCount</code> get number of image layers in layer view</li>
<li><code>dwMapsImageLayerView_getLocalImages</code> get references to image layers from layer view into a buffer</li>
</ul>
</li>
<li>Maps Image Layer Storage module for loading and serving maps images<ul>
<li><code>dwMapsImageStorage_initialize</code> to create a maps image storage handle</li>
<li><code>dwMapsImageStorage_release</code> to release a maps image storage handle</li>
<li><code>dwMapsImageStorage_getMapsImage</code> to request a specific maps image with a road segment ID</li>
<li><code>dwMapsImageStorage_returnMapsImage</code> to release memory for a specific maps image</li>
<li><code>dwMapsImageStorage_getProperties</code> to get image properties of the images being served.</li>
</ul>
</li>
</ul>
<p >DriveWorks SDK documentation contains example for correct Map request and release code following the Map Provider programming model.</p>
<p >This release also replaces the <code>dwMapsLaneWaitCondition</code> structure with <code>dwMapsLaneWaitElement</code> structure. The structure had limitations in holding required information such as map rules, ego, contender lane information etc. The new wait element structures are more inline with world model wait element objects and contain more information.</p>
<p >The previous APIs <code>dwLanePlan_getLaneForNextWaitConditionAt()</code>, <code>dwLanePlan_getLaneForNextWaitCondition()</code> are not supported through direct API as the has changed to use via local map. The usage to get new wait elements is through the LocalMap interface <code>dwLocalMap_initialize()</code>, <code>dwLocalMap_bindOutput()</code>, <code>dwLocalMap_computeLaneGraphFromRelativePose()</code> and <code>dwLocalMap_bindWaitElementGroupsBuffer()</code>. Clients can process new wait elements ego lane graph information find the next wait element in the lane plan.</p>
<hr  />
<h2><a class="anchor" id="pg3_driveplanning"></a>
Planning</h2>
<h3><a class="anchor" id="pg3_laneplanner"></a>
Lane Planner</h3>
<p >The <code>dwLanePlanner_run()</code> function now accepts a list of target lane pointers instead of a target road segment. To get the same behavior, a list of pointers to the lanes in the road segment can be passed as target lanes: </p><div class="fragment"><div class="line">std::vector&lt;const dwMapsLane*&gt; targetLanes;</div>
<div class="line">for (uint32_t laneIdx = 0; laneIdx &lt; targetRS-&gt;laneCount; ++laneIdx)</div>
<div class="line">{</div>
<div class="line">    targetLanes.push_back(&amp;targetRoadSegment-&gt;lanes[laneIdx]);</div>
<div class="line">}</div>
<div class="line">dwLanePlanner_run(... , targetLanes.data(), static_cast&lt;uint32_t&gt;(targetLanes.size()), ...)</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">
        Advance Information | Subject to Change |
        Prepared and Provided under NDA | Generated by NVIDIA |
        PR-08397-V5.0
      </li>
     </ul>
  </div>
</body>
</html>
