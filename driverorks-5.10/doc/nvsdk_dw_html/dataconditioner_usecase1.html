<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
 * Copyright (c) 2009-2014 NVIDIA CORPORATION.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
-->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<title>DriveWorks SDK Reference: Data Conditioner Workflow</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="Nvidia.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="reverb-search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="nv.css" rel="stylesheet" type="text/css" />
<link href="nvdwx.css" rel="stylesheet" type="text/css"/>
<style>
 body {
 background-position: 350px 150px;
 background-image: url(watermark.png);
 background-repeat: no-repeat;
 background-attachment: fixed;
 }
 </style>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table width="99%" border="0" cellspacing="1" cellpadding="1">
  <tbody>
    <tr valign="middle">
      <td rowspan="2" height="44" width="19%">
        <div>
            <a id="nv-logo" href="https://www.nvidia.com/"></a>
        </div>
      <td width="81%" height="44">
        <div style="text-align:right; font-weight: bold; font-size:20px"> <br/>DriveWorks SDK Reference </div>
        <div style="text-align:right">
        5.10.87 Release <br/> For Test and Development only <br/> <br/> </div>
    </td>
  </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dataconditioner_usecase1.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Data Conditioner Workflow </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This code snipped shows how the Data Conditioner module is typically used. Note that error handling is left out for clarity.</p>
<h2>Initialization</h2>
<p >Initialize DataConditioner parameters with default values.</p>
<p >In order to initialize the Data Conditioner module, it is first required to initialize the Data Conditioner parameters</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="group__dataconditioner__group.html#structdwDataConditionerParams">dwDataConditionerParams</a> params{};</div>
<div class="line"><a class="code hl_enumeration" href="group__core__status__group.html#ga01e41060986cf4c0d618a8923846619b">dwStatus</a> <a class="code hl_function" href="group__dataconditioner__group.html#ga60261f905721540fccf340e3a86508ed">dwDataConditioner_initParams</a>(<a class="code hl_struct" href="group__dataconditioner__group.html#structdwDataConditionerParams">dwDataConditionerParams</a> &amp;params);</div>
<div class="ttc" id="agroup__core__status__group_html_ga01e41060986cf4c0d618a8923846619b"><div class="ttname"><a href="group__core__status__group.html#ga01e41060986cf4c0d618a8923846619b">dwStatus</a></div><div class="ttdeci">dwStatus</div><div class="ttdoc">Status definition.</div><div class="ttdef"><b>Definition:</b> <a href="Status_8h_source.html#l00173">Status.h:173</a></div></div>
<div class="ttc" id="agroup__dataconditioner__group_html_ga60261f905721540fccf340e3a86508ed"><div class="ttname"><a href="group__dataconditioner__group.html#ga60261f905721540fccf340e3a86508ed">dwDataConditioner_initParams</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwDataConditioner_initParams(dwDataConditionerParams *const dataConditionerParams)</div><div class="ttdoc">Initializes DataConditioner parameters with default values.</div></div>
<div class="ttc" id="agroup__dataconditioner__group_html_structdwDataConditionerParams"><div class="ttname"><a href="group__dataconditioner__group.html#structdwDataConditionerParams">dwDataConditionerParams</a></div><div class="ttdef"><b>Definition:</b> <a href="DataConditioner_8h_source.html#l00057">DataConditioner.h:58</a></div></div>
</div><!-- fragment --><p ><code><a class="el" href="group__dataconditioner__group.html#structdwDataConditionerParams">dwDataConditionerParams()</a></code> permits to set the following parameters:</p>
<ul>
<li>float32_t meanValue[<a class="el" href="group__image__group.html#gaed2f806fa881aaa95e0005d650715ec1">DW_MAX_IMAGE_PLANES</a>]: mean value to be subtracted from each input image pixel. Default is the 0-vector. This shall be used if the network has been trained with mean-centered data.</li>
<li><a class="el" href="group__image__group.html#structdwImageCUDA" title="Defines a CUDA image.">dwImageCUDA</a> *meanImage: mean image to be subtracted from each input image. meanImage is expected to be float16 or float32. The pixel format is required to be R or RGBA with interleaved channels. The dimensions of the mean image must meet the dimensions of the network input. Default is the null pointer. This is an alternative to meanValue, if a specific mean image is to be subtracted. Note: if both meanValue and meanImage are provided, both values are subtracted.</li>
<li>dwBool splitPlanes: flag to indicate whether the image is in interleaved (false) or planar (true) format. Default is false.</li>
<li>float32_t scaleCoefficient: Scale pixel intensities. Default is 1.0. It shall be used if the network has been trained with images whose pixel values has been scaled to a specified range, e.g., in [0, 1]. If scaleCoefficient is 1.0, the output pixel intensities are always ranged between [0,255], regardless of the input pixel intensity range.</li>
<li>dwBool ignoreAspectRatio: Indicates whether aspect ratio must be ignored during scaling operation. Default is false.</li>
<li>dwBool doPerPlaneMeanNormalization: Indicates whether per-plane mean normalization must be performed. If true, mean value is computed for each plane on the image and this value is subtracted from pixel intensities of the corresponding plane.</li>
</ul>
<p >Modify parameters as required by the network or by the application.</p>
<div class="fragment"><div class="line"><span class="comment">// Ignore aspect ratio of input image is to be scaled.</span></div>
<div class="line">params.ignoreAspectRatio = <span class="keyword">true</span>;</div>
<div class="line"><span class="comment">// Set mean value to {127.5, 127.5, 127.5}.</span></div>
<div class="line">params.meanValue[0] = 127.5;</div>
<div class="line">params.meanValue[1] = 127.5;</div>
<div class="line">params.meanValue[2] = 127.5;</div>
</div><!-- fragment --><p >Once the Data Conditioner parameters have been defined, the Data Conditioner object can be initialized. There are two ways to accomplish this:</p>
<div class="fragment"><div class="line"><a class="code hl_enumeration" href="group__core__status__group.html#ga01e41060986cf4c0d618a8923846619b">dwStatus</a> <a class="code hl_function" href="group__dataconditioner__group.html#ga37a4e535e0bcc9f8ef09d79d07fb8146">dwDataConditioner_initialize</a>(<a class="code hl_typedef" href="group__dataconditioner__group.html#ga67292ed5b708ad8a4730046f97a59fd9">dwDataConditionerHandle_t</a>* <span class="keyword">const</span> obj,</div>
<div class="line">                                     <a class="code hl_struct" href="group__core__types__group.html#structdwBlobSize">dwBlobSize</a> <span class="keyword">const</span>* <span class="keyword">const</span> networkInputBlobSize,</div>
<div class="line">                                     uint32_t <span class="keyword">const</span> maxNumImages,</div>
<div class="line">                                     <a class="code hl_struct" href="group__dataconditioner__group.html#structdwDataConditionerParams">dwDataConditionerParams</a> <span class="keyword">const</span>* <span class="keyword">const</span> dataConditionerParams,</div>
<div class="line">                                     cudaStream_t <span class="keyword">const</span> stream, <a class="code hl_typedef" href="group__core__context__group.html#gae81934046206143539721bbe30b08a1e">dwContextHandle_t</a> <span class="keyword">const</span> ctx);</div>
<div class="ttc" id="agroup__core__context__group_html_gae81934046206143539721bbe30b08a1e"><div class="ttname"><a href="group__core__context__group.html#gae81934046206143539721bbe30b08a1e">dwContextHandle_t</a></div><div class="ttdeci">struct dwContextObject * dwContextHandle_t</div><div class="ttdoc">Context handle.</div><div class="ttdef"><b>Definition:</b> <a href="Context_8h_source.html#l00083">Context.h:83</a></div></div>
<div class="ttc" id="agroup__core__types__group_html_structdwBlobSize"><div class="ttname"><a href="group__core__types__group.html#structdwBlobSize">dwBlobSize</a></div><div class="ttdoc">Holds blob dimensions.</div><div class="ttdef"><b>Definition:</b> <a href="Types_8h_source.html#l00256">Types.h:257</a></div></div>
<div class="ttc" id="agroup__dataconditioner__group_html_ga37a4e535e0bcc9f8ef09d79d07fb8146"><div class="ttname"><a href="group__dataconditioner__group.html#ga37a4e535e0bcc9f8ef09d79d07fb8146">dwDataConditioner_initialize</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwDataConditioner_initialize(dwDataConditionerHandle_t *const obj, dwBlobSize const *const networkInputBlobSize, uint32_t const maxNumImages, dwDataConditionerParams const *const dataConditionerParams, cudaStream_t const stream, dwContextHandle_t const ctx)</div><div class="ttdoc">Initializes a DataConditioner module.</div></div>
<div class="ttc" id="agroup__dataconditioner__group_html_ga67292ed5b708ad8a4730046f97a59fd9"><div class="ttname"><a href="group__dataconditioner__group.html#ga67292ed5b708ad8a4730046f97a59fd9">dwDataConditionerHandle_t</a></div><div class="ttdeci">struct dwDataConditionerObject * dwDataConditionerHandle_t</div><div class="ttdoc">Handle to a DataConditioner.</div><div class="ttdef"><b>Definition:</b> <a href="DataConditioner_8h_source.html#l00091">DataConditioner.h:91</a></div></div>
</div><!-- fragment --><p >In this case, the user is required to provide the network input blob dimensions, which can be acquired from <code>dwDNN</code> module via <code><a class="el" href="group__dnn__group.html#gaaf39e646d299905aa476a214eb80d4a9" title="Gets the input blob size at blobIndex.">dwDNN_getInputSize()</a></code> once the network is loaded. The batch size in networkInputBlobSize can be modified to allow for a batch of images to be prepared in parallel.</p>
<div class="fragment"><div class="line"><a class="code hl_enumeration" href="group__core__status__group.html#ga01e41060986cf4c0d618a8923846619b">dwStatus</a> <a class="code hl_function" href="group__dataconditioner__group.html#gae103a36b591607b1ee7043b95301624f">dwDataConditioner_initializeFromTensorProperties</a>(<a class="code hl_typedef" href="group__dataconditioner__group.html#ga67292ed5b708ad8a4730046f97a59fd9">dwDataConditionerHandle_t</a>* obj,</div>
<div class="line">    <span class="keyword">const</span> <a class="code hl_struct" href="group__dnntensor__group.html#structdwDNNTensorProperties">dwDNNTensorProperties</a>* outputProperties,</div>
<div class="line">    uint32_t maxNumImages,</div>
<div class="line">    <span class="keyword">const</span> <a class="code hl_struct" href="group__dataconditioner__group.html#structdwDataConditionerParams">dwDataConditionerParams</a>* dataConditionerParams,</div>
<div class="line">    cudaStream_t stream, <a class="code hl_typedef" href="group__core__context__group.html#gae81934046206143539721bbe30b08a1e">dwContextHandle_t</a> ctx);</div>
<div class="ttc" id="agroup__dataconditioner__group_html_gae103a36b591607b1ee7043b95301624f"><div class="ttname"><a href="group__dataconditioner__group.html#gae103a36b591607b1ee7043b95301624f">dwDataConditioner_initializeFromTensorProperties</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwDataConditioner_initializeFromTensorProperties(dwDataConditionerHandle_t *const obj, dwDNNTensorProperties const *const outputProperties, uint32_t const maxNumImages, dwDataConditionerParams const *const dataConditionerParams, cudaStream_t const stream, dwContextHandle_t const ctx)</div><div class="ttdoc">Initializes a DataConditioner module.</div></div>
<div class="ttc" id="agroup__dnntensor__group_html_structdwDNNTensorProperties"><div class="ttname"><a href="group__dnntensor__group.html#structdwDNNTensorProperties">dwDNNTensorProperties</a></div><div class="ttdoc">Specifies DNNTensor properties.</div><div class="ttdef"><b>Definition:</b> <a href="Tensor_8h_source.html#l00098">Tensor.h:99</a></div></div>
</div><!-- fragment --><p >This initialization function requires <code><a class="el" href="group__dnntensor__group.html#structdwDNNTensorProperties" title="Specifies DNNTensor properties.">dwDNNTensorProperties</a></code>, which can also be acquired from <code>dwDNN</code> module via <code><a class="el" href="group__dnn__group.html#ga83917b73ce48be2cc72b21a889998a1e" title="Gets the input tensor properties at blobIndex.">dwDNN_getInputTensorProperties()</a></code>. <code>maxNumImages</code> determines how many images can be prepared in parallel.</p>
<p ><code>ctx</code> is assumed to be a previously initialized <code><a class="el" href="group__timer__group.html#gae81934046206143539721bbe30b08a1e">dwContextHandle_t</a></code>.</p>
<h2>Data Preparation</h2>
<p >Allocate CUDA memory to store the output of DataConditioner module.</p>
<div class="fragment"><div class="line"><span class="comment">// Compute the number elements to store in output</span></div>
<div class="line"><span class="keywordtype">size_t</span> dataConditionerOutputTotalSize = dnnInputBlobSize.batch * dnnInputBlobSize.channels * dnnInputBlobSize.height * dnnInputBlobSize.width;</div>
<div class="line">cudaMalloc(&amp;dataConditionerOutput, <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="group__core__basictypes__group.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>) * dataConditionerOutputTotalSize);</div>
<div class="ttc" id="agroup__core__basictypes__group_html_ga4611b605e45ab401f02cab15c5e38715"><div class="ttname"><a href="group__core__basictypes__group.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a></div><div class="ttdeci">float float32_t</div><div class="ttdoc">Specifies POD types.</div><div class="ttdef"><b>Definition:</b> <a href="BasicTypes_8h_source.html#l00057">BasicTypes.h:57</a></div></div>
</div><!-- fragment --><p >Perform operations on a given image and store the result in <code>dataConditionerOutput</code>. All operations are performed asynchronously with the host code. There are two possible ways to execute data preparation: with raw pointers and with <code>dwDNNTensorHandle_t</code>.</p>
<p >With raw pointers:</p>
<div class="fragment"><div class="line"><span class="comment">// Set a region of interest in the given image. In this case, region of interest is the whole image.</span></div>
<div class="line"><a class="code hl_struct" href="GeometricTypes_8h.html#structdwRect">dwRect</a> regionOfInterest{};</div>
<div class="line">regionOfInterest.<a class="code hl_variable" href="GeometricTypes_8h.html#a63e965ce02b17cbd99efa6997e6738d2">width</a> = inputImage.prop.width;</div>
<div class="line">regionOfInterest.height = inputImage.prop.height;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Prepare image using DataConditioner</span></div>
<div class="line"><a class="code hl_function" href="group__dataconditioner__group.html#ga66dae56409542e1d0d5969e1f0478de1">dwDataConditioner_prepareDataRaw</a>(dataConditionerOutput, &amp;inputImage, 1, &amp;regionOfInterest, cudaAddressModeClamp, dataConditioner);</div>
<div class="ttc" id="aGeometricTypes_8h_html_a63e965ce02b17cbd99efa6997e6738d2"><div class="ttname"><a href="GeometricTypes_8h.html#a63e965ce02b17cbd99efa6997e6738d2">dwRect::width</a></div><div class="ttdeci">int32_t width</div><div class="ttdef"><b>Definition:</b> <a href="GeometricTypes_8h_source.html#l00065">GeometricTypes.h:65</a></div></div>
<div class="ttc" id="aGeometricTypes_8h_html_structdwRect"><div class="ttname"><a href="GeometricTypes_8h.html#structdwRect">dwRect</a></div><div class="ttdoc">Defines a rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="GeometricTypes_8h_source.html#l00056">GeometricTypes.h:57</a></div></div>
<div class="ttc" id="agroup__dataconditioner__group_html_ga66dae56409542e1d0d5969e1f0478de1"><div class="ttname"><a href="group__dataconditioner__group.html#ga66dae56409542e1d0d5969e1f0478de1">dwDataConditioner_prepareDataRaw</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwDataConditioner_prepareDataRaw(float32_t *const dOutputImage, dwImageCUDA const *const *const inputImages, uint32_t const numImages, dwRect const *const roi, cudaTextureAddressMode const addressMode, dwDataConditionerHandle_t const obj)</div><div class="ttdoc">Runs the configured transformations on an image.</div></div>
</div><!-- fragment --><p >With <code>dwDNNTensorHandle_t</code>:</p>
<div class="fragment"><div class="line"><span class="comment">// Set a region of interest in the given image. In this case, region of interest is the whole image.</span></div>
<div class="line"><a class="code hl_struct" href="GeometricTypes_8h.html#structdwRect">dwRect</a> regionOfInterests[1]{};</div>
<div class="line">regionOfInterests[0].<a class="code hl_variable" href="GeometricTypes_8h.html#a63e965ce02b17cbd99efa6997e6738d2">width</a> = inputImage.prop.width;</div>
<div class="line">regionOfInterests[0].height = inputImage.prop.height;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="group__dnntensor__group.html#ga80e8a0c8695a8fd7437fe413ec15f8ea">dwDNNTensorHandle_t</a> tensorOutput;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Allocate tensor output ...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Prepare image using DataConditioner</span></div>
<div class="line"><a class="code hl_function" href="group__dataconditioner__group.html#gadfebe8a5ef9573f9f5c0773ca8287330">dwDataConditioner_prepareData</a>(tensorOutput, &amp;inputImage, 1, regionOfInterests, cudaAddressModeClamp, dataConditioner);</div>
<div class="ttc" id="agroup__dataconditioner__group_html_gadfebe8a5ef9573f9f5c0773ca8287330"><div class="ttname"><a href="group__dataconditioner__group.html#gadfebe8a5ef9573f9f5c0773ca8287330">dwDataConditioner_prepareData</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwDataConditioner_prepareData(dwDNNTensorHandle_t const tensorOutput, dwImageHandle_t const *const inputImages, uint32_t const numImages, dwRect const *const rois, cudaTextureAddressMode const addressMode, dwDataConditionerHandle_t const obj)</div><div class="ttdoc">Runs the configured transformations on an image.</div></div>
<div class="ttc" id="agroup__dnntensor__group_html_ga80e8a0c8695a8fd7437fe413ec15f8ea"><div class="ttname"><a href="group__dnntensor__group.html#ga80e8a0c8695a8fd7437fe413ec15f8ea">dwDNNTensorHandle_t</a></div><div class="ttdeci">struct dwDNNTensorObject * dwDNNTensorHandle_t</div><div class="ttdoc">Handles representing Deep Neural Network interface.</div><div class="ttdef"><b>Definition:</b> <a href="Tensor_8h_source.html#l00057">Tensor.h:57</a></div></div>
</div><!-- fragment --><p >inputImages contains pointers to the images of the batch that shall be prepared. The number of images in inputImages is given through numImages and shall not exceed the (possibly modified) batch size of the network. The <code>regionOfInterest</code> parameter defines a specific region in all images to which the desired transformations as well as network inference shall be applied. The region of interest is identified by the coordinates of the top left corner, and the width and the height of the rectangle. If full images are of interest, then the top left corner must be set as (0,0), width and height according to the images at hand. The internal resizing of roi to match the network input size is defined in such a way that no image content is lost, but undefined border values might be created. addressMode shall be used to set the fill-up strategy for the undefined border values. Two modes are allowed cudaAddressModeBorder and cudaAddressModeClamp.</p>
<p >In a nutshell, <code><a class="el" href="group__dataconditioner__group.html#gadfebe8a5ef9573f9f5c0773ca8287330" title="Runs the configured transformations on an image.">dwDataConditioner_prepareData()</a></code> or <code><a class="el" href="group__dataconditioner__group.html#ga66dae56409542e1d0d5969e1f0478de1" title="Runs the configured transformations on an image.">dwDataConditioner_prepareDataRaw()</a></code> crops and resizes the defined ROI from each input image in order to match the network input size, applies the desired transformations, and returns the transformed image batch in <code>dataConditionerOutput</code>, which can be used as input to <a class="el" href="group__dnn__group.html#ga1e7f10c93a35cd1c22821871a76f957a" title="Runs inference pipeline on the given input.">dwDNN_infer()</a> (see <a class="el" href="dnn_mainsection.html">DNN</a> module Inference).</p>
<h1>Run Inference and Transform Output to Input Image Space</h1>
<div class="fragment"><div class="line">// Prepared data is usually given to dwDNN module for inference.</div>
<div class="line">runInference();</div>
</div><!-- fragment --><p >Assuming that the network used in <code>runInference</code> returns coordinates relative to the output of the network, the interpreted output of the network is transformed back from the network input coordinate frame to the input image space.</p>
<div class="fragment"><div class="line"><a class="code hl_enumeration" href="group__core__status__group.html#ga01e41060986cf4c0d618a8923846619b">dwStatus</a> <a class="code hl_function" href="group__dataconditioner__group.html#gac9c050325b1924243585cc6cb24b4300">dwDataConditioner_outputPositionToInput</a>(<a class="code hl_typedef" href="group__core__basictypes__group.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> *outputX,</div>
<div class="line">    <a class="code hl_typedef" href="group__core__basictypes__group.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> *outputY,</div>
<div class="line">    <a class="code hl_typedef" href="group__core__basictypes__group.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> inputX,</div>
<div class="line">    <a class="code hl_typedef" href="group__core__basictypes__group.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> inputY,</div>
<div class="line">    <span class="keyword">const</span> <a class="code hl_struct" href="GeometricTypes_8h.html#structdwRect">dwRect</a> *regionOfInterest,</div>
<div class="line">    <a class="code hl_typedef" href="group__dataconditioner__group.html#ga67292ed5b708ad8a4730046f97a59fd9">dwDataConditionerHandle_t</a> obj)</div>
<div class="ttc" id="agroup__dataconditioner__group_html_gac9c050325b1924243585cc6cb24b4300"><div class="ttname"><a href="group__dataconditioner__group.html#gac9c050325b1924243585cc6cb24b4300">dwDataConditioner_outputPositionToInput</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwDataConditioner_outputPositionToInput(float32_t *const outputX, float32_t *const outputY, float32_t const inputX, float32_t const inputY, dwRect const *const roi, dwDataConditionerHandle_t const obj)</div><div class="ttdoc">Computes the position of a point from the interpreted DNN output on the input image.</div></div>
</div><!-- fragment --><p> where the point to be transformed back is passed through inputX and inputY and is returned in outputX and outputY. The same <code>regionOfInterest</code> passed to <code><a class="el" href="group__dataconditioner__group.html#gadfebe8a5ef9573f9f5c0773ca8287330" title="Runs the configured transformations on an image.">dwDataConditioner_prepareData()</a></code> shall be used.</p>
<h1>Free the Memory</h1>
<p >Finally, free previously allocated memory.</p>
<div class="fragment"><div class="line"><span class="comment">// Free resources</span></div>
<div class="line">cudaFree(dataConditionerOutput);</div>
<div class="line"><a class="code hl_function" href="group__dataconditioner__group.html#ga4b61c291b9dd31606b00efca75608ead">dwDataConditioner_release</a>(&amp;dataConditioner)</div>
<div class="ttc" id="agroup__dataconditioner__group_html_ga4b61c291b9dd31606b00efca75608ead"><div class="ttname"><a href="group__dataconditioner__group.html#ga4b61c291b9dd31606b00efca75608ead">dwDataConditioner_release</a></div><div class="ttdeci">DW_API_PUBLIC dwStatus dwDataConditioner_release(dwDataConditionerHandle_t const obj)</div><div class="ttdoc">Releases the DataConditioner module.</div></div>
</div><!-- fragment --><p >For more information see:</p><ul>
<li><a class="el" href="dwx_object_detector_tracker_sample.html">Basic Object Detector and Tracker Sample</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">
        Advance Information | Subject to Change |
        Prepared and Provided under NDA | Generated by NVIDIA |
        PR-08397-V5.0
      </li>
     </ul>
  </div>
</body>
</html>
