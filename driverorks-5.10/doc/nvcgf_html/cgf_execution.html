<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
 * Copyright (c) 2022 NVIDIA CORPORATION.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
-->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Compute Graph Framework SDK Reference: Execution</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="Nvidia.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="nv.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 110px;">
  <td id="projectlogo" width="19%">
    <a id="nv-logo" href="https://www.nvidia.com/"></a>
  </td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Compute Graph Framework SDK Reference
   &#160;<span id="projectnumber">5.10</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('cgf_execution.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Execution </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#scheduling">Scheduling</a><ul><li class="level2"><a href="#scheduling-example">Example</a></li>
<li class="level2"><a href="#periodicity">Periodicity</a></li>
<li class="level2"><a href="#stm">System Task Manager (STM)</a></li>
</ul>
</li>
<li class="level1"><a href="#process-layout">Process Layout</a></li>
</ul>
</div>
<div class="textblock"><p >The execution of the computational pipeline defined by a DAG has two additional aspects which are orthogonal to each other:</p>
<h1><a class="anchor" id="scheduling"></a>
Scheduling</h1>
<p >The scheduling strategy defines when each processing element - the passes from the nodes - should be executed. It needs to satisfy the constraints imposed by the DAG meaning the passes of a node which has data dependencies on other nodes can't be scheduled until the passes of the other nodes have been executed.</p>
<p >The order of node passes which are not constraint by data dependencies expressed in the DAG can be freely decided by the scheduler. Those might run sequentially in either order or concurrently.</p>
<h2><a class="anchor" id="scheduling-example"></a>
Example</h2>
<p >The following diagram show possible schedules for the same DAG. For simplicity it is assumed that all passes take the same amount of time and that the passes in "node 1" must run sequentially.</p>
<p ><div class="dotgraph">
<img src="dot_example_dag.png" alt="dot_example_dag.png" border="0" usemap="#dot_example_dag.map"/>
<div class="caption">
Example DAG</div>
</div>
</p>
<div class="plantumlgraph">
<img src="example_schedule_a.png" />
<div class="caption">
Example Schedule A</div>
</div>
<div class="plantumlgraph">
<img src="example_schedule_b.png" />
<div class="caption">
Example Schedule B</div>
</div>
<h2><a class="anchor" id="periodicity"></a>
Periodicity</h2>
<p >In complex applications the overall data pipeline might not be executed in a single repeated cycle. Parts of the DAG might be scheduled with different frequencies than others and will run independently - potentially concurrently. In STM (see below) terminology such concurrently running parts of the data pipeline are called <b>epochs</b>.</p>
<p >For nodes with a data dependency which spans across such scheduling domains, the channels must be configured to match the different execution frequencies.</p>
<ul>
<li>If the producing node is scheduled at a <b>higher frequency</b> than the consuming node, the channel defines the desired policy, e.g.:<ul>
<li>use a queue large enough to store N messages if the producing node is running N times for each time the consuming node runs once, or</li>
<li>overwrite older messages so that the consuming node only received the latest of the N messages when being run.</li>
</ul>
</li>
<li>If the producing node is scheduled at a <b>lower frequency</b> than the consuming node, the channel defines the desired policy, e.g.:<ul>
<li>the consuming node only receives new messages every N-th scheduling iteration, or</li>
<li>the consuming node reuses the previous message if no new message was provided by the producing node.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="stm"></a>
System Task Manager (STM)</h2>
<p >CGF aims to support the implementation of custom schedulers to execute a CGF data pipeline. As of today only a single scheduler implementation is provided.</p>
<p >System Task Manager (STM) is a static, centrally-monitored, OS-agnostic, non-preemptive user-space scheduler that manages the work across hardware engines. Based on the information from the DAG, a schedule configuration, and the worst-case execution time (WCET) for each pass the STM compiler generates a static schedule. The global scheduling policies is then applied at runtime across the heterogeneous compute platform.</p>
<p >One important aspect of STM is that it ever schedules one single pass per hardware engine - never multiple concurrently. This aims to provide predictable performance by avoiding that the underlying OS affects the scheduling of concurrently running passes.</p>
<p >See the STM documentation for more details and available tools. The <code>driveworks_stm.deb</code> contains a PDF named <code>Nvidia-STM-Userguide-for-DW&lt;version&gt;.pdf</code> under <code>/usr/local/driveworks-&lt;version&gt;/doc</code>.</p>
<h1><a class="anchor" id="process-layout"></a>
Process Layout</h1>
<p >For scalability the execution of nodes might be distributed across more than one SoC and for fault isolation the distribution across multiple OS processes might be desired. Therefore a CGF application can define multiple OS processes and map each node to a specific process.</p>
<div class="plantumlgraph">
<img src="process_layout.png" />
<div class="caption">
Process Layout</div>
</div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
