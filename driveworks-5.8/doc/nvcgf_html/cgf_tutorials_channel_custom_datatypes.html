<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
 * Copyright (c) 2022 NVIDIA CORPORATION.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
-->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Compute Graph Framework SDK Reference: Using custom data types with Channel</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="Nvidia.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="nv.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 110px;">
  <td id="projectlogo" width="19%">
    <a id="nv-logo" href="https://www.nvidia.com/"></a>
  </td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Compute Graph Framework SDK Reference
   &#160;<span id="projectnumber">5.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('cgf_tutorials_channel_custom_datatypes.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Using custom data types with Channel </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md132"></a>
Using Custom Data Types with CGF Channels</h1>
<p >CGF Channels can be extended to allocate and transport custom data types that are defined by applications.</p>
<h2><a class="anchor" id="autotoc_md133"></a>
POD vs non-POD</h2>
<p >All data types to be used with CGF Channels must be declared. A data type can be plain-old-data (POD), which is not the same as std::is_pod. POD types from Channel's perspective means that the data type is a single contiguous chunk of memory, with no pointers. Primitive types and structs of primitive types are POD. CGF Channels, given a type is POD, can handle all allocation and transport of that data type automatically. A data type that is not POD cannot be handled automatically by CGF Channels. Applications must define implementations for CGF Channels to be able to allocate and transport said types.</p>
<h2><a class="anchor" id="autotoc_md134"></a>
Declaring Custom Data Types</h2>
<p >Any data type an application wishes to transport with CGF Channels must be declared using macros. In order to use a PortInput/Output of DataType, the macro declaration for the data type must be in the include path of the application. Otherwise a static assertion will be triggered because CGF Channels will not know how to handle the data type.</p>
<p ><a class="el" href="dwcgf_2channel_2ChannelPacketTypes_8hpp.html#a037ba9b64b130077ee8a492522eea445">DWFRAMEWORK_DECLARE_PACKET_TYPE_POD(DataType)</a> - declares a data type DataType as POD. Nothing further is needed to be able to use DataType with CGF Channels.</p>
<p >In order to handle data types which are non-POD, applications must define a class that extends the IChannelPacket interface. The IChannelPacket interface will be used by CGF Channels to allocate and transport the type without knowing the definition of that data type. Once an application has defined its implementations of IChannelPacket for its types, it must register constructors for its implementations using ChannelFactory::registerPacketConstructor(), which is a static function that can be called during load-time. Each IChannelPacket class is registered with a unique id for the data type it is meant to handle. Behind the scenes, whenever CGF Channels needs to identify a data type, it uses the unique id, including to verify that connected producers and consumers are expecting the same data type as well as to match the data type to the IChannelPacket class that should be used for it.</p>
<p >Similar to the POD case, an application must declare non-POD types using a macro.</p>
<p ><a class="el" href="dwcgf_2channel_2ChannelPacketTypes_8hpp.html#a564ff372fff22c498ec6123d3c6f9496">DWFRAMEWORK_DECLARE_PACKET_TYPE_RELATION(DataType, SpecimenType, TypeID)</a> - declares DataType as non-POD. SpecimenType is the parameter to be passed by application to the IChannelPacket implementation that describes how to allocate DataType, and TypeID is the unique type id for DataType.</p>
<p >The TypeID cannot be in the interval [DWFRAMEWORK_PACKET_ID_DEFAULT, DWFRAMEWORK_MAX_INTERNAL_TYPES), as those type IDs may be taken by CGF for CGF built-in data types.</p>
<h2><a class="anchor" id="autotoc_md135"></a>
Defining Custom Data Type Handling</h2>
<p >See <a class="el" href="cgf_samples_channel.html">CGF Channel Sample</a> source code for reference of implementing custom type handling. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
